var Bh=Object.defineProperty;var Fh=(e,t,n)=>t in e?Bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>(Fh(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Zc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wn={DEBUG:!1,LIB_VERSION:"2.53.0"},we;if(typeof window>"u"){var hl={hostname:""};we={navigator:{userAgent:""},document:{location:hl,referrer:""},screen:{width:0,height:0},location:hl}}else we=window;var Qh=24*60*60*1e3,yr=Array.prototype,Hh=Function.prototype,eu=Object.prototype,Mn=yr.slice,ks=eu.toString,gr=eu.hasOwnProperty,et=we.console,Bn=we.navigator,Fe=we.document,$s=we.opera,tr=we.screen,nn=Bn.userAgent,Wr=Hh.bind,fl=yr.forEach,pl=yr.indexOf,ml=yr.map,jh=Array.isArray,go={},p={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},Le={log:function(){if(wn.DEBUG&&!p.isUndefined(et)&&et)try{et.log.apply(et,arguments)}catch{p.each(arguments,function(t){et.log(t)})}},warn:function(){if(wn.DEBUG&&!p.isUndefined(et)&&et){var e=["Mixpanel warning:"].concat(p.toArray(arguments));try{et.warn.apply(et,e)}catch{p.each(e,function(n){et.warn(n)})}}},error:function(){if(wn.DEBUG&&!p.isUndefined(et)&&et){var e=["Mixpanel error:"].concat(p.toArray(arguments));try{et.error.apply(et,e)}catch{p.each(e,function(n){et.error(n)})}}},critical:function(){if(!p.isUndefined(et)&&et){var e=["Mixpanel error:"].concat(p.toArray(arguments));try{et.error.apply(et,e)}catch{p.each(e,function(n){et.error(n)})}}}},Gr=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(Le,arguments)}},la=function(e){return{log:Gr(Le.log,e),error:Gr(Le.error,e),critical:Gr(Le.critical,e)}};p.bind=function(e,t){var n,i;if(Wr&&e.bind===Wr)return Wr.apply(e,Mn.call(arguments,1));if(!p.isFunction(e))throw new TypeError;return n=Mn.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(Mn.call(arguments)));var s={};s.prototype=e.prototype;var r=new s;s.prototype=null;var o=e.apply(r,n.concat(Mn.call(arguments)));return Object(o)===o?o:r},i};p.each=function(e,t,n){if(e!=null){if(fl&&e.forEach===fl)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===go)return}else for(var r in e)if(gr.call(e,r)&&t.call(n,e[r],r,e)===go)return}};p.extend=function(e){return p.each(Mn.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])}),e};p.isArray=jh||function(e){return ks.call(e)==="[object Array]"};p.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch{return!1}};p.isArguments=function(e){return!!(e&&gr.call(e,"callee"))};p.toArray=function(e){return e?e.toArray?e.toArray():p.isArray(e)||p.isArguments(e)?Mn.call(e):p.values(e):[]};p.map=function(e,t,n){if(ml&&e.map===ml)return e.map(t,n);var i=[];return p.each(e,function(s){i.push(t.call(n,s))}),i};p.keys=function(e){var t=[];return e===null||p.each(e,function(n,i){t[t.length]=i}),t};p.values=function(e){var t=[];return e===null||p.each(e,function(n){t[t.length]=n}),t};p.include=function(e,t){var n=!1;return e===null?n:pl&&e.indexOf===pl?e.indexOf(t)!=-1:(p.each(e,function(i){if(n||(n=i===t))return go}),n)};p.includes=function(e,t){return e.indexOf(t)!==-1};p.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e};p.isObject=function(e){return e===Object(e)&&!p.isArray(e)};p.isEmptyObject=function(e){if(p.isObject(e)){for(var t in e)if(gr.call(e,t))return!1;return!0}return!1};p.isUndefined=function(e){return e===void 0};p.isString=function(e){return ks.call(e)=="[object String]"};p.isDate=function(e){return ks.call(e)=="[object Date]"};p.isNumber=function(e){return ks.call(e)=="[object Number]"};p.isElement=function(e){return!!(e&&e.nodeType===1)};p.encodeDates=function(e){return p.each(e,function(t,n){p.isDate(t)?e[n]=p.formatDate(t):p.isObject(t)&&(e[n]=p.encodeDates(t))}),e};p.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};p.formatDate=function(e){function t(n){return n<10?"0"+n:n}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())};p.strip_empty_properties=function(e){var t={};return p.each(e,function(n,i){p.isString(n)&&n.length>0&&(t[i]=n)}),t};p.truncate=function(e,t){var n;return typeof e=="string"?n=e.slice(0,t):p.isArray(e)?(n=[],p.each(e,function(i){n.push(p.truncate(i,t))})):p.isObject(e)?(n={},p.each(e,function(i,s){n[s]=p.truncate(i,t)})):n=e,n};p.JSONEncode=function(){return function(e){var t=e,n=function(s){var r=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return r.lastIndex=0,r.test(s)?'"'+s.replace(r,function(l){var c=o[l];return typeof c=="string"?c:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+s+'"'},i=function(s,r){var o="",l="    ",c=0,u="",d="",h=0,f=o,m=[],y=r[s];switch(y&&typeof y=="object"&&typeof y.toJSON=="function"&&(y=y.toJSON(s)),typeof y){case"string":return n(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":return String(y);case"object":if(!y)return"null";if(o+=l,m=[],ks.apply(y)==="[object Array]"){for(h=y.length,c=0;c<h;c+=1)m[c]=i(c,y)||"null";return d=m.length===0?"[]":o?`[
`+o+m.join(`,
`+o)+`
`+f+"]":"["+m.join(",")+"]",o=f,d}for(u in y)gr.call(y,u)&&(d=i(u,y),d&&m.push(n(u)+(o?": ":":")+d));return d=m.length===0?"{}":o?"{"+m.join(",")+f+"}":"{"+m.join(",")+"}",o=f,d}};return i("",{"":t})}}();p.JSONDecode=function(){var e,t,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i,s=function(m){var y=new SyntaxError(m);throw y.at=e,y.text=i,y},r=function(m){return m&&m!==t&&s("Expected '"+m+"' instead of '"+t+"'"),t=i.charAt(e),e+=1,t},o=function(){var m,y="";for(t==="-"&&(y="-",r("-"));t>="0"&&t<="9";)y+=t,r();if(t===".")for(y+=".";r()&&t>="0"&&t<="9";)y+=t;if(t==="e"||t==="E")for(y+=t,r(),(t==="-"||t==="+")&&(y+=t,r());t>="0"&&t<="9";)y+=t,r();if(m=+y,!isFinite(m))s("Bad number");else return m},l=function(){var m,y,S="",A;if(t==='"')for(;r();){if(t==='"')return r(),S;if(t==="\\")if(r(),t==="u"){for(A=0,y=0;y<4&&(m=parseInt(r(),16),!!isFinite(m));y+=1)A=A*16+m;S+=String.fromCharCode(A)}else if(typeof n[t]=="string")S+=n[t];else break;else S+=t}s("Bad string")},c=function(){for(;t&&t<=" ";)r()},u=function(){switch(t){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}s('Unexpected "'+t+'"')},d,h=function(){var m=[];if(t==="["){if(r("["),c(),t==="]")return r("]"),m;for(;t;){if(m.push(d()),c(),t==="]")return r("]"),m;r(","),c()}}s("Bad array")},f=function(){var m,y={};if(t==="{"){if(r("{"),c(),t==="}")return r("}"),y;for(;t;){if(m=l(),c(),r(":"),Object.hasOwnProperty.call(y,m)&&s('Duplicate key "'+m+'"'),y[m]=d(),c(),t==="}")return r("}"),y;r(","),c()}}s("Bad object")};return d=function(){switch(c(),t){case"{":return f();case"[":return h();case'"':return l();case"-":return o();default:return t>="0"&&t<="9"?o():u()}},function(m){var y;return i=m,e=0,t=" ",y=d(),c(),t&&s("Syntax error"),y}}();p.base64Encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,i,s,r,o,l,c,u,d=0,h=0,f="",m=[];if(!e)return e;e=p.utf8Encode(e);do n=e.charCodeAt(d++),i=e.charCodeAt(d++),s=e.charCodeAt(d++),u=n<<16|i<<8|s,r=u>>18&63,o=u>>12&63,l=u>>6&63,c=u&63,m[h++]=t.charAt(r)+t.charAt(o)+t.charAt(l)+t.charAt(c);while(d<e.length);switch(f=m.join(""),e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f};p.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var t="",n,i,s=0,r;for(n=i=0,s=e.length,r=0;r<s;r++){var o=e.charCodeAt(r),l=null;o<128?i++:o>127&&o<2048?l=String.fromCharCode(o>>6|192,o&63|128):l=String.fromCharCode(o>>12|224,o>>6&63|128,o&63|128),l!==null&&(i>n&&(t+=e.substring(n,i)),t+=l,n=i=r+1)}return i>n&&(t+=e.substring(n,e.length)),t};p.UUID=function(){var e=function(){var i=1*new Date,s;if(we.performance&&we.performance.now)s=we.performance.now();else for(s=0;i==1*new Date;)s++;return i.toString(16)+Math.floor(s).toString(16)},t=function(){return Math.random().toString(16).replace(".","")},n=function(){var i=nn,s,r,o=[],l=0;function c(u,d){var h,f=0;for(h=0;h<d.length;h++)f|=o[h]<<h*8;return u^f}for(s=0;s<i.length;s++)r=i.charCodeAt(s),o.unshift(r&255),o.length>=4&&(l=c(l,o),o=[]);return o.length>0&&(l=c(l,o)),l.toString(16)};return function(){var i=(tr.height*tr.width).toString(16);return e()+"-"+t()+"-"+n()+"-"+i+"-"+e()}}();var yl=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];p.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<yl.length;t++)if(e.indexOf(yl[t])!==-1)return!0;return!1};p.HTTPBuildQuery=function(e,t){var n,i,s=[];return p.isUndefined(t)&&(t="&"),p.each(e,function(r,o){n=encodeURIComponent(r.toString()),i=encodeURIComponent(o),s[s.length]=i+"="+n}),s.join(t)};p.getQueryParam=function(e,t){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)",i=new RegExp(n),s=i.exec(e);if(s===null||s&&typeof s[1]!="string"&&s[1].length)return"";var r=s[1];try{r=decodeURIComponent(r)}catch{Le.error("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")};p.cookie={get:function(e){for(var t=e+"=",n=Fe.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];s.charAt(0)==" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return decodeURIComponent(s.substring(t.length,s.length))}return null},parse:function(e){var t;try{t=p.JSONDecode(p.cookie.get(e))||{}}catch{}return t},set_seconds:function(e,t,n,i,s,r,o){var l="",c="",u="";if(o)l="; domain="+o;else if(i){var d=gl(Fe.location.hostname);l=d?"; domain=."+d:""}if(n){var h=new Date;h.setTime(h.getTime()+n*1e3),c="; expires="+h.toGMTString()}r&&(s=!0,u="; SameSite=None"),s&&(u+="; secure"),Fe.cookie=e+"="+encodeURIComponent(t)+c+"; path=/"+l+u},set:function(e,t,n,i,s,r,o){var l="",c="",u="";if(o)l="; domain="+o;else if(i){var d=gl(Fe.location.hostname);l=d?"; domain=."+d:""}if(n){var h=new Date;h.setTime(h.getTime()+n*24*60*60*1e3),c="; expires="+h.toGMTString()}r&&(s=!0,u="; SameSite=None"),s&&(u+="; secure");var f=e+"="+encodeURIComponent(t)+c+"; path=/"+l+u;return Fe.cookie=f,f},remove:function(e,t,n){p.cookie.set(e,"",-1,t,!1,!1,n)}};var Yr=null,nr=function(e,t){if(Yr!==null&&!t)return Yr;var n=!0;try{e=e||window.localStorage;var i="__mplss_"+ca(8),s="xyz";e.setItem(i,s),e.getItem(i)!==s&&(n=!1),e.removeItem(i)}catch{n=!1}return Yr=n,n};p.localStorage={is_supported:function(e){var t=nr(null,e);return t||Le.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){Le.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(t){p.localStorage.error(t)}return null},parse:function(e){try{return p.JSONDecode(p.localStorage.get(e))||{}}catch{}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(n){p.localStorage.error(n)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(t){p.localStorage.error(t)}}};p.register_event=function(){var e=function(i,s,r,o,l){if(!i){Le.error("No valid element provided to register_event");return}if(i.addEventListener&&!o)i.addEventListener(s,r,!!l);else{var c="on"+s,u=i[c];i[c]=t(i,r,u)}};function t(i,s,r){var o=function(l){if(l=l||n(window.event),!!l){var c=!0,u,d;return p.isFunction(r)&&(u=r(l)),d=s.call(i,l),(u===!1||d===!1)&&(c=!1),c}};return o}function n(i){return i&&(i.preventDefault=n.preventDefault,i.stopPropagation=n.stopPropagation),i}return n.preventDefault=function(){this.returnValue=!1},n.stopPropagation=function(){this.cancelBubble=!0},e}();var Vh=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');p.dom_query=function(){function e(s){return s.all?s.all:s.getElementsByTagName("*")}var t=/[\t\r\n]/g;function n(s,r){var o=" "+r+" ";return(" "+s.className+" ").replace(t," ").indexOf(o)>=0}function i(s){if(!Fe.getElementsByTagName)return[];var r=s.split(" "),o,l,c,u,d,h,f,m,y,S,A=[Fe];for(h=0;h<r.length;h++){if(o=r[h].replace(/^\s+/,"").replace(/\s+$/,""),o.indexOf("#")>-1){l=o.split("#"),c=l[0];var N=l[1],F=Fe.getElementById(N);if(!F||c&&F.nodeName.toLowerCase()!=c)return[];A=[F];continue}if(o.indexOf(".")>-1){l=o.split("."),c=l[0];var J=l[1];for(c||(c="*"),u=[],d=0,f=0;f<A.length;f++)for(c=="*"?y=e(A[f]):y=A[f].getElementsByTagName(c),m=0;m<y.length;m++)u[d++]=y[m];for(A=[],S=0,f=0;f<u.length;f++)u[f].className&&p.isString(u[f].className)&&n(u[f],J)&&(A[S++]=u[f]);continue}var oe=o.match(Vh);if(oe){c=oe[1];var ee=oe[2],ie=oe[3],be=oe[4];for(c||(c="*"),u=[],d=0,f=0;f<A.length;f++)for(c=="*"?y=e(A[f]):y=A[f].getElementsByTagName(c),m=0;m<y.length;m++)u[d++]=y[m];A=[],S=0;var ae;switch(ie){case"=":ae=function(ne){return ne.getAttribute(ee)==be};break;case"~":ae=function(ne){return ne.getAttribute(ee).match(new RegExp("\\b"+be+"\\b"))};break;case"|":ae=function(ne){return ne.getAttribute(ee).match(new RegExp("^"+be+"-?"))};break;case"^":ae=function(ne){return ne.getAttribute(ee).indexOf(be)===0};break;case"$":ae=function(ne){return ne.getAttribute(ee).lastIndexOf(be)==ne.getAttribute(ee).length-be.length};break;case"*":ae=function(ne){return ne.getAttribute(ee).indexOf(be)>-1};break;default:ae=function(ne){return ne.getAttribute(ee)}}for(A=[],S=0,f=0;f<u.length;f++)ae(u[f])&&(A[S++]=u[f]);continue}for(c=o,u=[],d=0,f=0;f<A.length;f++)for(y=A[f].getElementsByTagName(c),m=0;m<y.length;m++)u[d++]=y[m];A=u}return A}return function(s){return p.isElement(s)?[s]:p.isObject(s)&&!p.isUndefined(s.length)?s:i.call(this,s)}}();var Wh=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],Gh=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","ttclid","twclid","wbraid"];p.info={campaignParams:function(e){var t="",n={};return p.each(Wh,function(i){t=p.getQueryParam(Fe.URL,i),t.length?n[i]=t:e!==void 0&&(n[i]=e)}),n},clickParams:function(){var e="",t={};return p.each(Gh,function(n){e=p.getQueryParam(Fe.URL,n),e.length&&(t[n]=e)}),t},marketingParams:function(){return p.extend(p.info.campaignParams(),p.info.clickParams())},searchEngine:function(e){return e.search("https?://(.*)google.([^/?]*)")===0?"google":e.search("https?://(.*)bing.com")===0?"bing":e.search("https?://(.*)yahoo.com")===0?"yahoo":e.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(e){var t=p.info.searchEngine(e),n=t!="yahoo"?"q":"p",i={};if(t!==null){i.$search_engine=t;var s=p.getQueryParam(e,n);s.length&&(i.mp_keyword=s)}return i},browser:function(e,t,n){return t=t||"",n||p.includes(e," OPR/")?p.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":p.includes(e,"IEMobile")||p.includes(e,"WPDesktop")?"Internet Explorer Mobile":p.includes(e,"SamsungBrowser/")?"Samsung Internet":p.includes(e,"Edge")||p.includes(e,"Edg/")?"Microsoft Edge":p.includes(e,"FBIOS")?"Facebook Mobile":p.includes(e,"Chrome")?"Chrome":p.includes(e,"CriOS")?"Chrome iOS":p.includes(e,"UCWEB")||p.includes(e,"UCBrowser")?"UC Browser":p.includes(e,"FxiOS")?"Firefox iOS":p.includes(t,"Apple")?p.includes(e,"Mobile")?"Mobile Safari":"Safari":p.includes(e,"Android")?"Android Mobile":p.includes(e,"Konqueror")?"Konqueror":p.includes(e,"Firefox")?"Firefox":p.includes(e,"MSIE")||p.includes(e,"Trident/")?"Internet Explorer":p.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,n){var i=p.info.browser(e,t,n),s={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},r=s[i];if(r===void 0)return null;var o=e.match(r);return o?parseFloat(o[o.length-2]):null},os:function(){var e=nn;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},currentUrl:function(){return we.location.href},properties:function(e){return typeof e!="object"&&(e={}),p.extend(p.strip_empty_properties({$os:p.info.os(),$browser:p.info.browser(nn,Bn.vendor,$s),$referrer:Fe.referrer,$referring_domain:p.info.referringDomain(Fe.referrer),$device:p.info.device(nn)}),{$current_url:p.info.currentUrl(),$browser_version:p.info.browserVersion(nn,Bn.vendor,$s),$screen_height:tr.height,$screen_width:tr.width,mp_lib:"web",$lib_version:wn.LIB_VERSION,$insert_id:ca(),time:p.timestamp()/1e3},p.strip_empty_properties(e))},people_properties:function(){return p.extend(p.strip_empty_properties({$os:p.info.os(),$browser:p.info.browser(nn,Bn.vendor,$s)}),{$browser_version:p.info.browserVersion(nn,Bn.vendor,$s)})},mpPageViewProperties:function(){return p.strip_empty_properties({current_page_title:Fe.title,current_domain:we.location.hostname,current_url_path:we.location.pathname,current_url_protocol:we.location.protocol,current_url_search:we.location.search})}};var ca=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},Yh=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,zh=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,gl=function(e){var t=zh,n=e.split("."),i=n[n.length-1];(i.length>4||i==="com"||i==="org")&&(t=Yh);var s=e.match(t);return s?s[0]:""},ir=null,sr=null;typeof JSON<"u"&&(ir=JSON.stringify,sr=JSON.parse);ir=ir||p.JSONEncode;sr=sr||p.JSONDecode;p.toArray=p.toArray;p.isObject=p.isObject;p.JSONEncode=p.JSONEncode;p.JSONDecode=p.JSONDecode;p.isBlockedUA=p.isBlockedUA;p.isEmptyObject=p.isEmptyObject;p.info=p.info;p.info.device=p.info.device;p.info.browser=p.info.browser;p.info.browserVersion=p.info.browserVersion;p.info.properties=p.info.properties;var Sn=function(){};Sn.prototype.create_properties=function(){};Sn.prototype.event_handler=function(){};Sn.prototype.after_track_handler=function(){};Sn.prototype.init=function(e){return this.mp=e,this};Sn.prototype.track=function(e,t,n,i){var s=this,r=p.dom_query(e);if(r.length===0){Le.error("The DOM query ("+e+") returned 0 elements");return}return p.each(r,function(o){p.register_event(o,this.override_event,function(l){var c={},u=s.create_properties(n,this),d=s.mp.get_config("track_links_timeout");s.event_handler(l,this,c),window.setTimeout(s.track_callback(i,u,c,!0),d),s.mp.track(t,u,s.track_callback(i,u,c))})},this),!0};Sn.prototype.track_callback=function(e,t,n,i){i=i||!1;var s=this;return function(){n.callback_fired||(n.callback_fired=!0,!(e&&e(i,t)===!1)&&s.after_track_handler(t,n,i))}};Sn.prototype.create_properties=function(e,t){var n;return typeof e=="function"?n=e(t):n=p.extend({},e),n};var $i=function(){this.override_event="click"};p.inherit($i,Sn);$i.prototype.create_properties=function(e,t){var n=$i.superclass.create_properties.apply(this,arguments);return t.href&&(n.url=t.href),n};$i.prototype.event_handler=function(e,t,n){n.new_tab=e.which===2||e.metaKey||e.ctrlKey||t.target==="_blank",n.href=t.href,n.new_tab||e.preventDefault()};$i.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout(function(){window.location=t.href},0)};var _r=function(){this.override_event="submit"};p.inherit(_r,Sn);_r.prototype.event_handler=function(e,t,n){n.element=t,e.preventDefault()};_r.prototype.after_track_handler=function(e,t){setTimeout(function(){t.element.submit()},0)};var Kh=la("lock"),tu=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};tu.prototype.withLock=function(e,t,n){!n&&typeof t!="function"&&(n=t,t=null);var i=n||new Date().getTime()+"|"+Math.random(),s=new Date().getTime(),r=this.storageKey,o=this.pollIntervalMS,l=this.timeoutMS,c=this.storage,u=r+":X",d=r+":Y",h=r+":Z",f=function(F){t&&t(F)},m=function(F){if(new Date().getTime()-s>l){Kh.error("Timeout waiting for mutex on "+r+"; clearing lock. ["+i+"]"),c.removeItem(h),c.removeItem(d),A();return}setTimeout(function(){try{F()}catch(J){f(J)}},o*(Math.random()+.1))},y=function(F,J){F()?J():m(function(){y(F,J)})},S=function(){var F=c.getItem(d);if(F&&F!==i)return!1;if(c.setItem(d,i),c.getItem(d)===i)return!0;if(!nr(c,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},A=function(){c.setItem(u,i),y(S,function(){if(c.getItem(u)===i){N();return}m(function(){if(c.getItem(d)!==i){A();return}y(function(){return!c.getItem(h)},N)})})},N=function(){c.setItem(h,"1");try{e()}finally{c.removeItem(h),c.getItem(d)===i&&c.removeItem(d),c.getItem(u)===i&&c.removeItem(u)}};try{if(nr(c,!0))A();else throw new Error("localStorage support check failed")}catch(F){f(F)}};var _l=la("batch"),Gn=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.reportError=t.errorReporter||p.bind(_l.error,_l),this.lock=new tu(e,{storage:this.storage}),this.pid=t.pid||null,this.memQueue=[]};Gn.prototype.enqueue=function(e,t,n){var i={id:ca(),flushAfter:new Date().getTime()+t*2,payload:e};this.lock.withLock(p.bind(function(){var r;try{var o=this.readFromStorage();o.push(i),r=this.saveToStorage(o),r&&this.memQueue.push(i)}catch{this.reportError("Error enqueueing item",e),r=!1}n&&n(r)},this),p.bind(function(r){this.reportError("Error acquiring storage lock",r),n&&n(!1)},this),this.pid)};Gn.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(t.length<e){var n=this.readFromStorage();if(n.length){var i={};p.each(t,function(o){i[o.id]=!0});for(var s=0;s<n.length;s++){var r=n[s];if(new Date().getTime()>r.flushAfter&&!i[r.id]&&(r.orphaned=!0,t.push(r),t.length>=e))break}}}return t};var vl=function(e,t){var n=[];return p.each(e,function(i){i.id&&!t[i.id]&&n.push(i)}),n};Gn.prototype.removeItemsByID=function(e,t){var n={};p.each(e,function(s){n[s]=!0}),this.memQueue=vl(this.memQueue,n);var i=p.bind(function(){var s;try{var r=this.readFromStorage();if(r=vl(r,n),s=this.saveToStorage(r),s){r=this.readFromStorage();for(var o=0;o<r.length;o++){var l=r[o];if(l.id&&n[l.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",e),s=!1}return s},this);this.lock.withLock(function(){var r=i();t&&t(r)},p.bind(function(r){var o=!1;if(this.reportError("Error acquiring storage lock",r),!nr(this.storage,!0)&&(o=i(),!o))try{this.storage.removeItem(this.storageKey)}catch(l){this.reportError("Error clearing queue",l)}t&&t(o)},this),this.pid)};var bl=function(e,t){var n=[];return p.each(e,function(i){var s=i.id;if(s in t){var r=t[s];r!==null&&(i.payload=r,n.push(i))}else n.push(i)}),n};Gn.prototype.updatePayloads=function(e,t){this.memQueue=bl(this.memQueue,e),this.lock.withLock(p.bind(function(){var i;try{var s=this.readFromStorage();s=bl(s,e),i=this.saveToStorage(s)}catch{this.reportError("Error updating items",e),i=!1}t&&t(i)},this),p.bind(function(i){this.reportError("Error acquiring storage lock",i),t&&t(!1)},this),this.pid)};Gn.prototype.readFromStorage=function(){var e;try{e=this.storage.getItem(this.storageKey),e&&(e=sr(e),p.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null))}catch(t){this.reportError("Error retrieving queue",t),e=null}return e||[]};Gn.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,ir(e)),!0}catch(t){return this.reportError("Error saving queue",t),!1}};Gn.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var Jh=10*60*1e3,ns=la("batch"),fn=function(e,t){this.errorReporter=t.errorReporter,this.queue=new Gn(e,{errorReporter:p.bind(this.reportError,this),storage:t.storage}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={}};fn.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)};fn.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};fn.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};fn.prototype.clear=function(){this.queue.clear()};fn.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};fn.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};fn.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(p.bind(this.flush,this),this.flushInterval))};fn.prototype.flush=function(e){try{if(this.requestInProgress){ns.log("Flush: Request already in progress");return}e=e||{};var t=this.libConfig.batch_request_timeout_ms,n=new Date().getTime(),i=this.batchSize,s=this.queue.fillBatch(i),r=[],o={};if(p.each(s,function(u){var d=u.payload;if(this.beforeSendHook&&!u.orphaned&&(d=this.beforeSendHook(d)),d){d.event&&d.properties&&(d.properties=p.extend({},d.properties,{mp_sent_by_lib_version:wn.LIB_VERSION}));var h=!0,f=u.id;f?(this.itemIdsSentSuccessfully[f]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:u,batchSize:s.length,timesSent:this.itemIdsSentSuccessfully[f]}),h=!1):this.reportError("[dupe] found item with no ID",{item:u}),h&&r.push(d)}o[u.id]=d},this),r.length<1){this.resetFlush();return}this.requestInProgress=!0;var l=p.bind(function(u){this.requestInProgress=!1;try{var d=!1;if(e.unloading)this.queue.updatePayloads(o);else if(p.isObject(u)&&u.error==="timeout"&&new Date().getTime()-n>=t)this.reportError("Network timeout; retrying"),this.flush();else if(p.isObject(u)&&u.xhr_req&&(u.xhr_req.status>=500||u.xhr_req.status===429||u.error==="timeout")){var h=this.flushInterval*2,f=u.xhr_req.responseHeaders;if(f){var m=f["Retry-After"];m&&(h=parseInt(m,10)*1e3||h)}h=Math.min(Jh,h),this.reportError("Error; retry in "+h+" ms"),this.scheduleFlush(h)}else if(p.isObject(u)&&u.xhr_req&&u.xhr_req.status===413)if(s.length>1){var y=Math.max(1,Math.floor(i/2));this.batchSize=Math.min(this.batchSize,y,s.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",s),this.resetBatchSize(),d=!0;else d=!0;d&&(this.queue.removeItemsByID(p.map(s,function(S){return S.id}),p.bind(function(S){S?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this)),p.each(s,p.bind(function(S){var A=S.id;A?(this.itemIdsSentSuccessfully[A]=this.itemIdsSentSuccessfully[A]||0,this.itemIdsSentSuccessfully[A]++,this.itemIdsSentSuccessfully[A]>5&&this.reportError("[dupe] item ID sent too many times",{item:S,batchSize:s.length,timesSent:this.itemIdsSentSuccessfully[A]})):this.reportError("[dupe] found item with no ID while removing",{item:S})},this)))}catch(S){this.reportError("Error handling API response",S),this.resetFlush()}},this),c={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(c.transport="sendBeacon"),ns.log("MIXPANEL REQUEST:",r),this.sendRequest(r,c,l)}catch(u){this.reportError("Error flushing request queue",u),this.resetFlush()}};fn.prototype.reportError=function(e,t){if(ns.error.apply(ns.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(n){ns.error(n)}};var Xh="__mp_opt_in_out_";function Zh(e,t){su(!0,e,t)}function ef(e,t){su(!1,e,t)}function tf(e,t){return iu(e,t)==="1"}function nu(e,t){if(sf(t))return Le.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var n=iu(e,t)==="0";return n&&Le.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),n}function di(e){return ha(e,function(t){return this.get_config(t)})}function Yn(e){return ha(e,function(t){return this._get_config(t)})}function Ui(e){return ha(e,function(t){return this._get_config(t)})}function nf(e,t){t=t||{},ua(t).remove(da(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function ua(e){return e=e||{},e.persistenceType==="localStorage"?p.localStorage:p.cookie}function da(e,t){return t=t||{},(t.persistencePrefix||Xh)+e}function iu(e,t){return ua(t).get(da(e,t))}function sf(e){if(e&&e.ignoreDnt)return!1;var t=e&&e.window||we,n=t.navigator||{},i=!1;return p.each([n.doNotTrack,n.msDoNotTrack,t.doNotTrack],function(s){p.includes([!0,1,"1","yes"],s)&&(i=!0)}),i}function su(e,t,n){if(!p.isString(t)||!t.length){Le.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token");return}n=n||{},ua(n).set(da(t,n),e?1:0,p.isNumber(n.cookieExpiration)?n.cookieExpiration:null,!!n.crossSubdomainCookie,!!n.secureCookie,!!n.crossSiteCookie,n.cookieDomain),n.track&&e&&n.track(n.trackEventName||"$opt_in",n.trackProperties,{send_immediately:!0})}function ha(e,t){return function(){var n=!1;try{var i=t.call(this,"token"),s=t.call(this,"ignore_dnt"),r=t.call(this,"opt_out_tracking_persistence_type"),o=t.call(this,"opt_out_tracking_cookie_prefix"),l=t.call(this,"window");i&&(n=nu(i,{ignoreDnt:s,persistenceType:r,persistencePrefix:o,window:l}))}catch(u){Le.error("Unexpected error when checking tracking opt-out status: "+u)}if(!n)return e.apply(this,arguments);var c=arguments[arguments.length-1];typeof c=="function"&&c(0)}}var jn="$set",qi="$set_once",jt="$unset",ci="$add",ln="$append",ui="$union",kn="$remove",rf="$delete",ru={set_action:function(e,t){var n={},i={};return p.isObject(e)?p.each(e,function(s,r){this._is_reserved_property(r)||(i[r]=s)},this):i[e]=t,n[jn]=i,n},unset_action:function(e){var t={},n=[];return p.isArray(e)||(e=[e]),p.each(e,function(i){this._is_reserved_property(i)||n.push(i)},this),t[jt]=n,t},set_once_action:function(e,t){var n={},i={};return p.isObject(e)?p.each(e,function(s,r){this._is_reserved_property(r)||(i[r]=s)},this):i[e]=t,n[qi]=i,n},union_action:function(e,t){var n={},i={};return p.isObject(e)?p.each(e,function(s,r){this._is_reserved_property(r)||(i[r]=p.isArray(s)?s:[s])},this):i[e]=p.isArray(t)?t:[t],n[ui]=i,n},append_action:function(e,t){var n={},i={};return p.isObject(e)?p.each(e,function(s,r){this._is_reserved_property(r)||(i[r]=s)},this):i[e]=t,n[ln]=i,n},remove_action:function(e,t){var n={},i={};return p.isObject(e)?p.each(e,function(s,r){this._is_reserved_property(r)||(i[r]=s)},this):i[e]=t,n[kn]=i,n},delete_action:function(){var e={};return e[rf]="",e}},Ve=function(){};p.extend(Ve.prototype,ru);Ve.prototype._init=function(e,t,n){this._mixpanel=e,this._group_key=t,this._group_id=n};Ve.prototype.set=Ui(function(e,t,n){var i=this.set_action(e,t);return p.isObject(e)&&(n=t),this._send_request(i,n)});Ve.prototype.set_once=Ui(function(e,t,n){var i=this.set_once_action(e,t);return p.isObject(e)&&(n=t),this._send_request(i,n)});Ve.prototype.unset=Ui(function(e,t){var n=this.unset_action(e);return this._send_request(n,t)});Ve.prototype.union=Ui(function(e,t,n){p.isObject(e)&&(n=t);var i=this.union_action(e,t);return this._send_request(i,n)});Ve.prototype.delete=Ui(function(e){var t=this.delete_action();return this._send_request(t,e)});Ve.prototype.remove=Ui(function(e,t,n){var i=this.remove_action(e,t);return this._send_request(i,n)});Ve.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var n=p.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:n,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},t)};Ve.prototype._is_reserved_property=function(e){return e==="$group_key"||e==="$group_id"};Ve.prototype._get_config=function(e){return this._mixpanel.get_config(e)};Ve.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};Ve.prototype.remove=Ve.prototype.remove;Ve.prototype.set=Ve.prototype.set;Ve.prototype.set_once=Ve.prototype.set_once;Ve.prototype.union=Ve.prototype.union;Ve.prototype.unset=Ve.prototype.unset;Ve.prototype.toString=Ve.prototype.toString;var ge=function(){};p.extend(ge.prototype,ru);ge.prototype._init=function(e){this._mixpanel=e};ge.prototype.set=Yn(function(e,t,n){var i=this.set_action(e,t);return p.isObject(e)&&(n=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),i[jn]=p.extend({},p.info.people_properties(),i[jn]),this._send_request(i,n)});ge.prototype.set_once=Yn(function(e,t,n){var i=this.set_once_action(e,t);return p.isObject(e)&&(n=t),this._send_request(i,n)});ge.prototype.unset=Yn(function(e,t){var n=this.unset_action(e);return this._send_request(n,t)});ge.prototype.increment=Yn(function(e,t,n){var i={},s={};return p.isObject(e)?(p.each(e,function(r,o){if(!this._is_reserved_property(o))if(isNaN(parseFloat(r))){Le.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else s[o]=r},this),n=t):(p.isUndefined(t)&&(t=1),s[e]=t),i[ci]=s,this._send_request(i,n)});ge.prototype.append=Yn(function(e,t,n){p.isObject(e)&&(n=t);var i=this.append_action(e,t);return this._send_request(i,n)});ge.prototype.remove=Yn(function(e,t,n){p.isObject(e)&&(n=t);var i=this.remove_action(e,t);return this._send_request(i,n)});ge.prototype.union=Yn(function(e,t,n){p.isObject(e)&&(n=t);var i=this.union_action(e,t);return this._send_request(i,n)});ge.prototype.track_charge=Yn(function(e,t,n){if(!p.isNumber(e)&&(e=parseFloat(e),isNaN(e))){Le.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",p.extend({$amount:e},t),n)});ge.prototype.clear_charges=function(e){return this.set("$transactions",[],e)};ge.prototype.delete_user=function(){if(!this._identify_called()){Le.error("mixpanel.people.delete_user() requires you to call identify() first");return}var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)};ge.prototype.toString=function(){return this._mixpanel.toString()+".people"};ge.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var n=this._mixpanel.get_property("$device_id"),i=this._mixpanel.get_property("$user_id"),s=this._mixpanel.get_property("$had_persisted_distinct_id");n&&(e.$device_id=n),i&&(e.$user_id=i),s&&(e.$had_persisted_distinct_id=s);var r=p.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:r,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),p.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),p.truncate(r,255))};ge.prototype._get_config=function(e){return this._mixpanel.get_config(e)};ge.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};ge.prototype._enqueue=function(e){jn in e?this._mixpanel.persistence._add_to_people_queue(jn,e):qi in e?this._mixpanel.persistence._add_to_people_queue(qi,e):jt in e?this._mixpanel.persistence._add_to_people_queue(jt,e):ci in e?this._mixpanel.persistence._add_to_people_queue(ci,e):ln in e?this._mixpanel.persistence._add_to_people_queue(ln,e):kn in e?this._mixpanel.persistence._add_to_people_queue(kn,e):ui in e?this._mixpanel.persistence._add_to_people_queue(ui,e):Le.error("Invalid call to _enqueue():",e)};ge.prototype._flush_one_queue=function(e,t,n,i){var s=this,r=p.extend({},this._mixpanel.persistence.load_queue(e)),o=r;!p.isUndefined(r)&&p.isObject(r)&&!p.isEmptyObject(r)&&(s._mixpanel.persistence._pop_from_people_queue(e,r),s._mixpanel.persistence.save(),i&&(o=i(r)),t.call(s,o,function(l,c){l===0&&s._mixpanel.persistence._add_to_people_queue(e,r),p.isUndefined(n)||n(l,c)}))};ge.prototype._flush=function(e,t,n,i,s,r,o){var l=this;this._flush_one_queue(jn,this.set,e),this._flush_one_queue(qi,this.set_once,i),this._flush_one_queue(jt,this.unset,r,function(A){return p.keys(A)}),this._flush_one_queue(ci,this.increment,t),this._flush_one_queue(ui,this.union,s);var c=this._mixpanel.persistence.load_queue(ln);if(!p.isUndefined(c)&&p.isArray(c)&&c.length)for(var u,d=function(A,N){A===0&&l._mixpanel.persistence._add_to_people_queue(ln,u),p.isUndefined(n)||n(A,N)},h=c.length-1;h>=0;h--)c=this._mixpanel.persistence.load_queue(ln),u=c.pop(),l._mixpanel.persistence.save(),p.isEmptyObject(u)||l.append(u,d);var f=this._mixpanel.persistence.load_queue(kn);if(!p.isUndefined(f)&&p.isArray(f)&&f.length)for(var m,y=function(A,N){A===0&&l._mixpanel.persistence._add_to_people_queue(kn,m),p.isUndefined(o)||o(A,N)},S=f.length-1;S>=0;S--)f=this._mixpanel.persistence.load_queue(kn),m=f.pop(),l._mixpanel.persistence.save(),p.isEmptyObject(m)||l.remove(m,y)};ge.prototype._is_reserved_property=function(e){return e==="$distinct_id"||e==="$token"||e==="$device_id"||e==="$user_id"||e==="$had_persisted_distinct_id"};ge.prototype.set=ge.prototype.set;ge.prototype.set_once=ge.prototype.set_once;ge.prototype.unset=ge.prototype.unset;ge.prototype.increment=ge.prototype.increment;ge.prototype.append=ge.prototype.append;ge.prototype.remove=ge.prototype.remove;ge.prototype.union=ge.prototype.union;ge.prototype.track_charge=ge.prototype.track_charge;ge.prototype.clear_charges=ge.prototype.clear_charges;ge.prototype.delete_user=ge.prototype.delete_user;ge.prototype.toString=ge.prototype.toString;var fa="__mps",pa="__mpso",ma="__mpus",ya="__mpa",ga="__mpap",_a="__mpr",va="__mpu",ou="$people_distinct_id",rr="__alias",hs="__timers",of=[fa,pa,ma,ya,ga,_a,va,ou,rr,hs],xe=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;t!=="cookie"&&t!=="localStorage"&&(Le.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),t==="localStorage"&&p.localStorage.is_supported()?this.storage=p.localStorage:this.storage=p.cookie,this.load(),this.update_config(e),this.upgrade(),this.save()};xe.prototype.properties=function(){var e={};return this.load(),p.each(this.props,function(t,n){p.include(of,n)||(e[n]=t)}),e};xe.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=p.extend({},e))}};xe.prototype.upgrade=function(){var e,t;this.storage===p.localStorage?(e=p.cookie.parse(this.name),p.cookie.remove(this.name),p.cookie.remove(this.name,!0),e&&this.register_once(e)):this.storage===p.cookie&&(t=p.localStorage.parse(this.name),p.localStorage.remove(this.name),t&&this.register_once(t))};xe.prototype.save=function(){this.disabled||this.storage.set(this.name,p.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};xe.prototype.load_prop=function(e){return this.load(),this.props[e]};xe.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};xe.prototype.clear=function(){this.remove(),this.props={}};xe.prototype.register_once=function(e,t,n){return p.isObject(e)?(typeof t>"u"&&(t="None"),this.expire_days=typeof n>"u"?this.default_expiry:n,this.load(),p.each(e,function(i,s){(!this.props.hasOwnProperty(s)||this.props[s]===t)&&(this.props[s]=i)},this),this.save(),!0):!1};xe.prototype.register=function(e,t){return p.isObject(e)?(this.expire_days=typeof t>"u"?this.default_expiry:t,this.load(),p.extend(this.props,e),this.save(),!0):!1};xe.prototype.unregister=function(e){this.load(),e in this.props&&(delete this.props[e],this.save())};xe.prototype.update_search_keyword=function(e){this.register(p.info.searchInfo(e))};xe.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:p.info.referringDomain(e)||"$direct"},"")};xe.prototype.get_referrer_info=function(){return p.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};xe.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)};xe.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()};xe.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())};xe.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())};xe.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())};xe.prototype.get_cross_subdomain=function(){return this.cross_subdomain};xe.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())};xe.prototype._add_to_people_queue=function(e,t){var n=this._get_queue_key(e),i=t[e],s=this._get_or_create_queue(jn),r=this._get_or_create_queue(qi),o=this._get_or_create_queue(jt),l=this._get_or_create_queue(ci),c=this._get_or_create_queue(ui),u=this._get_or_create_queue(kn,[]),d=this._get_or_create_queue(ln,[]);n===fa?(p.extend(s,i),this._pop_from_people_queue(ci,i),this._pop_from_people_queue(ui,i),this._pop_from_people_queue(jt,i)):n===pa?(p.each(i,function(h,f){f in r||(r[f]=h)}),this._pop_from_people_queue(jt,i)):n===ma?p.each(i,function(h){p.each([s,r,l,c],function(f){h in f&&delete f[h]}),p.each(d,function(f){h in f&&delete f[h]}),o[h]=!0}):n===ya?(p.each(i,function(h,f){f in s?s[f]+=h:(f in l||(l[f]=0),l[f]+=h)},this),this._pop_from_people_queue(jt,i)):n===va?(p.each(i,function(h,f){p.isArray(h)&&(f in c||(c[f]=[]),c[f]=c[f].concat(h))}),this._pop_from_people_queue(jt,i)):n===_a?(u.push(i),this._pop_from_people_queue(ln,i)):n===ga&&(d.push(i),this._pop_from_people_queue(jt,i)),Le.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),Le.log(t),this.save()};xe.prototype._pop_from_people_queue=function(e,t){var n=this.props[this._get_queue_key(e)];p.isUndefined(n)||p.each(t,function(i,s){e===ln||e===kn?p.each(n,function(r){r[s]===i&&delete r[s]}):delete n[s]},this)};xe.prototype.load_queue=function(e){return this.load_prop(this._get_queue_key(e))};xe.prototype._get_queue_key=function(e){if(e===jn)return fa;if(e===qi)return pa;if(e===jt)return ma;if(e===ci)return ya;if(e===ln)return ga;if(e===kn)return _a;if(e===ui)return va;Le.error("Invalid queue:",e)};xe.prototype._get_or_create_queue=function(e,t){var n=this._get_queue_key(e);return t=p.isUndefined(t)?{}:t,this.props[n]||(this.props[n]=t)};xe.prototype.set_event_timer=function(e,t){var n=this.load_prop(hs)||{};n[e]=t,this.props[hs]=n,this.save()};xe.prototype.remove_event_timer=function(e){var t=this.load_prop(hs)||{},n=t[e];return p.isUndefined(n)||(delete this.props[hs][e],this.save()),n};var ba,wt,au=0,af=1,lf=function(e){return e},fs=function(){},Dt="mixpanel",lu="base64",cf="json",wa="$device:",Ci=we.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,cu=!Ci&&nn.indexOf("MSIE")===-1&&nn.indexOf("Mozilla")===-1,or=null;Bn.sendBeacon&&(or=function(){return Bn.sendBeacon.apply(Bn,arguments)});var uu={track:"track/",engage:"engage/",groups:"groups/",record:"record/"},wl={api_host:"https://api-js.mixpanel.com",api_routes:uu,api_method:"POST",api_transport:"XHR",api_payload_format:lu,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:fs,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:fs,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video",record_idle_timeout_ms:30*60*1e3,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:Qh,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},du=!1,D=function(){},_o=function(e,t,n){var i,s=n===Dt?wt:wt[n];if(s&&ba===au)i=s;else{if(s&&!p.isArray(s)){Le.error("You have already initialized "+n);return}i=new D}if(i._cached_groups={},i._init(e,t,n),i.people=new ge,i.people._init(i),!i.get_config("skip_first_touch_marketing")){var r=p.info.campaignParams(null),o={},l=!1;p.each(r,function(c,u){o["initial_"+u]=c,c&&(l=!0)}),l&&i.people.set_once(o)}return wn.DEBUG=wn.DEBUG||i.get_config("debug"),!p.isUndefined(s)&&p.isArray(s)&&(i._execute_array.call(i.people,s.people),i._execute_array(s)),i};D.prototype.init=function(e,t,n){if(p.isUndefined(n)){this.report_error("You must name your new library: init(token, config, name)");return}if(n===Dt){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var i=_o(e,t,n);return wt[n]=i,i._loaded(),i};D.prototype._init=function(e,t,n){t=t||{},this.__loaded=!0,this.config={};var i={};if(!("api_payload_format"in t)){var s=t.api_host||wl.api_host;s.match(/\.mixpanel\.com/)&&(i.api_payload_format=cf)}if(this.set_config(p.extend({},wl,i,t,{name:n,token:e,callback_fn:(n===Dt?n:Dt+"."+n)+"._jsc"})),this._jsc=fs,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!p.localStorage.is_supported(!0)||!Ci)this._batch_requests=!1,Le.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),p.each(this.get_batcher_configs(),function(c){Le.log("Clearing batch queue "+c.queue_key),p.localStorage.remove(c.queue_key)});else if(this.init_batchers(),or&&we.addEventListener){var r=p.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);we.addEventListener("pagehide",function(c){c.persisted&&r()}),we.addEventListener("visibilitychange",function(){Fe.visibilityState==="hidden"&&r()})}}this.persistence=this.cookie=new xe(this.config),this.unpersisted_superprops={},this._gdpr_init();var o=p.UUID();this.get_distinct_id()||this.register_once({distinct_id:wa+o,$device_id:o},"");var l=this.get_config("track_pageview");l&&this._init_url_change_tracking(l),this.get_config("record_sessions_percent")>0&&Math.random()*100<=this.get_config("record_sessions_percent")&&this.start_session_recording()};D.prototype.start_session_recording=di(function(){if(!we.MutationObserver){Le.critical("Browser does not support MutationObserver; skipping session recording");return}var e=p.bind(function(){this._recorder=this._recorder||new we.__mp_recorder(this),this._recorder.startRecording()},this);if(p.isUndefined(we.__mp_recorder)){var t=Fe.createElement("script");t.type="text/javascript",t.async=!0,t.onload=e,t.src=this.get_config("recorder_src"),Fe.head.appendChild(t)}else e()});D.prototype.stop_session_recording=function(){this._recorder?this._recorder.stopRecording():Le.critical("Session recorder module not loaded")};D.prototype.get_session_recording_properties=function(){var e={};if(this._recorder){var t=this._recorder.replayId;t&&(e.$mp_replay_id=t)}return e};D.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var e=p.info.campaignParams(null);p.each(e,(function(t,n){this.unregister(n)}).bind(this))}};D.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(Fe.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(p.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(Fe.referrer)};D.prototype._dom_loaded=function(){p.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),this.has_opted_out_tracking()||p.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue};D.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!du)return this.__dom_loaded_queue.push([e,t]),!1;var n=new e().init(this);return n.track.apply(n,t)};D.prototype._init_url_change_tracking=function(e){var t="",n=this.track_pageview();if(n&&(t=p.info.currentUrl()),p.include(["full-url","url-with-path-and-query-string","url-with-path"],e)){we.addEventListener("popstate",function(){we.dispatchEvent(new Event("mp_locationchange"))}),we.addEventListener("hashchange",function(){we.dispatchEvent(new Event("mp_locationchange"))});var i=we.history.pushState;typeof i=="function"&&(we.history.pushState=function(r,o,l){i.call(we.history,r,o,l),we.dispatchEvent(new Event("mp_locationchange"))});var s=we.history.replaceState;typeof s=="function"&&(we.history.replaceState=function(r,o,l){s.call(we.history,r,o,l),we.dispatchEvent(new Event("mp_locationchange"))}),we.addEventListener("mp_locationchange",(function(){var r=p.info.currentUrl(),o=!1;if(e==="full-url"?o=r!==t:e==="url-with-path-and-query-string"?o=r.split("#")[0]!==t.split("#")[0]:e==="url-with-path"&&(o=r.split("#")[0].split("?")[0]!==t.split("#")[0].split("?")[0]),o){var l=this.track_pageview();l&&(t=r)}}).bind(this))}};D.prototype._prepare_callback=function(e,t){if(p.isUndefined(e))return null;if(Ci){var n=function(o){e(o,t)};return n}else{var i=this._jsc,s=""+Math.floor(Math.random()*1e8),r=this.get_config("callback_fn")+"["+s+"]";return i[s]=function(o){delete i[s],e(o,t)},r}};D.prototype._send_request=function(e,t,n,i){var s=!0;if(cu)return this.__request_queue.push(arguments),s;var r={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},o=null;!i&&(p.isFunction(n)||typeof n=="string")&&(i=n,n=null),n=p.extend(r,n||{}),Ci||(n.method="GET");var l=n.method==="POST",c=or&&l&&n.transport.toLowerCase()==="sendbeacon",u=n.verbose;t.verbose&&(u=!0),this.get_config("test")&&(t.test=1),u&&(t.verbose=1),this.get_config("img")&&(t.img=1),Ci||(i?t.callback=i:(u||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=new Date().getTime().toString(),l&&(o="data="+encodeURIComponent(t.data),delete t.data),e+="?"+p.HTTPBuildQuery(t);var d=this;if("img"in t){var h=Fe.createElement("img");h.src=e,Fe.body.appendChild(h)}else if(c){try{s=or(e,o)}catch(N){d.report_error(N),s=!1}try{i&&i(s?1:0)}catch(N){d.report_error(N)}}else if(Ci)try{var f=new XMLHttpRequest;f.open(n.method,e,!0);var m=this.get_config("xhr_headers");if(l&&(m["Content-Type"]="application/x-www-form-urlencoded"),p.each(m,function(N,F){f.setRequestHeader(F,N)}),n.timeout_ms&&typeof f.timeout<"u"){f.timeout=n.timeout_ms;var y=new Date().getTime()}f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){if(i)if(u){var N;try{N=p.JSONDecode(f.responseText)}catch(J){if(d.report_error(J),n.ignore_json_errors)N=f.responseText;else return}i(N)}else i(Number(f.responseText))}else{var F;f.timeout&&!f.status&&new Date().getTime()-y>=f.timeout?F="timeout":F="Bad HTTP status: "+f.status+" "+f.statusText,d.report_error(F),i&&i(u?{status:0,error:F,xhr_req:f}:0)}},f.send(o)}catch(N){d.report_error(N),s=!1}else{var S=Fe.createElement("script");S.type="text/javascript",S.async=!0,S.defer=!0,S.src=e;var A=Fe.getElementsByTagName("script")[0];A.parentNode.insertBefore(S,A)}return s};D.prototype._execute_array=function(e){var t,n=[],i=[],s=[];p.each(e,function(o){o&&(t=o[0],p.isArray(t)?s.push(o):typeof o=="function"?o.call(this):p.isArray(o)&&t==="alias"?n.push(o):p.isArray(o)&&t.indexOf("track")!==-1&&typeof this[t]=="function"?s.push(o):i.push(o))},this);var r=function(o,l){p.each(o,function(c){if(p.isArray(c[0])){var u=l;p.each(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};r(n,this),r(i,this),r(s,this)};D.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};D.prototype.get_batcher_configs=function(){var e="__mpq_"+this.get_config("token"),t=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+t.track,queue_key:e+"_ev"},people:{type:"people",endpoint:"/"+t.engage,queue_key:e+"_pp"},groups:{type:"groups",endpoint:"/"+t.groups,queue_key:e+"_gr"}},this._batcher_configs};D.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var e=p.bind(function(n){return new fn(n.queue_key,{libConfig:this.config,sendRequestFunc:p.bind(function(i,s,r){this._send_request(this.get_config("api_host")+n.endpoint,this._encode_data_for_request(i),s,this._prepare_callback(r,i))},this),beforeSendHook:p.bind(function(i){return this._run_hook("before_send_"+n.type,i)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:p.bind(this.stop_batch_senders,this)})},this),t=this.get_batcher_configs();this.request_batchers={events:e(t.events),people:e(t.people),groups:e(t.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()};D.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,p.each(this.request_batchers,function(e){e.start()}))};D.prototype.stop_batch_senders=function(){this._batch_requests=!1,p.each(this.request_batchers,function(e){e.stop(),e.clear()})};D.prototype.push=function(e){this._execute_array([e])};D.prototype.disable=function(e){typeof e>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)};D.prototype._encode_data_for_request=function(e){var t=p.JSONEncode(e);return this.get_config("api_payload_format")===lu&&(t=p.base64Encode(t)),{data:t}};D.prototype._track_or_batch=function(e,t){var n=p.truncate(e.data,255),i=e.endpoint,s=e.batcher,r=e.should_send_immediately,o=e.send_request_options||{};t=t||fs;var l=!0,c=p.bind(function(){return o.skip_hooks||(n=this._run_hook("before_send_"+e.type,n)),n?(Le.log("MIXPANEL REQUEST:"),Le.log(n),this._send_request(i,this._encode_data_for_request(n),o,this._prepare_callback(t,n))):null},this);return this._batch_requests&&!r?s.enqueue(n,function(u){u?t(1,n):c()}):l=c(),l&&n};D.prototype.track=di(function(e,t,n,i){!i&&typeof n=="function"&&(i=n,n=null),n=n||{};var s=n.transport;s&&(n.transport=s);var r=n.send_immediately;if(typeof i!="function"&&(i=fs),p.isUndefined(e)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(e)){i(0);return}t=p.extend({},t),t.token=this.get_config("token");var o=this.persistence.remove_event_timer(e);if(!p.isUndefined(o)){var l=new Date().getTime()-o;t.$duration=parseFloat((l/1e3).toFixed(3))}this._set_default_superprops();var c=this.get_config("track_marketing")?p.info.marketingParams():{};t=p.extend({},p.info.properties({mp_loader:this.get_config("mp_loader")}),c,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),t);var u=this.get_config("property_blacklist");p.isArray(u)?p.each(u,function(f){delete t[f]}):this.report_error("Invalid value for property_blacklist config: "+u);var d={event:e,properties:t},h=this._track_or_batch({type:"events",data:d,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:r,send_request_options:n},i);return h});D.prototype.set_group=di(function(e,t,n){p.isArray(t)||(t=[t]);var i={};return i[e]=t,this.register(i),this.people.set(e,t,n)});D.prototype.add_group=di(function(e,t,n){var i=this.get_property(e),s={};return i===void 0?(s[e]=[t],this.register(s)):i.indexOf(t)===-1&&(i.push(t),s[e]=i,this.register(s)),this.people.union(e,t,n)});D.prototype.remove_group=di(function(e,t,n){var i=this.get_property(e);if(i!==void 0){var s=i.indexOf(t);s>-1&&(i.splice(s,1),this.register({group_key:i})),i.length===0&&this.unregister(e)}return this.people.remove(e,t,n)});D.prototype.track_with_groups=di(function(e,t,n,i){var s=p.extend({},t||{});return p.each(n,function(r,o){r!=null&&(s[o]=r)}),this.track(e,s,i)});D.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)};D.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]};D.prototype.get_group=function(e,t){var n=this._create_map_key(e,t),i=this._cached_groups[n];return(i===void 0||i._group_key!==e||i._group_id!==t)&&(i=new Ve,i._init(this,e,t),this._cached_groups[n]=i),i};D.prototype.track_pageview=di(function(e,t){typeof e!="object"&&(e={}),t=t||{};var n=t.event_name||"$mp_web_page_view",i=p.extend(p.info.mpPageViewProperties(),p.info.campaignParams(),p.info.clickParams()),s=p.extend({},i,e);return this.track(n,s)});D.prototype.track_links=function(){return this._track_dom.call(this,$i,arguments)};D.prototype.track_forms=function(){return this._track_dom.call(this,_r,arguments)};D.prototype.time_event=function(e){if(p.isUndefined(e)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(e)||this.persistence.set_event_timer(e,new Date().getTime())};var uf={persistent:!0},ka=function(e){var t;return p.isObject(e)?t=e:p.isUndefined(e)?t={}:t={days:e},p.extend({},uf,t)};D.prototype.register=function(e,t){var n=ka(t);n.persistent?this.persistence.register(e,n.days):p.extend(this.unpersisted_superprops,e)};D.prototype.register_once=function(e,t,n){var i=ka(n);i.persistent?this.persistence.register_once(e,t,i.days):(typeof t>"u"&&(t="None"),p.each(e,function(s,r){(!this.unpersisted_superprops.hasOwnProperty(r)||this.unpersisted_superprops[r]===t)&&(this.unpersisted_superprops[r]=s)},this))};D.prototype.unregister=function(e,t){t=ka(t),t.persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]};D.prototype._register_single=function(e,t){var n={};n[e]=t,this.register(n)};D.prototype.identify=function(e,t,n,i,s,r,o,l){var c=this.get_distinct_id();if(e&&c!==e){if(typeof e=="string"&&e.indexOf(wa)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:e})}if(!this.get_property("$device_id")){var u=c;this.register_once({$had_persisted_distinct_id:!0,$device_id:u},"")}e!==c&&e!==this.get_property(rr)&&(this.unregister(rr),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,n,i,s,r,o,l),e!==c&&this.track("$identify",{distinct_id:e,$anon_distinct_id:c},{skip_hooks:!0})};D.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=p.UUID();this.register_once({distinct_id:wa+e,$device_id:e},"")};D.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};D.prototype.alias=function(e,t){if(e===this.get_property(ou))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var n=this;return p.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(rr,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},function(){n.identify(e)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)};D.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)};D.prototype.set_config=function(e){if(p.isObject(e)){p.extend(this.config,e);var t=e.batch_size;t&&p.each(this.request_batchers,function(n){n.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),wn.DEBUG=wn.DEBUG||this.get_config("debug")}};D.prototype.get_config=function(e){return this.config[e]};D.prototype._run_hook=function(e){var t=(this.config.hooks[e]||lf).apply(this,Mn.call(arguments,1));return typeof t>"u"&&(this.report_error(e+" hook did not return a value"),t=null),t};D.prototype.get_property=function(e){return this.persistence.load_prop([e])};D.prototype.toString=function(){var e=this.get_config("name");return e!==Dt&&(e=Dt+"."+e),e};D.prototype._event_is_disabled=function(e){return p.isBlockedUA(nn)||this._flags.disable_all_events||p.include(this.__disabled_events,e)};D.prototype._gdpr_init=function(){var e=this.get_config("opt_out_tracking_persistence_type")==="localStorage";e&&p.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||p.cookie.get("mp_optout"))&&(p.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};D.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else if(e&&e.enable_persistence)t=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==t&&this.persistence.set_disabled(t),t?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()};D.prototype._gdpr_call_func=function(e,t){return t=p.extend({track:p.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),p.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})};D.prototype.opt_in_tracking=function(e){e=p.extend({enable_persistence:!0},e),this._gdpr_call_func(Zh,e),this._gdpr_update_persistence(e)};D.prototype.opt_out_tracking=function(e){e=p.extend({clear_persistence:!0,delete_user:!0},e),e.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(ef,e),this._gdpr_update_persistence(e)};D.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(tf,e)};D.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(nu,e)};D.prototype.clear_opt_in_out_tracking=function(e){e=p.extend({enable_persistence:!0},e),this._gdpr_call_func(nf,e),this._gdpr_update_persistence(e)};D.prototype.report_error=function(e,t){Le.error.apply(Le.error,arguments);try{!t&&!(e instanceof Error)&&(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(n){Le.error(n)}};D.prototype.init=D.prototype.init;D.prototype.reset=D.prototype.reset;D.prototype.disable=D.prototype.disable;D.prototype.time_event=D.prototype.time_event;D.prototype.track=D.prototype.track;D.prototype.track_links=D.prototype.track_links;D.prototype.track_forms=D.prototype.track_forms;D.prototype.track_pageview=D.prototype.track_pageview;D.prototype.register=D.prototype.register;D.prototype.register_once=D.prototype.register_once;D.prototype.unregister=D.prototype.unregister;D.prototype.identify=D.prototype.identify;D.prototype.alias=D.prototype.alias;D.prototype.name_tag=D.prototype.name_tag;D.prototype.set_config=D.prototype.set_config;D.prototype.get_config=D.prototype.get_config;D.prototype.get_property=D.prototype.get_property;D.prototype.get_distinct_id=D.prototype.get_distinct_id;D.prototype.toString=D.prototype.toString;D.prototype.opt_out_tracking=D.prototype.opt_out_tracking;D.prototype.opt_in_tracking=D.prototype.opt_in_tracking;D.prototype.has_opted_out_tracking=D.prototype.has_opted_out_tracking;D.prototype.has_opted_in_tracking=D.prototype.has_opted_in_tracking;D.prototype.clear_opt_in_out_tracking=D.prototype.clear_opt_in_out_tracking;D.prototype.get_group=D.prototype.get_group;D.prototype.set_group=D.prototype.set_group;D.prototype.add_group=D.prototype.add_group;D.prototype.remove_group=D.prototype.remove_group;D.prototype.track_with_groups=D.prototype.track_with_groups;D.prototype.start_batch_senders=D.prototype.start_batch_senders;D.prototype.stop_batch_senders=D.prototype.stop_batch_senders;D.prototype.start_session_recording=D.prototype.start_session_recording;D.prototype.stop_session_recording=D.prototype.stop_session_recording;D.prototype.get_session_recording_properties=D.prototype.get_session_recording_properties;D.prototype.DEFAULT_API_ROUTES=uu;xe.prototype.properties=xe.prototype.properties;xe.prototype.update_search_keyword=xe.prototype.update_search_keyword;xe.prototype.update_referrer_info=xe.prototype.update_referrer_info;xe.prototype.get_cross_subdomain=xe.prototype.get_cross_subdomain;xe.prototype.clear=xe.prototype.clear;var ki={},df=function(){p.each(ki,function(e,t){t!==Dt&&(wt[t]=e)}),wt._=p},hf=function(){wt.init=function(e,t,n){if(n)return wt[n]||(wt[n]=ki[n]=_o(e,t,n),wt[n]._loaded()),wt[n];var i=wt;ki[Dt]?i=ki[Dt]:e&&(i=_o(e,t,Dt),i._loaded(),ki[Dt]=i),wt=i,ba===af&&(we[Dt]=wt),df()}},ff=function(){function e(){e.done||(e.done=!0,du=!0,cu=!1,p.each(ki,function(i){i._dom_loaded()}))}function t(){try{Fe.documentElement.doScroll("left")}catch{setTimeout(t,1);return}e()}if(Fe.addEventListener)Fe.readyState==="complete"?e():Fe.addEventListener("DOMContentLoaded",e,!1);else if(Fe.attachEvent){Fe.attachEvent("onreadystatechange",e);var n=!1;try{n=we.frameElement===null}catch{}Fe.documentElement.doScroll&&n&&t()}p.register_event(we,"load",e,!0)};function pf(){return ba=au,wt=new D,hf(),wt.init(),ff(),wt}var mf=pf(),yf=mf;const Mi=Zc(yf);/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xa(e,t){const n=new Set(e.split(","));return i=>n.has(i)}const je={},Si=[],Lt=()=>{},gf=()=>!1,vr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ca=e=>e.startsWith("onUpdate:"),vt=Object.assign,Sa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_f=Object.prototype.hasOwnProperty,Ie=(e,t)=>_f.call(e,t),pe=Array.isArray,Ei=e=>br(e)==="[object Map]",hu=e=>br(e)==="[object Set]",ve=e=>typeof e=="function",it=e=>typeof e=="string",Bi=e=>typeof e=="symbol",Ge=e=>e!==null&&typeof e=="object",fu=e=>(Ge(e)||ve(e))&&ve(e.then)&&ve(e.catch),pu=Object.prototype.toString,br=e=>pu.call(e),vf=e=>br(e).slice(8,-1),mu=e=>br(e)==="[object Object]",Ea=e=>it(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,is=xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},bf=/-(\w)/g,dn=wr(e=>e.replace(bf,(t,n)=>n?n.toUpperCase():"")),wf=/\B([A-Z])/g,hi=wr(e=>e.replace(wf,"-$1").toLowerCase()),kr=wr(e=>e.charAt(0).toUpperCase()+e.slice(1)),zr=wr(e=>e?`on${kr(e)}`:""),Vn=(e,t)=>!Object.is(e,t),Qs=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ar=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},vo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let kl;const yu=()=>kl||(kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jt(e){if(pe(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=it(i)?Sf(i):Jt(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(it(e)||Ge(e))return e}const kf=/;(?![^(]*\))/g,xf=/:([^]+)/,Cf=/\/\*[^]*?\*\//g;function Sf(e){const t={};return e.replace(Cf,"").split(kf).forEach(n=>{if(n){const i=n.split(xf);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Z(e){let t="";if(it(e))t=e;else if(pe(e))for(let n=0;n<e.length;n++){const i=Z(e[n]);i&&(t+=i+" ")}else if(Ge(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ef="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Af=xa(Ef);function gu(e){return!!e||e===""}const U=e=>it(e)?e:e==null?"":pe(e)||Ge(e)&&(e.toString===pu||!ve(e.toString))?JSON.stringify(e,_u,2):String(e),_u=(e,t)=>t&&t.__v_isRef?_u(e,t.value):Ei(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s],r)=>(n[Kr(i,r)+" =>"]=s,n),{})}:hu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Kr(n))}:Bi(t)?Kr(t):Ge(t)&&!pe(t)&&!mu(t)?String(t):t,Kr=(e,t="")=>{var n;return Bi(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ot;class vu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ot,!t&&Ot&&(this.index=(Ot.scopes||(Ot.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ot;try{return Ot=this,t()}finally{Ot=n}}}on(){Ot=this}off(){Ot=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function bu(e){return new vu(e)}function Tf(e,t=Ot){t&&t.active&&t.effects.push(e)}function wu(){return Ot}function $f(e){Ot&&Ot.cleanups.push(e)}let ri;class Aa{constructor(t,n,i,s){this.fn=t,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Tf(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,fi();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(qf(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),pi()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Fn,n=ri;try{return Fn=!0,ri=this,this._runnings++,xl(this),this.fn()}finally{Cl(this),this._runnings--,ri=n,Fn=t}}stop(){var t;this.active&&(xl(this),Cl(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function qf(e){return e.value}function xl(e){e._trackId++,e._depsLength=0}function Cl(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)ku(e.deps[t],e);e.deps.length=e._depsLength}}function ku(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Fn=!0,bo=0;const xu=[];function fi(){xu.push(Fn),Fn=!1}function pi(){const e=xu.pop();Fn=e===void 0?!0:e}function Ta(){bo++}function $a(){for(bo--;!bo&&wo.length;)wo.shift()()}function Cu(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const i=e.deps[e._depsLength];i!==t?(i&&ku(i,e),e.deps[e._depsLength++]=t):e._depsLength++}}const wo=[];function Su(e,t,n){Ta();for(const i of e.keys()){let s;i._dirtyLevel<t&&(s??(s=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(s??(s=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&wo.push(i.scheduler)))}$a()}const Eu=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},lr=new WeakMap,oi=Symbol(""),ko=Symbol("");function $t(e,t,n){if(Fn&&ri){let i=lr.get(e);i||lr.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=Eu(()=>i.delete(n))),Cu(ri,s)}}function xn(e,t,n,i,s,r){const o=lr.get(e);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(n==="length"&&pe(e)){const c=Number(i);o.forEach((u,d)=>{(d==="length"||!Bi(d)&&d>=c)&&l.push(u)})}else switch(n!==void 0&&l.push(o.get(n)),t){case"add":pe(e)?Ea(n)&&l.push(o.get("length")):(l.push(o.get(oi)),Ei(e)&&l.push(o.get(ko)));break;case"delete":pe(e)||(l.push(o.get(oi)),Ei(e)&&l.push(o.get(ko)));break;case"set":Ei(e)&&l.push(o.get(oi));break}Ta();for(const c of l)c&&Su(c,4);$a()}function Of(e,t){var n;return(n=lr.get(e))==null?void 0:n.get(t)}const If=xa("__proto__,__v_isRef,__isVue"),Au=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Bi)),Sl=Pf();function Pf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Pe(this);for(let r=0,o=this.length;r<o;r++)$t(i,"get",r+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(Pe)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){fi(),Ta();const i=Pe(this)[t].apply(this,n);return $a(),pi(),i}}),e}function Rf(e){const t=Pe(this);return $t(t,"has",e),t.hasOwnProperty(e)}class Tu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?Gf:Iu:r?Ou:qu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=pe(t);if(!s){if(o&&Ie(Sl,n))return Reflect.get(Sl,n,i);if(n==="hasOwnProperty")return Rf}const l=Reflect.get(t,n,i);return(Bi(n)?Au.has(n):If(n))||(s||$t(t,"get",n),r)?l:ct(l)?o&&Ea(n)?l:l.value:Ge(l)?s?Ru(l):xs(l):l}}class $u extends Tu{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(!this._isShallow){const c=Oi(r);if(!cr(i)&&!Oi(i)&&(r=Pe(r),i=Pe(i)),!pe(t)&&ct(r)&&!ct(i))return c?!1:(r.value=i,!0)}const o=pe(t)&&Ea(n)?Number(n)<t.length:Ie(t,n),l=Reflect.set(t,n,i,s);return t===Pe(s)&&(o?Vn(i,r)&&xn(t,"set",n,i):xn(t,"add",n,i)),l}deleteProperty(t,n){const i=Ie(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&xn(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!Bi(n)||!Au.has(n))&&$t(t,"has",n),i}ownKeys(t){return $t(t,"iterate",pe(t)?"length":oi),Reflect.ownKeys(t)}}class Nf extends Tu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Df=new $u,Lf=new Nf,Uf=new $u(!0),qa=e=>e,xr=e=>Reflect.getPrototypeOf(e);function qs(e,t,n=!1,i=!1){e=e.__v_raw;const s=Pe(e),r=Pe(t);n||(Vn(t,r)&&$t(s,"get",t),$t(s,"get",r));const{has:o}=xr(s),l=i?qa:n?Pa:ps;if(o.call(s,t))return l(e.get(t));if(o.call(s,r))return l(e.get(r));e!==s&&e.get(t)}function Os(e,t=!1){const n=this.__v_raw,i=Pe(n),s=Pe(e);return t||(Vn(e,s)&&$t(i,"has",e),$t(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Is(e,t=!1){return e=e.__v_raw,!t&&$t(Pe(e),"iterate",oi),Reflect.get(e,"size",e)}function El(e){e=Pe(e);const t=Pe(this);return xr(t).has.call(t,e)||(t.add(e),xn(t,"add",e,e)),this}function Al(e,t){t=Pe(t);const n=Pe(this),{has:i,get:s}=xr(n);let r=i.call(n,e);r||(e=Pe(e),r=i.call(n,e));const o=s.call(n,e);return n.set(e,t),r?Vn(t,o)&&xn(n,"set",e,t):xn(n,"add",e,t),this}function Tl(e){const t=Pe(this),{has:n,get:i}=xr(t);let s=n.call(t,e);s||(e=Pe(e),s=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return s&&xn(t,"delete",e,void 0),r}function $l(){const e=Pe(this),t=e.size!==0,n=e.clear();return t&&xn(e,"clear",void 0,void 0),n}function Ps(e,t){return function(i,s){const r=this,o=r.__v_raw,l=Pe(o),c=t?qa:e?Pa:ps;return!e&&$t(l,"iterate",oi),o.forEach((u,d)=>i.call(s,c(u),c(d),r))}}function Rs(e,t,n){return function(...i){const s=this.__v_raw,r=Pe(s),o=Ei(r),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,u=s[e](...i),d=n?qa:t?Pa:ps;return!t&&$t(r,"iterate",c?ko:oi),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:l?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function On(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Mf(){const e={get(r){return qs(this,r)},get size(){return Is(this)},has:Os,add:El,set:Al,delete:Tl,clear:$l,forEach:Ps(!1,!1)},t={get(r){return qs(this,r,!1,!0)},get size(){return Is(this)},has:Os,add:El,set:Al,delete:Tl,clear:$l,forEach:Ps(!1,!0)},n={get(r){return qs(this,r,!0)},get size(){return Is(this,!0)},has(r){return Os.call(this,r,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Ps(!0,!1)},i={get(r){return qs(this,r,!0,!0)},get size(){return Is(this,!0)},has(r){return Os.call(this,r,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Ps(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Rs(r,!1,!1),n[r]=Rs(r,!0,!1),t[r]=Rs(r,!1,!0),i[r]=Rs(r,!0,!0)}),[e,n,t,i]}const[Bf,Ff,Qf,Hf]=Mf();function Oa(e,t){const n=t?e?Hf:Qf:e?Ff:Bf;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(Ie(n,s)&&s in i?n:i,s,r)}const jf={get:Oa(!1,!1)},Vf={get:Oa(!1,!0)},Wf={get:Oa(!0,!1)},qu=new WeakMap,Ou=new WeakMap,Iu=new WeakMap,Gf=new WeakMap;function Yf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zf(e){return e.__v_skip||!Object.isExtensible(e)?0:Yf(vf(e))}function xs(e){return Oi(e)?e:Ia(e,!1,Df,jf,qu)}function Pu(e){return Ia(e,!1,Uf,Vf,Ou)}function Ru(e){return Ia(e,!0,Lf,Wf,Iu)}function Ia(e,t,n,i,s){if(!Ge(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=zf(e);if(o===0)return e;const l=new Proxy(e,o===2?i:n);return s.set(e,l),l}function Qn(e){return Oi(e)?Qn(e.__v_raw):!!(e&&e.__v_isReactive)}function Oi(e){return!!(e&&e.__v_isReadonly)}function cr(e){return!!(e&&e.__v_isShallow)}function Nu(e){return Qn(e)||Oi(e)}function Pe(e){const t=e&&e.__v_raw;return t?Pe(t):e}function Cr(e){return Object.isExtensible(e)&&ar(e,"__v_skip",!0),e}const ps=e=>Ge(e)?xs(e):e,Pa=e=>Ge(e)?Ru(e):e;class Du{constructor(t,n,i,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Aa(()=>t(this._value),()=>Hs(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=Pe(this);return(!t._cacheable||t.effect.dirty)&&Vn(t._value,t._value=t.effect.run())&&Hs(t,4),Lu(t),t.effect._dirtyLevel>=2&&Hs(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Kf(e,t,n=!1){let i,s;const r=ve(e);return r?(i=e,s=Lt):(i=e.get,s=e.set),new Du(i,s,r||!s,n)}function Lu(e){var t;Fn&&ri&&(e=Pe(e),Cu(ri,(t=e.dep)!=null?t:e.dep=Eu(()=>e.dep=void 0,e instanceof Du?e:void 0)))}function Hs(e,t=4,n){e=Pe(e);const i=e.dep;i&&Su(i,t)}function ct(e){return!!(e&&e.__v_isRef===!0)}function j(e){return Uu(e,!1)}function xo(e){return Uu(e,!0)}function Uu(e,t){return ct(e)?e:new Jf(e,t)}class Jf{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Pe(t),this._value=n?t:ps(t)}get value(){return Lu(this),this._value}set value(t){const n=this.__v_isShallow||cr(t)||Oi(t);t=n?t:Pe(t),Vn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ps(t),Hs(this,4))}}function H(e){return ct(e)?e.value:e}const Xf={get:(e,t,n)=>H(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return ct(s)&&!ct(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function Mu(e){return Qn(e)?e:new Proxy(e,Xf)}function Zf(e){const t=pe(e)?new Array(e.length):{};for(const n in e)t[n]=tp(e,n);return t}class ep{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Of(Pe(this._object),this._key)}}function tp(e,t,n){const i=e[t];return ct(i)?i:new ep(e,t,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hn(e,t,n,i){try{return i?e(...i):e()}catch(s){Sr(s,t,n)}}function Gt(e,t,n,i){if(ve(e)){const r=Hn(e,t,n,i);return r&&fu(r)&&r.catch(o=>{Sr(o,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(Gt(e[r],t,n,i));return s}function Sr(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const u=r.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,o,l)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){Hn(c,null,10,[e,o,l]);return}}np(e,n,s,i)}function np(e,t,n,i=!0){console.error(e)}let ms=!1,Co=!1;const kt=[];let rn=0;const Ai=[];let Nn=null,ni=0;const Bu=Promise.resolve();let Ra=null;function Na(e){const t=Ra||Bu;return e?t.then(this?e.bind(this):e):t}function ip(e){let t=rn+1,n=kt.length;for(;t<n;){const i=t+n>>>1,s=kt[i],r=ys(s);r<e||r===e&&s.pre?t=i+1:n=i}return t}function Da(e){(!kt.length||!kt.includes(e,ms&&e.allowRecurse?rn+1:rn))&&(e.id==null?kt.push(e):kt.splice(ip(e.id),0,e),Fu())}function Fu(){!ms&&!Co&&(Co=!0,Ra=Bu.then(Hu))}function sp(e){const t=kt.indexOf(e);t>rn&&kt.splice(t,1)}function rp(e){pe(e)?Ai.push(...e):(!Nn||!Nn.includes(e,e.allowRecurse?ni+1:ni))&&Ai.push(e),Fu()}function ql(e,t,n=ms?rn+1:0){for(;n<kt.length;n++){const i=kt[n];if(i&&i.pre){if(e&&i.id!==e.uid)continue;kt.splice(n,1),n--,i()}}}function Qu(e){if(Ai.length){const t=[...new Set(Ai)].sort((n,i)=>ys(n)-ys(i));if(Ai.length=0,Nn){Nn.push(...t);return}for(Nn=t,ni=0;ni<Nn.length;ni++)Nn[ni]();Nn=null,ni=0}}const ys=e=>e.id==null?1/0:e.id,op=(e,t)=>{const n=ys(e)-ys(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Hu(e){Co=!1,ms=!0,kt.sort(op);try{for(rn=0;rn<kt.length;rn++){const t=kt[rn];t&&t.active!==!1&&Hn(t,null,14)}}finally{rn=0,kt.length=0,Qu(),ms=!1,Ra=null,(kt.length||Ai.length)&&Hu()}}function ap(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||je;let s=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[d]||je;f&&(s=n.map(m=>it(m)?m.trim():m)),h&&(s=n.map(vo))}let l,c=i[l=zr(t)]||i[l=zr(dn(t))];!c&&r&&(c=i[l=zr(hi(t))]),c&&Gt(c,e,6,s);const u=i[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Gt(u,e,6,s)}}function ju(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},l=!1;if(!ve(e)){const c=u=>{const d=ju(u,t,!0);d&&(l=!0,vt(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(Ge(e)&&i.set(e,null),null):(pe(r)?r.forEach(c=>o[c]=null):vt(o,r),Ge(e)&&i.set(e,o),o)}function Er(e,t){return!e||!vr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ie(e,t[0].toLowerCase()+t.slice(1))||Ie(e,hi(t))||Ie(e,t))}let lt=null,Ar=null;function ur(e){const t=lt;return lt=e,Ar=e&&e.type.__scopeId||null,t}function $e(e){Ar=e}function qe(){Ar=null}function W(e,t=lt,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&Fl(-1);const r=ur(t);let o;try{o=e(...s)}finally{ur(r),i._d&&Fl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Jr(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:l,attrs:c,emit:u,render:d,renderCache:h,data:f,setupState:m,ctx:y,inheritAttrs:S}=e;let A,N;const F=ur(e);try{if(n.shapeFlag&4){const oe=s||i,ee=oe;A=sn(d.call(ee,oe,h,r,m,f,y)),N=c}else{const oe=t;A=sn(oe.length>1?oe(r,{attrs:c,slots:l,emit:u}):oe(r,null)),N=t.props?c:lp(c)}}catch(oe){os.length=0,Sr(oe,e,1),A=$(Wn)}let J=A;if(N&&S!==!1){const oe=Object.keys(N),{shapeFlag:ee}=J;oe.length&&ee&7&&(o&&oe.some(Ca)&&(N=cp(N,o)),J=Pi(J,N))}return n.dirs&&(J=Pi(J),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&(J.transition=n.transition),A=J,ur(F),A}const lp=e=>{let t;for(const n in e)(n==="class"||n==="style"||vr(n))&&((t||(t={}))[n]=e[n]);return t},cp=(e,t)=>{const n={};for(const i in e)(!Ca(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function up(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:l,patchFlag:c}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?Ol(i,o,u):!!o;if(c&8){const d=t.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(o[f]!==i[f]&&!Er(u,f))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Ol(i,o,u):!0:!!o;return!1}function Ol(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!Er(n,r))return!0}return!1}function dp({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Vu="components";function Fi(e,t){return Gu(Vu,e,!0,t)||e}const Wu=Symbol.for("v-ndc");function hp(e){return it(e)?Gu(Vu,e,!1)||e:e||Wu}function Gu(e,t,n=!0,i=!1){const s=lt||gt;if(s){const r=s.type;{const l=sm(r,!1);if(l&&(l===t||l===dn(t)||l===kr(dn(t))))return r}const o=Il(s[e]||r[e],t)||Il(s.appContext[e],t);return!o&&i?r:o}}function Il(e,t){return e&&(e[t]||e[dn(t)]||e[kr(dn(t))])}const fp=e=>e.__isSuspense;function pp(e,t){t&&t.pendingBranch?pe(e)?t.effects.push(...e):t.effects.push(e):rp(e)}const mp=Symbol.for("v-scx"),yp=()=>Yt(mp),Ns={};function Ut(e,t,n){return Yu(e,t,n)}function Yu(e,t,{immediate:n,deep:i,flush:s,once:r,onTrack:o,onTrigger:l}=je){if(t&&r){const ie=t;t=(...be)=>{ie(...be),ee()}}const c=gt,u=ie=>i===!0?ie:si(ie,i===!1?1:void 0);let d,h=!1,f=!1;if(ct(e)?(d=()=>e.value,h=cr(e)):Qn(e)?(d=()=>u(e),h=!0):pe(e)?(f=!0,h=e.some(ie=>Qn(ie)||cr(ie)),d=()=>e.map(ie=>{if(ct(ie))return ie.value;if(Qn(ie))return u(ie);if(ve(ie))return Hn(ie,c,2)})):ve(e)?t?d=()=>Hn(e,c,2):d=()=>(m&&m(),Gt(e,c,3,[y])):d=Lt,t&&i){const ie=d;d=()=>si(ie())}let m,y=ie=>{m=J.onStop=()=>{Hn(ie,c,4),m=J.onStop=void 0}},S;if(Or)if(y=Lt,t?n&&Gt(t,c,3,[d(),f?[]:void 0,y]):d(),s==="sync"){const ie=yp();S=ie.__watcherHandles||(ie.__watcherHandles=[])}else return Lt;let A=f?new Array(e.length).fill(Ns):Ns;const N=()=>{if(!(!J.active||!J.dirty))if(t){const ie=J.run();(i||h||(f?ie.some((be,ae)=>Vn(be,A[ae])):Vn(ie,A)))&&(m&&m(),Gt(t,c,3,[ie,A===Ns?void 0:f&&A[0]===Ns?[]:A,y]),A=ie)}else J.run()};N.allowRecurse=!!t;let F;s==="sync"?F=N:s==="post"?F=()=>Tt(N,c&&c.suspense):(N.pre=!0,c&&(N.id=c.uid),F=()=>Da(N));const J=new Aa(d,Lt,F),oe=wu(),ee=()=>{J.stop(),oe&&Sa(oe.effects,J)};return t?n?N():A=J.run():s==="post"?Tt(J.run.bind(J),c&&c.suspense):J.run(),S&&S.push(ee),ee}function gp(e,t,n){const i=this.proxy,s=it(e)?e.includes(".")?zu(i,e):()=>i[e]:e.bind(i,i);let r;ve(t)?r=t:(r=t.handler,n=t);const o=Cs(this),l=Yu(s,r.bind(i),n);return o(),l}function zu(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function si(e,t,n=0,i){if(!Ge(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(i=i||new Set,i.has(e))return e;if(i.add(e),ct(e))si(e.value,t,n,i);else if(pe(e))for(let s=0;s<e.length;s++)si(e[s],t,n,i);else if(hu(e)||Ei(e))e.forEach(s=>{si(s,t,n,i)});else if(mu(e))for(const s in e)si(e[s],t,n,i);return e}function Ne(e,t){if(lt===null)return e;const n=Ir(lt)||lt.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,o,l,c=je]=t[s];r&&(ve(r)&&(r={mounted:r,updated:r}),r.deep&&si(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function Zn(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let c=l.dir[i];c&&(fi(),Gt(c,n,8,[e.el,l,e,t]),pi())}}/*! #__NO_SIDE_EFFECTS__ */function ue(e,t){return ve(e)?vt({name:e.name},t,{setup:e}):e}const ss=e=>!!e.type.__asyncLoader,Ku=e=>e.type.__isKeepAlive;function _p(e,t){Ju(e,"a",t)}function vp(e,t){Ju(e,"da",t)}function Ju(e,t,n=gt){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Tr(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Ku(s.parent.vnode)&&bp(i,t,n,s),s=s.parent}}function bp(e,t,n,i){const s=Tr(t,e,i,!0);mi(()=>{Sa(i[t],s)},n)}function Tr(e,t,n=gt,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;fi();const l=Cs(n),c=Gt(t,n,e,o);return l(),pi(),c});return i?s.unshift(r):s.push(r),r}}const En=e=>(t,n=gt)=>(!Or||e==="sp")&&Tr(e,(...i)=>t(...i),n),wp=En("bm"),pn=En("m"),kp=En("bu"),xp=En("u"),Cp=En("bum"),mi=En("um"),Sp=En("sp"),Ep=En("rtg"),Ap=En("rtc");function Tp(e,t=gt){Tr("ec",e,t)}function he(e,t,n,i){let s;const r=n;if(pe(e)||it(e)){s=new Array(e.length);for(let o=0,l=e.length;o<l;o++)s[o]=t(e[o],o,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r)}else if(Ge(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>t(o,l,void 0,r));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=t(e[u],u,l,r)}}else s=[];return s}function Ii(e,t,n={},i,s){if(lt.isCE||lt.parent&&ss(lt.parent)&&lt.parent.isCE)return t!=="default"&&(n.name=t),$("slot",n,i);let r=e[t];r&&r._c&&(r._d=!1),_();const o=r&&Xu(r(n)),l=ce(te,{key:n.key||o&&o.key||`_${t}`},o||[],o&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function Xu(e){return e.some(t=>hr(t)?!(t.type===Wn||t.type===te&&!Xu(t.children)):!0)?e:null}const So=e=>e?dd(e)?Ir(e)||e.proxy:So(e.parent):null,rs=vt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>So(e.parent),$root:e=>So(e.root),$emit:e=>e.emit,$options:e=>La(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Da(e.update)}),$nextTick:e=>e.n||(e.n=Na.bind(e.proxy)),$watch:e=>gp.bind(e)}),Xr=(e,t)=>e!==je&&!e.__isScriptSetup&&Ie(e,t),$p={get({_:e},t){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Xr(i,t))return o[t]=1,i[t];if(s!==je&&Ie(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&Ie(u,t))return o[t]=3,r[t];if(n!==je&&Ie(n,t))return o[t]=4,n[t];Eo&&(o[t]=0)}}const d=rs[t];let h,f;if(d)return t==="$attrs"&&$t(e,"get",t),d(e);if((h=l.__cssModules)&&(h=h[t]))return h;if(n!==je&&Ie(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,Ie(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return Xr(s,t)?(s[t]=n,!0):i!==je&&Ie(i,t)?(i[t]=n,!0):Ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let l;return!!n[o]||e!==je&&Ie(e,o)||Xr(t,o)||(l=r[0])&&Ie(l,o)||Ie(i,o)||Ie(rs,o)||Ie(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Pl(e){return pe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Eo=!0;function qp(e){const t=La(e),n=e.proxy,i=e.ctx;Eo=!1,t.beforeCreate&&Rl(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:h,mounted:f,beforeUpdate:m,updated:y,activated:S,deactivated:A,beforeDestroy:N,beforeUnmount:F,destroyed:J,unmounted:oe,render:ee,renderTracked:ie,renderTriggered:be,errorCaptured:ae,serverPrefetch:ne,expose:Re,inheritAttrs:He,components:Ze,directives:st,filters:Et}=t;if(u&&Op(u,i,null),o)for(const Ce in o){const Se=o[Ce];ve(Se)&&(i[Ce]=Se.bind(n))}if(s){const Ce=s.call(n,n);Ge(Ce)&&(e.data=xs(Ce))}if(Eo=!0,r)for(const Ce in r){const Se=r[Ce],bt=ve(Se)?Se.bind(n,n):ve(Se.get)?Se.get.bind(n,n):Lt,dt=!ve(Se)&&ve(Se.set)?Se.set.bind(n):Lt,Ke=X({get:bt,set:dt});Object.defineProperty(i,Ce,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Je=>Ke.value=Je})}if(l)for(const Ce in l)Zu(l[Ce],i,n,Ce);if(c){const Ce=ve(c)?c.call(n):c;Reflect.ownKeys(Ce).forEach(Se=>{js(Se,Ce[Se])})}d&&Rl(d,e,"c");function _e(Ce,Se){pe(Se)?Se.forEach(bt=>Ce(bt.bind(n))):Se&&Ce(Se.bind(n))}if(_e(wp,h),_e(pn,f),_e(kp,m),_e(xp,y),_e(_p,S),_e(vp,A),_e(Tp,ae),_e(Ap,ie),_e(Ep,be),_e(Cp,F),_e(mi,oe),_e(Sp,ne),pe(Re))if(Re.length){const Ce=e.exposed||(e.exposed={});Re.forEach(Se=>{Object.defineProperty(Ce,Se,{get:()=>n[Se],set:bt=>n[Se]=bt})})}else e.exposed||(e.exposed={});ee&&e.render===Lt&&(e.render=ee),He!=null&&(e.inheritAttrs=He),Ze&&(e.components=Ze),st&&(e.directives=st)}function Op(e,t,n=Lt){pe(e)&&(e=Ao(e));for(const i in e){const s=e[i];let r;Ge(s)?"default"in s?r=Yt(s.from||i,s.default,!0):r=Yt(s.from||i):r=Yt(s),ct(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function Rl(e,t,n){Gt(pe(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Zu(e,t,n,i){const s=i.includes(".")?zu(n,i):()=>n[i];if(it(e)){const r=t[e];ve(r)&&Ut(s,r)}else if(ve(e))Ut(s,e.bind(n));else if(Ge(e))if(pe(e))e.forEach(r=>Zu(r,t,n,i));else{const r=ve(e.handler)?e.handler.bind(n):t[e.handler];ve(r)&&Ut(s,r,e)}}function La(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,l=r.get(t);let c;return l?c=l:!s.length&&!n&&!i?c=t:(c={},s.length&&s.forEach(u=>dr(c,u,o,!0)),dr(c,t,o)),Ge(t)&&r.set(t,c),c}function dr(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&dr(e,r,n,!0),s&&s.forEach(o=>dr(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const l=Ip[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const Ip={data:Nl,props:Dl,emits:Dl,methods:es,computed:es,beforeCreate:St,created:St,beforeMount:St,mounted:St,beforeUpdate:St,updated:St,beforeDestroy:St,beforeUnmount:St,destroyed:St,unmounted:St,activated:St,deactivated:St,errorCaptured:St,serverPrefetch:St,components:es,directives:es,watch:Rp,provide:Nl,inject:Pp};function Nl(e,t){return t?e?function(){return vt(ve(e)?e.call(this,this):e,ve(t)?t.call(this,this):t)}:t:e}function Pp(e,t){return es(Ao(e),Ao(t))}function Ao(e){if(pe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function St(e,t){return e?[...new Set([].concat(e,t))]:t}function es(e,t){return e?vt(Object.create(null),e,t):t}function Dl(e,t){return e?pe(e)&&pe(t)?[...new Set([...e,...t])]:vt(Object.create(null),Pl(e),Pl(t??{})):t}function Rp(e,t){if(!e)return t;if(!t)return e;const n=vt(Object.create(null),e);for(const i in t)n[i]=St(e[i],t[i]);return n}function ed(){return{app:null,config:{isNativeTag:gf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Np=0;function Dp(e,t){return function(i,s=null){ve(i)||(i=vt({},i)),s!=null&&!Ge(s)&&(s=null);const r=ed(),o=new WeakSet;let l=!1;const c=r.app={_uid:Np++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:om,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&ve(u.install)?(o.add(u),u.install(c,...d)):ve(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!l){const f=$(i,s);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),d&&t?t(f,u):e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,Ir(f.component)||f.component.proxy}},unmount(){l&&(e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Ti;Ti=c;try{return u()}finally{Ti=d}}};return c}}let Ti=null;function js(e,t){if(gt){let n=gt.provides;const i=gt.parent&&gt.parent.provides;i===n&&(n=gt.provides=Object.create(i)),n[e]=t}}function Yt(e,t,n=!1){const i=gt||lt;if(i||Ti){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Ti._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ve(t)?t.call(i&&i.proxy):t}}function Lp(){return!!(gt||lt||Ti)}function Up(e,t,n,i=!1){const s={},r={};ar(r,qr,1),e.propsDefaults=Object.create(null),td(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:Pu(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Mp(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,l=Pe(s),[c]=e.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(Er(e.emitsOptions,f))continue;const m=t[f];if(c)if(Ie(r,f))m!==r[f]&&(r[f]=m,u=!0);else{const y=dn(f);s[y]=To(c,l,y,m,e,!1)}else m!==r[f]&&(r[f]=m,u=!0)}}}else{td(e,t,s,r)&&(u=!0);let d;for(const h in l)(!t||!Ie(t,h)&&((d=hi(h))===h||!Ie(t,d)))&&(c?n&&(n[h]!==void 0||n[d]!==void 0)&&(s[h]=To(c,l,h,void 0,e,!0)):delete s[h]);if(r!==l)for(const h in r)(!t||!Ie(t,h))&&(delete r[h],u=!0)}u&&xn(e,"set","$attrs")}function td(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(is(c))continue;const u=t[c];let d;s&&Ie(s,d=dn(c))?!r||!r.includes(d)?n[d]=u:(l||(l={}))[d]=u:Er(e.emitsOptions,c)||(!(c in i)||u!==i[c])&&(i[c]=u,o=!0)}if(r){const c=Pe(n),u=l||je;for(let d=0;d<r.length;d++){const h=r[d];n[h]=To(s,c,h,u[h],e,!Ie(u,h))}}return o}function To(e,t,n,i,s,r){const o=e[n];if(o!=null){const l=Ie(o,"default");if(l&&i===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ve(c)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const d=Cs(s);i=u[n]=c.call(null,t),d()}}else i=c}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===hi(n))&&(i=!0))}return i}function nd(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},l=[];let c=!1;if(!ve(e)){const d=h=>{c=!0;const[f,m]=nd(h,t,!0);vt(o,f),m&&l.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!c)return Ge(e)&&i.set(e,Si),Si;if(pe(r))for(let d=0;d<r.length;d++){const h=dn(r[d]);Ll(h)&&(o[h]=je)}else if(r)for(const d in r){const h=dn(d);if(Ll(h)){const f=r[d],m=o[h]=pe(f)||ve(f)?{type:f}:vt({},f);if(m){const y=Bl(Boolean,m.type),S=Bl(String,m.type);m[0]=y>-1,m[1]=S<0||y<S,(y>-1||Ie(m,"default"))&&l.push(h)}}}const u=[o,l];return Ge(e)&&i.set(e,u),u}function Ll(e){return e[0]!=="$"&&!is(e)}function Ul(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Ml(e,t){return Ul(e)===Ul(t)}function Bl(e,t){return pe(t)?t.findIndex(n=>Ml(n,e)):ve(t)&&Ml(t,e)?0:-1}const id=e=>e[0]==="_"||e==="$stable",Ua=e=>pe(e)?e.map(sn):[sn(e)],Bp=(e,t,n)=>{if(t._n)return t;const i=W((...s)=>Ua(t(...s)),n);return i._c=!1,i},sd=(e,t,n)=>{const i=e._ctx;for(const s in e){if(id(s))continue;const r=e[s];if(ve(r))t[s]=Bp(s,r,i);else if(r!=null){const o=Ua(r);t[s]=()=>o}}},rd=(e,t)=>{const n=Ua(t);e.slots.default=()=>n},Fp=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Pe(t),ar(t,"_",n)):sd(t,e.slots={})}else e.slots={},t&&rd(e,t);ar(e.slots,qr,1)},Qp=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=je;if(i.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:(vt(s,t),!n&&l===1&&delete s._):(r=!t.$stable,sd(t,s)),o=t}else t&&(rd(e,t),o={default:1});if(r)for(const l in s)!id(l)&&o[l]==null&&delete s[l]};function $o(e,t,n,i,s=!1){if(pe(e)){e.forEach((f,m)=>$o(f,t&&(pe(t)?t[m]:t),n,i,s));return}if(ss(i)&&!s)return;const r=i.shapeFlag&4?Ir(i.component)||i.component.proxy:i.el,o=s?null:r,{i:l,r:c}=e,u=t&&t.r,d=l.refs===je?l.refs={}:l.refs,h=l.setupState;if(u!=null&&u!==c&&(it(u)?(d[u]=null,Ie(h,u)&&(h[u]=null)):ct(u)&&(u.value=null)),ve(c))Hn(c,l,12,[o,d]);else{const f=it(c),m=ct(c);if(f||m){const y=()=>{if(e.f){const S=f?Ie(h,c)?h[c]:d[c]:c.value;s?pe(S)&&Sa(S,r):pe(S)?S.includes(r)||S.push(r):f?(d[c]=[r],Ie(h,c)&&(h[c]=d[c])):(c.value=[r],e.k&&(d[e.k]=c.value))}else f?(d[c]=o,Ie(h,c)&&(h[c]=o)):m&&(c.value=o,e.k&&(d[e.k]=o))};o?(y.id=-1,Tt(y,n)):y()}}}const Tt=pp;function Hp(e){return jp(e)}function jp(e,t){const n=yu();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:h,nextSibling:f,setScopeId:m=Lt,insertStaticContent:y}=e,S=(g,k,I,O=null,v=null,b=null,E=void 0,L=null,B=!!k.dynamicChildren)=>{if(g===k)return;g&&!zi(g,k)&&(O=T(g),Je(g,v,b,!0),g=null),k.patchFlag===-2&&(B=!1,k.dynamicChildren=null);const{type:w,ref:P,shapeFlag:re}=k;switch(w){case $r:A(g,k,I,O);break;case Wn:N(g,k,I,O);break;case eo:g==null&&F(k,I,O,E);break;case te:Ze(g,k,I,O,v,b,E,L,B);break;default:re&1?ee(g,k,I,O,v,b,E,L,B):re&6?st(g,k,I,O,v,b,E,L,B):(re&64||re&128)&&w.process(g,k,I,O,v,b,E,L,B,x)}P!=null&&v&&$o(P,g&&g.ref,b,k||g,!k)},A=(g,k,I,O)=>{if(g==null)i(k.el=l(k.children),I,O);else{const v=k.el=g.el;k.children!==g.children&&u(v,k.children)}},N=(g,k,I,O)=>{g==null?i(k.el=c(k.children||""),I,O):k.el=g.el},F=(g,k,I,O)=>{[g.el,g.anchor]=y(g.children,k,I,O,g.el,g.anchor)},J=({el:g,anchor:k},I,O)=>{let v;for(;g&&g!==k;)v=f(g),i(g,I,O),g=v;i(k,I,O)},oe=({el:g,anchor:k})=>{let I;for(;g&&g!==k;)I=f(g),s(g),g=I;s(k)},ee=(g,k,I,O,v,b,E,L,B)=>{k.type==="svg"?E="svg":k.type==="math"&&(E="mathml"),g==null?ie(k,I,O,v,b,E,L,B):ne(g,k,v,b,E,L,B)},ie=(g,k,I,O,v,b,E,L)=>{let B,w;const{props:P,shapeFlag:re,transition:le,dirs:ye}=g;if(B=g.el=o(g.type,b,P&&P.is,P),re&8?d(B,g.children):re&16&&ae(g.children,B,null,O,v,Zr(g,b),E,L),ye&&Zn(g,null,O,"created"),be(B,g,g.scopeId,E,O),P){for(const Qe in P)Qe!=="value"&&!is(Qe)&&r(B,Qe,null,P[Qe],b,g.children,O,v,q);"value"in P&&r(B,"value",null,P.value,b),(w=P.onVnodeBeforeMount)&&tn(w,O,g)}ye&&Zn(g,null,O,"beforeMount");const Ee=Vp(v,le);Ee&&le.beforeEnter(B),i(B,k,I),((w=P&&P.onVnodeMounted)||Ee||ye)&&Tt(()=>{w&&tn(w,O,g),Ee&&le.enter(B),ye&&Zn(g,null,O,"mounted")},v)},be=(g,k,I,O,v)=>{if(I&&m(g,I),O)for(let b=0;b<O.length;b++)m(g,O[b]);if(v){let b=v.subTree;if(k===b){const E=v.vnode;be(g,E,E.scopeId,E.slotScopeIds,v.parent)}}},ae=(g,k,I,O,v,b,E,L,B=0)=>{for(let w=B;w<g.length;w++){const P=g[w]=L?Dn(g[w]):sn(g[w]);S(null,P,k,I,O,v,b,E,L)}},ne=(g,k,I,O,v,b,E)=>{const L=k.el=g.el;let{patchFlag:B,dynamicChildren:w,dirs:P}=k;B|=g.patchFlag&16;const re=g.props||je,le=k.props||je;let ye;if(I&&ei(I,!1),(ye=le.onVnodeBeforeUpdate)&&tn(ye,I,k,g),P&&Zn(k,g,I,"beforeUpdate"),I&&ei(I,!0),w?Re(g.dynamicChildren,w,L,I,O,Zr(k,v),b):E||Se(g,k,L,null,I,O,Zr(k,v),b,!1),B>0){if(B&16)He(L,k,re,le,I,O,v);else if(B&2&&re.class!==le.class&&r(L,"class",null,le.class,v),B&4&&r(L,"style",re.style,le.style,v),B&8){const Ee=k.dynamicProps;for(let Qe=0;Qe<Ee.length;Qe++){const We=Ee[Qe],ht=re[We],Ft=le[We];(Ft!==ht||We==="value")&&r(L,We,ht,Ft,v,g.children,I,O,q)}}B&1&&g.children!==k.children&&d(L,k.children)}else!E&&w==null&&He(L,k,re,le,I,O,v);((ye=le.onVnodeUpdated)||P)&&Tt(()=>{ye&&tn(ye,I,k,g),P&&Zn(k,g,I,"updated")},O)},Re=(g,k,I,O,v,b,E)=>{for(let L=0;L<k.length;L++){const B=g[L],w=k[L],P=B.el&&(B.type===te||!zi(B,w)||B.shapeFlag&70)?h(B.el):I;S(B,w,P,null,O,v,b,E,!0)}},He=(g,k,I,O,v,b,E)=>{if(I!==O){if(I!==je)for(const L in I)!is(L)&&!(L in O)&&r(g,L,I[L],null,E,k.children,v,b,q);for(const L in O){if(is(L))continue;const B=O[L],w=I[L];B!==w&&L!=="value"&&r(g,L,w,B,E,k.children,v,b,q)}"value"in O&&r(g,"value",I.value,O.value,E)}},Ze=(g,k,I,O,v,b,E,L,B)=>{const w=k.el=g?g.el:l(""),P=k.anchor=g?g.anchor:l("");let{patchFlag:re,dynamicChildren:le,slotScopeIds:ye}=k;ye&&(L=L?L.concat(ye):ye),g==null?(i(w,I,O),i(P,I,O),ae(k.children||[],I,P,v,b,E,L,B)):re>0&&re&64&&le&&g.dynamicChildren?(Re(g.dynamicChildren,le,I,v,b,E,L),(k.key!=null||v&&k===v.subTree)&&od(g,k,!0)):Se(g,k,I,P,v,b,E,L,B)},st=(g,k,I,O,v,b,E,L,B)=>{k.slotScopeIds=L,g==null?k.shapeFlag&512?v.ctx.activate(k,I,O,E,B):Et(k,I,O,v,b,E,B):Ye(g,k,B)},Et=(g,k,I,O,v,b,E)=>{const L=g.component=Zp(g,O,v);if(Ku(g)&&(L.ctx.renderer=x),em(L),L.asyncDep){if(v&&v.registerDep(L,_e),!g.el){const B=L.subTree=$(Wn);N(null,B,k,I)}}else _e(L,g,k,I,v,b,E)},Ye=(g,k,I)=>{const O=k.component=g.component;if(up(g,k,I))if(O.asyncDep&&!O.asyncResolved){Ce(O,k,I);return}else O.next=k,sp(O.update),O.effect.dirty=!0,O.update();else k.el=g.el,O.vnode=k},_e=(g,k,I,O,v,b,E)=>{const L=()=>{if(g.isMounted){let{next:P,bu:re,u:le,parent:ye,vnode:Ee}=g;{const gi=ad(g);if(gi){P&&(P.el=Ee.el,Ce(g,P,E)),gi.asyncDep.then(()=>{g.isUnmounted||L()});return}}let Qe=P,We;ei(g,!1),P?(P.el=Ee.el,Ce(g,P,E)):P=Ee,re&&Qs(re),(We=P.props&&P.props.onVnodeBeforeUpdate)&&tn(We,ye,P,Ee),ei(g,!0);const ht=Jr(g),Ft=g.subTree;g.subTree=ht,S(Ft,ht,h(Ft.el),T(Ft),g,v,b),P.el=ht.el,Qe===null&&dp(g,ht.el),le&&Tt(le,v),(We=P.props&&P.props.onVnodeUpdated)&&Tt(()=>tn(We,ye,P,Ee),v)}else{let P;const{el:re,props:le}=k,{bm:ye,m:Ee,parent:Qe}=g,We=ss(k);if(ei(g,!1),ye&&Qs(ye),!We&&(P=le&&le.onVnodeBeforeMount)&&tn(P,Qe,k),ei(g,!0),re&&fe){const ht=()=>{g.subTree=Jr(g),fe(re,g.subTree,g,v,null)};We?k.type.__asyncLoader().then(()=>!g.isUnmounted&&ht()):ht()}else{const ht=g.subTree=Jr(g);S(null,ht,I,O,g,v,b),k.el=ht.el}if(Ee&&Tt(Ee,v),!We&&(P=le&&le.onVnodeMounted)){const ht=k;Tt(()=>tn(P,Qe,ht),v)}(k.shapeFlag&256||Qe&&ss(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&g.a&&Tt(g.a,v),g.isMounted=!0,k=I=O=null}},B=g.effect=new Aa(L,Lt,()=>Da(w),g.scope),w=g.update=()=>{B.dirty&&B.run()};w.id=g.uid,ei(g,!0),w()},Ce=(g,k,I)=>{k.component=g;const O=g.vnode.props;g.vnode=k,g.next=null,Mp(g,k.props,O,I),Qp(g,k.children,I),fi(),ql(g),pi()},Se=(g,k,I,O,v,b,E,L,B=!1)=>{const w=g&&g.children,P=g?g.shapeFlag:0,re=k.children,{patchFlag:le,shapeFlag:ye}=k;if(le>0){if(le&128){dt(w,re,I,O,v,b,E,L,B);return}else if(le&256){bt(w,re,I,O,v,b,E,L,B);return}}ye&8?(P&16&&q(w,v,b),re!==w&&d(I,re)):P&16?ye&16?dt(w,re,I,O,v,b,E,L,B):q(w,v,b,!0):(P&8&&d(I,""),ye&16&&ae(re,I,O,v,b,E,L,B))},bt=(g,k,I,O,v,b,E,L,B)=>{g=g||Si,k=k||Si;const w=g.length,P=k.length,re=Math.min(w,P);let le;for(le=0;le<re;le++){const ye=k[le]=B?Dn(k[le]):sn(k[le]);S(g[le],ye,I,null,v,b,E,L,B)}w>P?q(g,v,b,!0,!1,re):ae(k,I,O,v,b,E,L,B,re)},dt=(g,k,I,O,v,b,E,L,B)=>{let w=0;const P=k.length;let re=g.length-1,le=P-1;for(;w<=re&&w<=le;){const ye=g[w],Ee=k[w]=B?Dn(k[w]):sn(k[w]);if(zi(ye,Ee))S(ye,Ee,I,null,v,b,E,L,B);else break;w++}for(;w<=re&&w<=le;){const ye=g[re],Ee=k[le]=B?Dn(k[le]):sn(k[le]);if(zi(ye,Ee))S(ye,Ee,I,null,v,b,E,L,B);else break;re--,le--}if(w>re){if(w<=le){const ye=le+1,Ee=ye<P?k[ye].el:O;for(;w<=le;)S(null,k[w]=B?Dn(k[w]):sn(k[w]),I,Ee,v,b,E,L,B),w++}}else if(w>le)for(;w<=re;)Je(g[w],v,b,!0),w++;else{const ye=w,Ee=w,Qe=new Map;for(w=Ee;w<=le;w++){const qt=k[w]=B?Dn(k[w]):sn(k[w]);qt.key!=null&&Qe.set(qt.key,w)}let We,ht=0;const Ft=le-Ee+1;let gi=!1,cl=0;const Yi=new Array(Ft);for(w=0;w<Ft;w++)Yi[w]=0;for(w=ye;w<=re;w++){const qt=g[w];if(ht>=Ft){Je(qt,v,b,!0);continue}let en;if(qt.key!=null)en=Qe.get(qt.key);else for(We=Ee;We<=le;We++)if(Yi[We-Ee]===0&&zi(qt,k[We])){en=We;break}en===void 0?Je(qt,v,b,!0):(Yi[en-Ee]=w+1,en>=cl?cl=en:gi=!0,S(qt,k[en],I,null,v,b,E,L,B),ht++)}const ul=gi?Wp(Yi):Si;for(We=ul.length-1,w=Ft-1;w>=0;w--){const qt=Ee+w,en=k[qt],dl=qt+1<P?k[qt+1].el:O;Yi[w]===0?S(null,en,I,dl,v,b,E,L,B):gi&&(We<0||w!==ul[We]?Ke(en,I,dl,2):We--)}}},Ke=(g,k,I,O,v=null)=>{const{el:b,type:E,transition:L,children:B,shapeFlag:w}=g;if(w&6){Ke(g.component.subTree,k,I,O);return}if(w&128){g.suspense.move(k,I,O);return}if(w&64){E.move(g,k,I,x);return}if(E===te){i(b,k,I);for(let re=0;re<B.length;re++)Ke(B[re],k,I,O);i(g.anchor,k,I);return}if(E===eo){J(g,k,I);return}if(O!==2&&w&1&&L)if(O===0)L.beforeEnter(b),i(b,k,I),Tt(()=>L.enter(b),v);else{const{leave:re,delayLeave:le,afterLeave:ye}=L,Ee=()=>i(b,k,I),Qe=()=>{re(b,()=>{Ee(),ye&&ye()})};le?le(b,Ee,Qe):Qe()}else i(b,k,I)},Je=(g,k,I,O=!1,v=!1)=>{const{type:b,props:E,ref:L,children:B,dynamicChildren:w,shapeFlag:P,patchFlag:re,dirs:le}=g;if(L!=null&&$o(L,null,I,g,!0),P&256){k.ctx.deactivate(g);return}const ye=P&1&&le,Ee=!ss(g);let Qe;if(Ee&&(Qe=E&&E.onVnodeBeforeUnmount)&&tn(Qe,k,g),P&6)R(g.component,I,O);else{if(P&128){g.suspense.unmount(I,O);return}ye&&Zn(g,null,k,"beforeUnmount"),P&64?g.type.remove(g,k,I,v,x,O):w&&(b!==te||re>0&&re&64)?q(w,k,I,!1,!0):(b===te&&re&384||!v&&P&16)&&q(B,k,I),O&&mt(g)}(Ee&&(Qe=E&&E.onVnodeUnmounted)||ye)&&Tt(()=>{Qe&&tn(Qe,k,g),ye&&Zn(g,null,k,"unmounted")},I)},mt=g=>{const{type:k,el:I,anchor:O,transition:v}=g;if(k===te){At(I,O);return}if(k===eo){oe(g);return}const b=()=>{s(I),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(g.shapeFlag&1&&v&&!v.persisted){const{leave:E,delayLeave:L}=v,B=()=>E(I,b);L?L(g.el,b,B):B()}else b()},At=(g,k)=>{let I;for(;g!==k;)I=f(g),s(g),g=I;s(k)},R=(g,k,I)=>{const{bum:O,scope:v,update:b,subTree:E,um:L}=g;O&&Qs(O),v.stop(),b&&(b.active=!1,Je(E,g,k,I)),L&&Tt(L,k),Tt(()=>{g.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},q=(g,k,I,O=!1,v=!1,b=0)=>{for(let E=b;E<g.length;E++)Je(g[E],k,I,O,v)},T=g=>g.shapeFlag&6?T(g.component.subTree):g.shapeFlag&128?g.suspense.next():f(g.anchor||g.el);let G=!1;const V=(g,k,I)=>{g==null?k._vnode&&Je(k._vnode,null,null,!0):S(k._vnode||null,g,k,null,null,null,I),G||(G=!0,ql(),Qu(),G=!1),k._vnode=g},x={p:S,um:Je,m:Ke,r:mt,mt:Et,mc:ae,pc:Se,pbc:Re,n:T,o:e};let z,fe;return{render:V,hydrate:z,createApp:Dp(V,z)}}function Zr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ei({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Vp(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function od(e,t,n=!1){const i=e.children,s=t.children;if(pe(i)&&pe(s))for(let r=0;r<i.length;r++){const o=i[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Dn(s[r]),l.el=o.el),n||od(o,l)),l.type===$r&&(l.el=o.el)}}function Wp(e){const t=e.slice(),n=[0];let i,s,r,o,l;const c=e.length;for(i=0;i<c;i++){const u=e[i];if(u!==0){if(s=n[n.length-1],e[s]<u){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,e[n[l]]<u?r=l+1:o=l;u<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function ad(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ad(t)}const Gp=e=>e.__isTeleport,te=Symbol.for("v-fgt"),$r=Symbol.for("v-txt"),Wn=Symbol.for("v-cmt"),eo=Symbol.for("v-stc"),os=[];let Wt=null;function _(e=!1){os.push(Wt=e?null:[])}function Yp(){os.pop(),Wt=os[os.length-1]||null}let gs=1;function Fl(e){gs+=e}function ld(e){return e.dynamicChildren=gs>0?Wt||Si:null,Yp(),gs>0&&Wt&&Wt.push(e),e}function C(e,t,n,i,s,r){return ld(a(e,t,n,i,s,r,!0))}function ce(e,t,n,i,s){return ld($(e,t,n,i,s,!0))}function hr(e){return e?e.__v_isVNode===!0:!1}function zi(e,t){return e.type===t.type&&e.key===t.key}const qr="__vInternal",cd=({key:e})=>e??null,Vs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?it(e)||ct(e)||ve(e)?{i:lt,r:e,k:t,f:!!n}:e:null);function a(e,t=null,n=null,i=0,s=null,r=e===te?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cd(t),ref:t&&Vs(t),scopeId:Ar,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:lt};return l?(Ma(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),gs>0&&!o&&Wt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Wt.push(c),c}const $=zp;function zp(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===Wu)&&(e=Wn),hr(e)){const l=Pi(e,t,!0);return n&&Ma(l,n),gs>0&&!r&&Wt&&(l.shapeFlag&6?Wt[Wt.indexOf(e)]=l:Wt.push(l)),l.patchFlag|=-2,l}if(rm(e)&&(e=e.__vccOpts),t){t=Kp(t);let{class:l,style:c}=t;l&&!it(l)&&(t.class=Z(l)),Ge(c)&&(Nu(c)&&!pe(c)&&(c=vt({},c)),t.style=Jt(c))}const o=it(e)?1:fp(e)?128:Gp(e)?64:Ge(e)?4:ve(e)?2:0;return a(e,t,n,i,s,o,r,!0)}function Kp(e){return e?Nu(e)||qr in e?vt({},e):e:null}function Pi(e,t,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=e,l=t?ud(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&cd(l),ref:t&&t.ref?n&&s?pe(s)?s.concat(Vs(t)):[s,Vs(t)]:Vs(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==te?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pi(e.ssContent),ssFallback:e.ssFallback&&Pi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function se(e=" ",t=0){return $($r,null,e,t)}function Y(e="",t=!1){return t?(_(),ce(Wn,null,e)):$(Wn,null,e)}function sn(e){return e==null||typeof e=="boolean"?$(Wn):pe(e)?$(te,null,e.slice()):typeof e=="object"?Dn(e):$($r,null,String(e))}function Dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pi(e)}function Ma(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(pe(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Ma(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(qr in t)?t._ctx=lt:s===3&&lt&&(lt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ve(t)?(t={default:t,_ctx:lt},n=32):(t=String(t),i&64?(n=16,t=[se(t)]):n=8);e.children=t,e.shapeFlag|=n}function ud(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Z([t.class,i.class]));else if(s==="style")t.style=Jt([t.style,i.style]);else if(vr(s)){const r=t[s],o=i[s];o&&r!==o&&!(pe(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function tn(e,t,n,i=null){Gt(e,t,7,[n,i])}const Jp=ed();let Xp=0;function Zp(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Jp,r={uid:Xp++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new vu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nd(i,s),emitsOptions:ju(i,s),emit:null,emitted:null,propsDefaults:je,inheritAttrs:i.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ap.bind(null,r),e.ce&&e.ce(r),r}let gt=null,fr,qo;{const e=yu(),t=(n,i)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};fr=t("__VUE_INSTANCE_SETTERS__",n=>gt=n),qo=t("__VUE_SSR_SETTERS__",n=>Or=n)}const Cs=e=>{const t=gt;return fr(e),e.scope.on(),()=>{e.scope.off(),fr(t)}},Ql=()=>{gt&&gt.scope.off(),fr(null)};function dd(e){return e.vnode.shapeFlag&4}let Or=!1;function em(e,t=!1){t&&qo(t);const{props:n,children:i}=e.vnode,s=dd(e);Up(e,n,s,t),Fp(e,i);const r=s?tm(e,t):void 0;return t&&qo(!1),r}function tm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Cr(new Proxy(e.ctx,$p));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?im(e):null,r=Cs(e);fi();const o=Hn(i,e,0,[e.props,s]);if(pi(),r(),fu(o)){if(o.then(Ql,Ql),t)return o.then(l=>{Hl(e,l,t)}).catch(l=>{Sr(l,e,0)});e.asyncDep=o}else Hl(e,o,t)}else hd(e,t)}function Hl(e,t,n){ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ge(t)&&(e.setupState=Mu(t)),hd(e,n)}let jl;function hd(e,t,n){const i=e.type;if(!e.render){if(!t&&jl&&!i.render){const s=i.template||La(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:l,compilerOptions:c}=i,u=vt(vt({isCustomElement:r,delimiters:l},o),c);i.render=jl(s,u)}}e.render=i.render||Lt}{const s=Cs(e);fi();try{qp(e)}finally{pi(),s()}}}function nm(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return $t(e,"get","$attrs"),t[n]}}))}function im(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return nm(e)},slots:e.slots,emit:e.emit,expose:t}}function Ir(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Mu(Cr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in rs)return rs[n](e)},has(t,n){return n in t||n in rs}}))}function sm(e,t=!0){return ve(e)?e.displayName||e.name:e.name||t&&e.__name}function rm(e){return ve(e)&&"__vccOpts"in e}const X=(e,t)=>Kf(e,t,Or);function fd(e,t,n){const i=arguments.length;return i===2?Ge(t)&&!pe(t)?hr(t)?$(e,null,[t]):$(e,t):$(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&hr(n)&&(n=[n]),$(e,t,n))}const om="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const am="http://www.w3.org/2000/svg",lm="http://www.w3.org/1998/Math/MathML",Ln=typeof document<"u"?document:null,Vl=Ln&&Ln.createElement("template"),cm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t==="svg"?Ln.createElementNS(am,e):t==="mathml"?Ln.createElementNS(lm,e):Ln.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Ln.createTextNode(e),createComment:e=>Ln.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ln.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Vl.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const l=Vl.content;if(i==="svg"||i==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},um=Symbol("_vtc");function dm(e,t,n){const i=e[um];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Wl=Symbol("_vod"),hm=Symbol("_vsh"),fm=Symbol(""),pm=/(^|;)\s*display\s*:/;function mm(e,t,n){const i=e.style,s=it(n);let r=!1;if(n&&!s){if(t)if(it(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Ws(i,l,"")}else for(const o in t)n[o]==null&&Ws(i,o,"");for(const o in n)o==="display"&&(r=!0),Ws(i,o,n[o])}else if(s){if(t!==n){const o=i[fm];o&&(n+=";"+o),i.cssText=n,r=pm.test(n)}}else t&&e.removeAttribute("style");Wl in e&&(e[Wl]=r?i.display:"",e[hm]&&(i.display="none"))}const Gl=/\s*!important$/;function Ws(e,t,n){if(pe(n))n.forEach(i=>Ws(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=ym(e,t);Gl.test(n)?e.setProperty(hi(i),n.replace(Gl,""),"important"):e[i]=n}}const Yl=["Webkit","Moz","ms"],to={};function ym(e,t){const n=to[t];if(n)return n;let i=dn(t);if(i!=="filter"&&i in e)return to[t]=i;i=kr(i);for(let s=0;s<Yl.length;s++){const r=Yl[s]+i;if(r in e)return to[t]=r}return t}const zl="http://www.w3.org/1999/xlink";function gm(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(zl,t.slice(6,t.length)):e.setAttributeNS(zl,t,n);else{const r=Af(t);n==null||r&&!gu(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function _m(e,t,n,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const u=l==="OPTION"?e.getAttribute("value")||"":e.value,d=n??"";(u!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=gu(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function vi(e,t,n,i){e.addEventListener(t,n,i)}function vm(e,t,n,i){e.removeEventListener(t,n,i)}const Kl=Symbol("_vei");function bm(e,t,n,i,s=null){const r=e[Kl]||(e[Kl]={}),o=r[t];if(i&&o)o.value=i;else{const[l,c]=wm(t);if(i){const u=r[t]=Cm(i,s);vi(e,l,u,c)}else o&&(vm(e,l,o,c),r[t]=void 0)}}const Jl=/(?:Once|Passive|Capture)$/;function wm(e){let t;if(Jl.test(e)){t={};let i;for(;i=e.match(Jl);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hi(e.slice(2)),t]}let no=0;const km=Promise.resolve(),xm=()=>no||(km.then(()=>no=0),no=Date.now());function Cm(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Gt(Sm(i,n.value),t,5,[i])};return n.value=e,n.attached=xm(),n}function Sm(e,t){if(pe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Xl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Em=(e,t,n,i,s,r,o,l,c)=>{const u=s==="svg";t==="class"?dm(e,i,u):t==="style"?mm(e,n,i):vr(t)?Ca(t)||bm(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Am(e,t,i,u))?_m(e,t,i,r,o,l,c):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),gm(e,t,i,u))};function Am(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Xl(t)&&ve(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Xl(t)&&it(n)?!1:t in e}const Zl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pe(t)?n=>Qs(t,n):t};function Tm(e){e.target.composing=!0}function ec(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const io=Symbol("_assign"),De={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e[io]=Zl(s);const r=i||s.props&&s.props.type==="number";vi(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=vo(l)),e[io](l)}),n&&vi(e,"change",()=>{e.value=e.value.trim()}),t||(vi(e,"compositionstart",Tm),vi(e,"compositionend",ec),vi(e,"change",ec))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:s}},r){if(e[io]=Zl(r),e.composing)return;const o=s||e.type==="number"?vo(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(n||i&&e.value.trim()===l)||(e.value=l))}},$m={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ss=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=s=>{if(!("key"in s))return;const r=hi(s.key);if(t.some(o=>o===r||$m[o]===r))return e(s)})},qm=vt({patchProp:Em},cm);let tc;function Om(){return tc||(tc=Hp(qm))}const Im=(...e)=>{const t=Om().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=Rm(i);if(!s)return;const r=t._component;!ve(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Pm(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Pm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rm(e){return it(e)?document.querySelector(e):e}var Nm=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let pd;const Pr=e=>pd=e,md=Symbol();function Oo(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var as;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(as||(as={}));function Dm(){const e=bu(!0),t=e.run(()=>j({}));let n=[],i=[];const s=Cr({install(r){Pr(s),s._a=r,r.provide(md,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return!this._a&&!Nm?i.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const yd=()=>{};function nc(e,t,n,i=yd){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),i())};return!n&&wu()&&$f(s),s}function _i(e,...t){e.slice().forEach(n=>{n(...t)})}const Lm=e=>e();function Io(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,i)=>e.set(i,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],s=e[n];Oo(s)&&Oo(i)&&e.hasOwnProperty(n)&&!ct(i)&&!Qn(i)?e[n]=Io(s,i):e[n]=i}return e}const Um=Symbol();function Mm(e){return!Oo(e)||!e.hasOwnProperty(Um)}const{assign:Rn}=Object;function Bm(e){return!!(ct(e)&&e.effect)}function Fm(e,t,n,i){const{state:s,actions:r,getters:o}=t,l=n.state.value[e];let c;function u(){l||(n.state.value[e]=s?s():{});const d=Zf(n.state.value[e]);return Rn(d,r,Object.keys(o||{}).reduce((h,f)=>(h[f]=Cr(X(()=>{Pr(n);const m=n._s.get(e);return o[f].call(m,m)})),h),{}))}return c=gd(e,u,t,n,i,!0),c}function gd(e,t,n={},i,s,r){let o;const l=Rn({actions:{}},n),c={deep:!0};let u,d,h=[],f=[],m;const y=i.state.value[e];!r&&!y&&(i.state.value[e]={}),j({});let S;function A(ae){let ne;u=d=!1,typeof ae=="function"?(ae(i.state.value[e]),ne={type:as.patchFunction,storeId:e,events:m}):(Io(i.state.value[e],ae),ne={type:as.patchObject,payload:ae,storeId:e,events:m});const Re=S=Symbol();Na().then(()=>{S===Re&&(u=!0)}),d=!0,_i(h,ne,i.state.value[e])}const N=r?function(){const{state:ne}=n,Re=ne?ne():{};this.$patch(He=>{Rn(He,Re)})}:yd;function F(){o.stop(),h=[],f=[],i._s.delete(e)}function J(ae,ne){return function(){Pr(i);const Re=Array.from(arguments),He=[],Ze=[];function st(_e){He.push(_e)}function Et(_e){Ze.push(_e)}_i(f,{args:Re,name:ae,store:ee,after:st,onError:Et});let Ye;try{Ye=ne.apply(this&&this.$id===e?this:ee,Re)}catch(_e){throw _i(Ze,_e),_e}return Ye instanceof Promise?Ye.then(_e=>(_i(He,_e),_e)).catch(_e=>(_i(Ze,_e),Promise.reject(_e))):(_i(He,Ye),Ye)}}const oe={_p:i,$id:e,$onAction:nc.bind(null,f),$patch:A,$reset:N,$subscribe(ae,ne={}){const Re=nc(h,ae,ne.detached,()=>He()),He=o.run(()=>Ut(()=>i.state.value[e],Ze=>{(ne.flush==="sync"?d:u)&&ae({storeId:e,type:as.direct,events:m},Ze)},Rn({},c,ne)));return Re},$dispose:F},ee=xs(oe);i._s.set(e,ee);const be=(i._a&&i._a.runWithContext||Lm)(()=>i._e.run(()=>(o=bu()).run(t)));for(const ae in be){const ne=be[ae];if(ct(ne)&&!Bm(ne)||Qn(ne))r||(y&&Mm(ne)&&(ct(ne)?ne.value=y[ae]:Io(ne,y[ae])),i.state.value[e][ae]=ne);else if(typeof ne=="function"){const Re=J(ae,ne);be[ae]=Re,l.actions[ae]=ne}}return Rn(ee,be),Rn(Pe(ee),be),Object.defineProperty(ee,"$state",{get:()=>i.state.value[e],set:ae=>{A(ne=>{Rn(ne,ae)})}}),i._p.forEach(ae=>{Rn(ee,o.run(()=>ae({store:ee,app:i._a,pinia:i,options:l})))}),y&&r&&n.hydrate&&n.hydrate(ee.$state,y),u=!0,d=!0,ee}function Rr(e,t,n){let i,s;const r=typeof t=="function";typeof e=="string"?(i=e,s=r?n:t):(s=e,i=e.id);function o(l,c){const u=Lp();return l=l||(u?Yt(md,null):null),l&&Pr(l),l=pd,l._s.has(i)||(r?gd(i,t,s,l):Fm(i,s,l)),l._s.get(i)}return o.$id=i,o}const Qm="bitd-vtt-client",Hm="1.0.98",jm="module",Vm={dev:"vite",colors:"node ./scripts/common-colors.mjs",build:"npm run colors && vue-tsc && vite build && node scripts/copy-index-as-404.mjs",preview:"vite preview",deploy:"node ./scripts/increment-version.mjs && npm run build && gh-pages -d dist"},Wm={"@types/fast-json-patch":"^1.1.5","@types/mixpanel-browser":"^2.49.0","@types/socket.io-client":"^3.0.0","@types/string-hash":"^1.1.3","@types/uuid":"^9.0.8","@types/ws":"^8.5.10",axios:"^1.6.8",chalk:"^5.3.0","fast-json-patch":"^3.1.1","gh-pages":"^6.1.1","mixpanel-browser":"^2.53.0","node-vibrant":"^3.2.1-alpha.1",pinia:"^2.1.7",rxjs:"^7.8.1","socket.io-client":"^4.7.5","string-hash":"^1.1.3",uuid:"^9.0.1",vue:"^3.4.19","vue-router":"^4.3.2",ws:"^8.17.0"},Gm={"@types/node":"^20.12.8","@vitejs/plugin-vue":"^5.0.4",sass:"^1.74.1",typescript:"^5.2.2",vite:"^5.1.4","vue-tsc":"^1.8.27"},Ym={name:Qm,private:!0,version:Hm,type:jm,scripts:Vm,dependencies:Wm,devDependencies:Gm},_d=e=>($e("data-v-e5afb3c7"),e=e(),qe(),e),zm=_d(()=>a("span",{class:"online"},"online",-1)),Km=_d(()=>a("span",{class:"in-the-dark"},"in the Dark",-1)),Jm=[zm,Km],Xm=ue({__name:"Logo",props:{big:{type:Boolean}},setup(e){const t=e;return(n,i)=>(_(),C("div",{class:Z(["logo",{big:t.big}])},Jm,2))}}),de=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},vd=de(Xm,[["__scopeId","data-v-e5afb3c7"]]),Zm=e=>($e("data-v-63440d07"),e=e(),qe(),e),ey={class:"loading"},ty=Zm(()=>a("i",{class:"fas fa-circle-notch fa-spin"},null,-1)),ny=ue({__name:"LoadingModal",setup(e){return(t,n)=>(_(),C("div",ey,[$(vd,{big:""}),ty]))}}),Qi=de(ny,[["__scopeId","data-v-63440d07"]]);var Po=function(e,t){return Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},Po(e,t)};function Nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Po(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ro(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,r=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return r}function Do(e,t,n){if(n||arguments.length===2)for(var i=0,s=t.length,r;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Cn(e){return typeof e=="function"}function bd(e){var t=function(i){Error.call(i),i.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var so=bd(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Lo(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Dr=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,i,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=Ro(o),c=l.next();!c.done;c=l.next()){var u=c.value;u.remove(this)}}catch(S){t={error:S}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else o.remove(this);var d=this.initialTeardown;if(Cn(d))try{d()}catch(S){r=S instanceof so?S.errors:[S]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=Ro(h),m=f.next();!m.done;m=f.next()){var y=m.value;try{ic(y)}catch(S){r=r??[],S instanceof so?r=Do(Do([],No(r)),No(S.errors)):r.push(S)}}}catch(S){i={error:S}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}if(r)throw new so(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ic(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Lo(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Lo(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),wd=Dr.EMPTY;function kd(e){return e instanceof Dr||e&&"closed"in e&&Cn(e.remove)&&Cn(e.add)&&Cn(e.unsubscribe)}function ic(e){Cn(e)?e():e.unsubscribe()}var xd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cd={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Do([e,t],No(n)))},clearTimeout:function(e){var t=Cd.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function iy(e){Cd.setTimeout(function(){throw e})}function sc(){}function Gs(e){e()}var Sd=function(e){Nr(t,e);function t(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,kd(n)&&n.add(i)):i.destination=ay,i}return t.create=function(n,i,s){return new Uo(n,i,s)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Dr),sy=Function.prototype.bind;function ro(e,t){return sy.call(e,t)}var ry=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(i){Ds(i)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(i){Ds(i)}else Ds(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Ds(n)}},e}(),Uo=function(e){Nr(t,e);function t(n,i,s){var r=e.call(this)||this,o;if(Cn(n)||!n)o={next:n??void 0,error:i??void 0,complete:s??void 0};else{var l;r&&xd.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=function(){return r.unsubscribe()},o={next:n.next&&ro(n.next,l),error:n.error&&ro(n.error,l),complete:n.complete&&ro(n.complete,l)}):o=n}return r.destination=new ry(o),r}return t}(Sd);function Ds(e){iy(e)}function oy(e){throw e}var ay={closed:!0,next:sc,error:oy,complete:sc},ly=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function cy(e){return e}function uy(e){return e.length===0?cy:e.length===1?e[0]:function(n){return e.reduce(function(i,s){return s(i)},n)}}var rc=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,i){var s=this,r=hy(t)?t:new Uo(t,n,i);return Gs(function(){var o=s,l=o.operator,c=o.source;r.add(l?l.call(r,c):c?s._subscribe(r):s._trySubscribe(r))}),r},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var i=this;return n=oc(n),new n(function(s,r){var o=new Uo({next:function(l){try{t(l)}catch(c){r(c),o.unsubscribe()}},error:r,complete:s});i.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[ly]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return uy(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=oc(t),new t(function(i,s){var r;n.subscribe(function(o){return r=o},function(o){return s(o)},function(){return i(r)})})},e.create=function(t){return new e(t)},e}();function oc(e){var t;return(t=e??xd.Promise)!==null&&t!==void 0?t:Promise}function dy(e){return e&&Cn(e.next)&&Cn(e.error)&&Cn(e.complete)}function hy(e){return e&&e instanceof Sd||dy(e)&&kd(e)}var fy=bd(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ed=function(e){Nr(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var i=new ac(this,this);return i.operator=n,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new fy},t.prototype.next=function(n){var i=this;Gs(function(){var s,r;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var o=Ro(i.currentObservers),l=o.next();!l.done;l=o.next()){var c=l.value;c.next(n)}}catch(u){s={error:u}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}}})},t.prototype.error=function(n){var i=this;Gs(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var s=i.observers;s.length;)s.shift().error(n)}})},t.prototype.complete=function(){var n=this;Gs(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var i=this,s=this,r=s.hasError,o=s.isStopped,l=s.observers;return r||o?wd:(this.currentObservers=null,l.push(n),new Dr(function(){i.currentObservers=null,Lo(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var i=this,s=i.hasError,r=i.thrownError,o=i.isStopped;s?n.error(r):o&&n.complete()},t.prototype.asObservable=function(){var n=new rc;return n.source=this,n},t.create=function(n,i){return new ac(n,i)},t}(rc),ac=function(e){Nr(t,e);function t(n,i){var s=e.call(this)||this;return s.destination=n,s.source=i,s}return t.prototype.next=function(n){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.next)===null||s===void 0||s.call(i,n)},t.prototype.error=function(n){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.error)===null||s===void 0||s.call(i,n)},t.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},t.prototype._subscribe=function(n){var i,s;return(s=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&s!==void 0?s:wd},t}(Ed);class K{constructor(){Q(this,"subject",new Ed)}static getInstance(){return this.instance||(this.instance=new this)}dispatch(t){this.subject.next(t)}static open(t,n){this.getInstance().dispatch({modal:t,modalConfig:n})}static close(t){this.getInstance().dispatch({modal:null}),t&&t()}addEventListener(t){this.subject.subscribe(t)}removeEventListener(){this.subject.unsubscribe()}}Q(K,"instance",null);function Ad(e,t){return function(){return e.apply(t,arguments)}}const{toString:py}=Object.prototype,{getPrototypeOf:Ba}=Object,Lr=(e=>t=>{const n=py.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),mn=e=>(e=e.toLowerCase(),t=>Lr(t)===e),Ur=e=>t=>typeof t===e,{isArray:Hi}=Array,_s=Ur("undefined");function my(e){return e!==null&&!_s(e)&&e.constructor!==null&&!_s(e.constructor)&&Mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Td=mn("ArrayBuffer");function yy(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Td(e.buffer),t}const gy=Ur("string"),Mt=Ur("function"),$d=Ur("number"),Mr=e=>e!==null&&typeof e=="object",_y=e=>e===!0||e===!1,Ys=e=>{if(Lr(e)!=="object")return!1;const t=Ba(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vy=mn("Date"),by=mn("File"),wy=mn("Blob"),ky=mn("FileList"),xy=e=>Mr(e)&&Mt(e.pipe),Cy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Mt(e.append)&&((t=Lr(e))==="formdata"||t==="object"&&Mt(e.toString)&&e.toString()==="[object FormData]"))},Sy=mn("URLSearchParams"),Ey=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Es(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),Hi(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let l;for(i=0;i<o;i++)l=r[i],t.call(null,e[l],l,e)}}function qd(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const Od=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Id=e=>!_s(e)&&e!==Od;function Mo(){const{caseless:e}=Id(this)&&this||{},t={},n=(i,s)=>{const r=e&&qd(t,s)||s;Ys(t[r])&&Ys(i)?t[r]=Mo(t[r],i):Ys(i)?t[r]=Mo({},i):Hi(i)?t[r]=i.slice():t[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Es(arguments[i],n);return t}const Ay=(e,t,n,{allOwnKeys:i}={})=>(Es(t,(s,r)=>{n&&Mt(s)?e[r]=Ad(s,n):e[r]=s},{allOwnKeys:i}),e),Ty=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$y=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},qy=(e,t,n,i)=>{let s,r,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)o=s[r],(!i||i(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&Ba(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Oy=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Iy=e=>{if(!e)return null;if(Hi(e))return e;let t=e.length;if(!$d(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Py=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ba(Uint8Array)),Ry=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},Ny=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Dy=mn("HTMLFormElement"),Ly=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),lc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Uy=mn("RegExp"),Pd=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Es(n,(s,r)=>{let o;(o=t(s,r,e))!==!1&&(i[r]=o||s)}),Object.defineProperties(e,i)},My=e=>{Pd(e,(t,n)=>{if(Mt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Mt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},By=(e,t)=>{const n={},i=s=>{s.forEach(r=>{n[r]=!0})};return Hi(e)?i(e):i(String(e).split(t)),n},Fy=()=>{},Qy=(e,t)=>(e=+e,Number.isFinite(e)?e:t),oo="abcdefghijklmnopqrstuvwxyz",cc="0123456789",Rd={DIGIT:cc,ALPHA:oo,ALPHA_DIGIT:oo+oo.toUpperCase()+cc},Hy=(e=16,t=Rd.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function jy(e){return!!(e&&Mt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Vy=e=>{const t=new Array(10),n=(i,s)=>{if(Mr(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const r=Hi(i)?[]:{};return Es(i,(o,l)=>{const c=n(o,s+1);!_s(c)&&(r[l]=c)}),t[s]=void 0,r}}return i};return n(e,0)},Wy=mn("AsyncFunction"),Gy=e=>e&&(Mr(e)||Mt(e))&&Mt(e.then)&&Mt(e.catch),M={isArray:Hi,isArrayBuffer:Td,isBuffer:my,isFormData:Cy,isArrayBufferView:yy,isString:gy,isNumber:$d,isBoolean:_y,isObject:Mr,isPlainObject:Ys,isUndefined:_s,isDate:vy,isFile:by,isBlob:wy,isRegExp:Uy,isFunction:Mt,isStream:xy,isURLSearchParams:Sy,isTypedArray:Py,isFileList:ky,forEach:Es,merge:Mo,extend:Ay,trim:Ey,stripBOM:Ty,inherits:$y,toFlatObject:qy,kindOf:Lr,kindOfTest:mn,endsWith:Oy,toArray:Iy,forEachEntry:Ry,matchAll:Ny,isHTMLForm:Dy,hasOwnProperty:lc,hasOwnProp:lc,reduceDescriptors:Pd,freezeMethods:My,toObjectSet:By,toCamelCase:Ly,noop:Fy,toFiniteNumber:Qy,findKey:qd,global:Od,isContextDefined:Id,ALPHABET:Rd,generateString:Hy,isSpecCompliantForm:jy,toJSONObject:Vy,isAsyncFn:Wy,isThenable:Gy};function Te(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}M.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Nd=Te.prototype,Dd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Dd[e]={value:e}});Object.defineProperties(Te,Dd);Object.defineProperty(Nd,"isAxiosError",{value:!0});Te.from=(e,t,n,i,s,r)=>{const o=Object.create(Nd);return M.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Te.call(o,e.message,t,n,i,s),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const Yy=null;function Bo(e){return M.isPlainObject(e)||M.isArray(e)}function Ld(e){return M.endsWith(e,"[]")?e.slice(0,-2):e}function uc(e,t,n){return e?e.concat(t).map(function(s,r){return s=Ld(s),!n&&r?"["+s+"]":s}).join(n?".":""):t}function zy(e){return M.isArray(e)&&!e.some(Bo)}const Ky=M.toFlatObject(M,{},null,function(t){return/^is[A-Z]/.test(t)});function Br(e,t,n){if(!M.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,A){return!M.isUndefined(A[S])});const i=n.metaTokens,s=n.visitor||d,r=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(t);if(!M.isFunction(s))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(M.isDate(y))return y.toISOString();if(!c&&M.isBlob(y))throw new Te("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(y)||M.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,S,A){let N=y;if(y&&!A&&typeof y=="object"){if(M.endsWith(S,"{}"))S=i?S:S.slice(0,-2),y=JSON.stringify(y);else if(M.isArray(y)&&zy(y)||(M.isFileList(y)||M.endsWith(S,"[]"))&&(N=M.toArray(y)))return S=Ld(S),N.forEach(function(J,oe){!(M.isUndefined(J)||J===null)&&t.append(o===!0?uc([S],oe,r):o===null?S:S+"[]",u(J))}),!1}return Bo(y)?!0:(t.append(uc(A,S,r),u(y)),!1)}const h=[],f=Object.assign(Ky,{defaultVisitor:d,convertValue:u,isVisitable:Bo});function m(y,S){if(!M.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(y),M.forEach(y,function(N,F){(!(M.isUndefined(N)||N===null)&&s.call(t,N,M.isString(F)?F.trim():F,S,f))===!0&&m(N,S?S.concat(F):[F])}),h.pop()}}if(!M.isObject(e))throw new TypeError("data must be an object");return m(e),t}function dc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Fa(e,t){this._pairs=[],e&&Br(e,this,t)}const Ud=Fa.prototype;Ud.append=function(t,n){this._pairs.push([t,n])};Ud.toString=function(t){const n=t?function(i){return t.call(this,i,dc)}:dc;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Jy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Md(e,t,n){if(!t)return e;const i=n&&n.encode||Jy,s=n&&n.serialize;let r;if(s?r=s(t,n):r=M.isURLSearchParams(t)?t.toString():new Fa(t,n).toString(i),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class hc{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){M.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Bd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xy=typeof URLSearchParams<"u"?URLSearchParams:Fa,Zy=typeof FormData<"u"?FormData:null,eg=typeof Blob<"u"?Blob:null,tg={isBrowser:!0,classes:{URLSearchParams:Xy,FormData:Zy,Blob:eg},protocols:["http","https","file","blob","url","data"]},Fd=typeof window<"u"&&typeof document<"u",ng=(e=>Fd&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),ig=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fd,hasStandardBrowserEnv:ng,hasStandardBrowserWebWorkerEnv:ig},Symbol.toStringTag,{value:"Module"})),an={...sg,...tg};function rg(e,t){return Br(e,new an.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,r){return an.isNode&&M.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function og(e){return M.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ag(e){const t={},n=Object.keys(e);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],t[r]=e[r];return t}function Qd(e){function t(n,i,s,r){let o=n[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=r>=n.length;return o=!o&&M.isArray(s)?s.length:o,c?(M.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!l):((!s[o]||!M.isObject(s[o]))&&(s[o]=[]),t(n,i,s[o],r)&&M.isArray(s[o])&&(s[o]=ag(s[o])),!l)}if(M.isFormData(e)&&M.isFunction(e.entries)){const n={};return M.forEachEntry(e,(i,s)=>{t(og(i),s,n,0)}),n}return null}function lg(e,t,n){if(M.isString(e))try{return(t||JSON.parse)(e),M.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const As={transitional:Bd,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,r=M.isObject(t);if(r&&M.isHTMLForm(t)&&(t=new FormData(t)),M.isFormData(t))return s?JSON.stringify(Qd(t)):t;if(M.isArrayBuffer(t)||M.isBuffer(t)||M.isStream(t)||M.isFile(t)||M.isBlob(t))return t;if(M.isArrayBufferView(t))return t.buffer;if(M.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return rg(t,this.formSerializer).toString();if((l=M.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Br(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||s?(n.setContentType("application/json",!1),lg(t)):t}],transformResponse:[function(t){const n=this.transitional||As.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&M.isString(t)&&(i&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Te.from(l,Te.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],e=>{As.headers[e]={}});const cg=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ug=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!n||t[n]&&cg[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},fc=Symbol("internals");function Ki(e){return e&&String(e).trim().toLowerCase()}function zs(e){return e===!1||e==null?e:M.isArray(e)?e.map(zs):String(e)}function dg(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const hg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ao(e,t,n,i,s){if(M.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!M.isString(t)){if(M.isString(i))return t.indexOf(i)!==-1;if(M.isRegExp(i))return i.test(t)}}function fg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function pg(e,t){const n=M.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,r,o){return this[i].call(this,t,s,r,o)},configurable:!0})})}let Bt=class{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function r(l,c,u){const d=Ki(c);if(!d)throw new Error("header name must be a non-empty string");const h=M.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=zs(l))}const o=(l,c)=>M.forEach(l,(u,d)=>r(u,d,c));return M.isPlainObject(t)||t instanceof this.constructor?o(t,n):M.isString(t)&&(t=t.trim())&&!hg(t)?o(ug(t),n):t!=null&&r(n,t,i),this}get(t,n){if(t=Ki(t),t){const i=M.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return dg(s);if(M.isFunction(n))return n.call(this,s,i);if(M.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ki(t),t){const i=M.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||ao(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function r(o){if(o=Ki(o),o){const l=M.findKey(i,o);l&&(!n||ao(i,i[l],l,n))&&(delete i[l],s=!0)}}return M.isArray(t)?t.forEach(r):r(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const r=n[i];(!t||ao(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const n=this,i={};return M.forEach(this,(s,r)=>{const o=M.findKey(i,r);if(o){n[o]=zs(s),delete n[r];return}const l=t?fg(r):String(r).trim();l!==r&&delete n[r],n[l]=zs(s),i[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return M.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&M.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[fc]=this[fc]={accessors:{}}).accessors,s=this.prototype;function r(o){const l=Ki(o);i[l]||(pg(s,o),i[l]=!0)}return M.isArray(t)?t.forEach(r):r(t),this}};Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(Bt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});M.freezeMethods(Bt);function lo(e,t){const n=this||As,i=t||n,s=Bt.from(i.headers);let r=i.data;return M.forEach(e,function(l){r=l.call(n,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function Hd(e){return!!(e&&e.__CANCEL__)}function Ts(e,t,n){Te.call(this,e??"canceled",Te.ERR_CANCELED,t,n),this.name="CanceledError"}M.inherits(Ts,Te,{__CANCEL__:!0});function mg(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Te("Request failed with status code "+n.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const yg=an.hasStandardBrowserEnv?{write(e,t,n,i,s,r){const o=[e+"="+encodeURIComponent(t)];M.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),M.isString(i)&&o.push("path="+i),M.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _g(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function jd(e,t){return e&&!gg(t)?_g(e,t):t}const vg=an.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(r){let o=r;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){const l=M.isString(o)?s(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function bg(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wg(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,r=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=i[r];o||(o=u),n[s]=c,i[s]=u;let h=r,f=0;for(;h!==s;)f+=n[h++],h=h%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),u-o<t)return;const m=d&&u-d;return m?Math.round(f*1e3/m):void 0}}function pc(e,t){let n=0;const i=wg(50,250);return s=>{const r=s.loaded,o=s.lengthComputable?s.total:void 0,l=r-n,c=i(l),u=r<=o;n=r;const d={loaded:r,total:o,progress:o?r/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-r)/c:void 0,event:s};d[t?"download":"upload"]=!0,e(d)}}const kg=typeof XMLHttpRequest<"u",xg=kg&&function(e){return new Promise(function(n,i){let s=e.data;const r=Bt.from(e.headers).normalize();let{responseType:o,withXSRFToken:l}=e,c;function u(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let d;if(M.isFormData(s)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((d=r.getContentType())!==!1){const[S,...A]=d?d.split(";").map(N=>N.trim()).filter(Boolean):[];r.setContentType([S||"multipart/form-data",...A].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const S=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(S+":"+A))}const f=jd(e.baseURL,e.url);h.open(e.method.toUpperCase(),Md(f,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function m(){if(!h)return;const S=Bt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:S,config:e,request:h};mg(function(J){n(J),u()},function(J){i(J),u()},N),h=null}if("onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(m)},h.onabort=function(){h&&(i(new Te("Request aborted",Te.ECONNABORTED,e,h)),h=null)},h.onerror=function(){i(new Te("Network Error",Te.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let A=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const N=e.transitional||Bd;e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),i(new Te(A,N.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,e,h)),h=null},an.hasStandardBrowserEnv&&(l&&M.isFunction(l)&&(l=l(e)),l||l!==!1&&vg(f))){const S=e.xsrfHeaderName&&e.xsrfCookieName&&yg.read(e.xsrfCookieName);S&&r.set(e.xsrfHeaderName,S)}s===void 0&&r.setContentType(null),"setRequestHeader"in h&&M.forEach(r.toJSON(),function(A,N){h.setRequestHeader(N,A)}),M.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",pc(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",pc(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=S=>{h&&(i(!S||S.type?new Ts(null,e,h):S),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const y=bg(f);if(y&&an.protocols.indexOf(y)===-1){i(new Te("Unsupported protocol "+y+":",Te.ERR_BAD_REQUEST,e));return}h.send(s||null)})},Fo={http:Yy,xhr:xg};M.forEach(Fo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mc=e=>`- ${e}`,Cg=e=>M.isFunction(e)||e===null||e===!1,Vd={getAdapter:e=>{e=M.isArray(e)?e:[e];const{length:t}=e;let n,i;const s={};for(let r=0;r<t;r++){n=e[r];let o;if(i=n,!Cg(n)&&(i=Fo[(o=String(n)).toLowerCase()],i===void 0))throw new Te(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(mc).join(`
`):" "+mc(r[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Fo};function co(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ts(null,e)}function yc(e){return co(e),e.headers=Bt.from(e.headers),e.data=lo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vd.getAdapter(e.adapter||As.adapter)(e).then(function(i){return co(e),i.data=lo.call(e,e.transformResponse,i),i.headers=Bt.from(i.headers),i},function(i){return Hd(i)||(co(e),i&&i.response&&(i.response.data=lo.call(e,e.transformResponse,i.response),i.response.headers=Bt.from(i.response.headers))),Promise.reject(i)})}const gc=e=>e instanceof Bt?{...e}:e;function Ri(e,t){t=t||{};const n={};function i(u,d,h){return M.isPlainObject(u)&&M.isPlainObject(d)?M.merge.call({caseless:h},u,d):M.isPlainObject(d)?M.merge({},d):M.isArray(d)?d.slice():d}function s(u,d,h){if(M.isUndefined(d)){if(!M.isUndefined(u))return i(void 0,u,h)}else return i(u,d,h)}function r(u,d){if(!M.isUndefined(d))return i(void 0,d)}function o(u,d){if(M.isUndefined(d)){if(!M.isUndefined(u))return i(void 0,u)}else return i(void 0,d)}function l(u,d,h){if(h in t)return i(u,d);if(h in e)return i(void 0,u)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d)=>s(gc(u),gc(d),!0)};return M.forEach(Object.keys(Object.assign({},e,t)),function(d){const h=c[d]||s,f=h(e[d],t[d],d);M.isUndefined(f)&&h!==l||(n[d]=f)}),n}const Wd="1.6.8",Qa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qa[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const _c={};Qa.transitional=function(t,n,i){function s(r,o){return"[Axios v"+Wd+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,l)=>{if(t===!1)throw new Te(s(o," has been removed"+(n?" in "+n:"")),Te.ERR_DEPRECATED);return n&&!_c[o]&&(_c[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,l):!0}};function Sg(e,t,n){if(typeof e!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const r=i[s],o=t[r];if(o){const l=e[r],c=l===void 0||o(l,r,e);if(c!==!0)throw new Te("option "+r+" must be "+c,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+r,Te.ERR_BAD_OPTION)}}const Qo={assertOptions:Sg,validators:Qa},In=Qo.validators;let ai=class{constructor(t){this.defaults=t,this.interceptors={request:new hc,response:new hc}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ri(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:r}=n;i!==void 0&&Qo.assertOptions(i,{silentJSONParsing:In.transitional(In.boolean),forcedJSONParsing:In.transitional(In.boolean),clarifyTimeoutError:In.transitional(In.boolean)},!1),s!=null&&(M.isFunction(s)?n.paramsSerializer={serialize:s}:Qo.assertOptions(s,{encode:In.function,serialize:In.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&M.merge(r.common,r[n.method]);r&&M.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),n.headers=Bt.concat(o,r);const l=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(c=c&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let d,h=0,f;if(!c){const y=[yc.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,u),f=y.length,d=Promise.resolve(n);h<f;)d=d.then(y[h++],y[h++]);return d}f=l.length;let m=n;for(h=0;h<f;){const y=l[h++],S=l[h++];try{m=y(m)}catch(A){S.call(this,A);break}}try{d=yc.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=Ri(this.defaults,t);const n=jd(t.baseURL,t.url);return Md(n,t.params,t.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(t){ai.prototype[t]=function(n,i){return this.request(Ri(i||{},{method:t,url:n,data:(i||{}).data}))}});M.forEach(["post","put","patch"],function(t){function n(i){return function(r,o,l){return this.request(Ri(l||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ai.prototype[t]=n(),ai.prototype[t+"Form"]=n(!0)});let Eg=class Gd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(l=>{i.subscribe(l),r=l}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},t(function(r,o,l){i.reason||(i.reason=new Ts(r,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Gd(function(s){t=s}),cancel:t}}};function Ag(e){return function(n){return e.apply(null,n)}}function Tg(e){return M.isObject(e)&&e.isAxiosError===!0}const Ho={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ho).forEach(([e,t])=>{Ho[t]=e});function Yd(e){const t=new ai(e),n=Ad(ai.prototype.request,t);return M.extend(n,ai.prototype,t,{allOwnKeys:!0}),M.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Yd(Ri(e,s))},n}const Xe=Yd(As);Xe.Axios=ai;Xe.CanceledError=Ts;Xe.CancelToken=Eg;Xe.isCancel=Hd;Xe.VERSION=Wd;Xe.toFormData=Br;Xe.AxiosError=Te;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=Ag;Xe.isAxiosError=Tg;Xe.mergeConfig=Ri;Xe.AxiosHeaders=Bt;Xe.formToJSON=e=>Qd(M.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=Vd.getAdapter;Xe.HttpStatusCode=Ho;Xe.default=Xe;const{Axios:EI,AxiosError:AI,CanceledError:TI,isCancel:$I,CancelToken:qI,VERSION:OI,all:II,Cancel:PI,isAxiosError:RI,spread:NI,toFormData:DI,AxiosHeaders:LI,HttpStatusCode:An,formToJSON:UI,getAdapter:MI,mergeConfig:BI}=Xe,xt=Rr("auth",()=>{const e=j(),t=j(),n=localStorage.getItem("refreshToken");n&&(e.value=n);const i=r=>{e.value=r,r?localStorage.setItem("refreshToken",r):localStorage.removeItem("refreshToken")};return{accessToken:t,refreshToken:e,storeRefreshToken:i,clear:()=>{console.warn("Clearing tokens"),i(null),t.value=null}}}),Ha=location.hostname==="localhost"?"http://localhost:3005":"https://bitd-vtt-server-production.up.railway.app";console.log("BASE_URL:",Ha);const _t=Xe.create({baseURL:Ha,timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});function $g(){qg()}function qg(){_t.interceptors.request.use(async e=>(e||(e={}),e.headers.Authorization=`Bearer ${xt().accessToken}`,e)),_t.interceptors.response.use(e=>e,async e=>{var n,i,s,r;const t=["/auth/token","/account/login","/account/register"];if(((n=e.response)==null?void 0:n.status)===An.Unauthorized&&!t.includes(e.config.url)){if((i=e.config.url)!=null&&i.includes("/auth/token"))return xt().clear(),Kt.push("/login"),Promise.reject("Invalid refresh token");if(!xt().refreshToken)return Promise.reject(((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"No refresh token found");await zd();const o=e.config;return o.headers.Authorization=`Bearer ${xt().accessToken}`,_t(o)}return Promise.reject(e)})}async function zd(){let e;try{console.log("@fetchAccessToken: refreshToken:",xt().refreshToken),e=await _t.put("/auth/token",{refreshToken:xt().refreshToken})}catch{console.error("Invalid refresh token"),ll();return}xt().accessToken=e.data.accessToken}const jo=[{id:"791e4a6b-8f2e-41b2-8410-09fdb69d22e2",name:"Crystal",author:"Icons8",source:"https://icons8.com",url:"/images/portrait-images/icons8-crystal-100.png",commonColor:"#8E3E63"},{id:"762c4875-c258-443a-8d88-adeaab82b31c",name:"Joker",author:"Icons8",source:"https://icons8.com",url:"/images/portrait-images/icons8-joker-100.png",commonColor:"#D2649A"},{id:"a1bee44a-c856-4f54-b665-4de8c278d117",name:"Battle",author:"Icons8",source:"https://icons8.com",url:"/images/portrait-images/icons8-battle-100.png",commonColor:"#577B8D"},{id:"7d5f18bc-a32d-4aca-a51d-507b827c8683",name:"Pawn",author:"Icons8",source:"https://icons8.com",url:"/images/portrait-images/icons8-pawn-100.png",commonColor:"#40A578"},{id:"5895f6e3-05b7-42e4-9b5f-19bb3d4ca33e",name:"Rook",author:"Icons8",source:"https://icons8.com",url:"/images/portrait-images/icons8-rook-100.png",commonColor:"#A91D3A"}],Ue=Rr("user",()=>{const e=j(),t=j(),n=j(!0),i=j(),s=j([]),r=j([...jo]);return{id:e,username:t,portrait:i,isGuest:n,games:s,clear:()=>{e.value=null,t.value=null,i.value=null,n.value=!0,s.value=[]},portraits:r}}),Me=Rr("game",()=>{const e=j(null),t=()=>{e.value=null},n=X(()=>{var i;return(i=e.value)==null?void 0:i.players[Ue().id]});return{game:e,userPlayer:n,clear:t}});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Og=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i[r]=s[r])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ig=Object.prototype.hasOwnProperty;function Vo(e,t){return Ig.call(e,t)}function Wo(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var s in e)Vo(e,s)&&i.push(s);return i}function It(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Go(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function ti(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Kd(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Yo(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Yo(e[t]))return!0}else if(typeof e=="object"){for(var i=Wo(e),s=i.length,r=0;r<s;r++)if(Yo(e[i[r]]))return!0}}return!1}function vc(e,t){var n=[e];for(var i in t){var s=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof s<"u"&&n.push(i+": "+s)}return n.join(`
`)}var Jd=function(e){Og(t,e);function t(n,i,s,r,o){var l=this.constructor,c=e.call(this,vc(n,{name:i,index:s,operation:r,tree:o}))||this;return c.name=i,c.index=s,c.operation=r,c.tree=o,Object.setPrototypeOf(c,l.prototype),c.message=vc(n,{name:i,index:s,operation:r,tree:o}),c}return t}(Error),ze=Jd,Pg=It,xi={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=pr(n,this.path);i&&(i=It(i));var s=li(n,{op:"remove",path:this.from}).removed;return li(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=pr(n,this.from);return li(n,{op:"add",path:this.path,value:It(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:vs(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Rg={add:function(e,t,n){return Go(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:xi.move,copy:xi.copy,test:xi.test,_get:xi._get};function pr(e,t){if(t=="")return e;var n={op:"_get",path:t};return li(e,n),n.value}function li(e,t,n,i,s,r){if(n===void 0&&(n=!1),i===void 0&&(i=!0),s===void 0&&(s=!0),r===void 0&&(r=0),n&&(typeof n=="function"?n(t,0,e,t.path):mr(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=pr(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=vs(e,t.value),o.test===!1)throw new ze("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ze("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,e);return o}}else{i||(e=It(e));var l=t.path||"",c=l.split("/"),u=e,d=1,h=c.length,f=void 0,m=void 0,y=void 0;for(typeof n=="function"?y=n:y=mr;;){if(m=c[d],m&&m.indexOf("~")!=-1&&(m=Kd(m)),s&&(m=="__proto__"||m=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[m]===void 0?f=c.slice(0,d).join("/"):d==h-1&&(f=t.path),f!==void 0&&y(t,0,e,f)),d++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!Go(m))throw new ze("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",r,t,e);Go(m)&&(m=~~m)}if(d>=h){if(n&&t.op==="add"&&m>u.length)throw new ze("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",r,t,e);var o=Rg[t.op].call(t,u,m,e);if(o.test===!1)throw new ze("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o}}else if(d>=h){var o=xi[t.op].call(t,u,m,e);if(o.test===!1)throw new ze("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return o}if(u=u[m],n&&d<h&&(!u||typeof u!="object"))throw new ze("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",r,t,e)}}}function Fr(e,t,n,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new ze("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=It(e));for(var r=new Array(t.length),o=0,l=t.length;o<l;o++)r[o]=li(e,t[o],n,!0,s,o),e=r[o].newDocument;return r.newDocument=e,r}function Ng(e,t,n){var i=li(e,t);if(i.test===!1)throw new ze("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function mr(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new ze("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(xi[e.op]){if(typeof e.path!="string")throw new ze("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ze('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ze("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ze("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Yo(e.value))throw new ze("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,r=i.split("/").length;if(s!==r+1&&s!==r)throw new ze("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new ze("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},l=Xd([o],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new ze("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ze("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Xd(e,t,n){try{if(!Array.isArray(e))throw new ze("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Fr(It(t),It(e),n||!0);else{n=n||mr;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(s){if(s instanceof ze)return s;throw s}}function vs(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),s,r,o;if(n&&i){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!vs(e[s],t[s]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(e);if(r=l.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!t.hasOwnProperty(l[s]))return!1;for(s=r;s--!==0;)if(o=l[s],!vs(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Dg=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ze,_areEquals:vs,applyOperation:li,applyPatch:Fr,applyReducer:Ng,deepClone:Pg,getValueByPointer:pr,validate:Xd,validator:mr},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ja=new WeakMap,Lg=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Ug=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Mg(e){return ja.get(e)}function Bg(e,t){return e.observers.get(t)}function Fg(e,t){e.observers.delete(t.callback)}function Qg(e,t){t.unobserve()}function Hg(e,t){var n=[],i,s=Mg(e);if(!s)s=new Lg(e),ja.set(e,s);else{var r=Bg(s,t);i=r&&r.observer}if(i)return i;if(i={},s.value=It(e),t){i.callback=t,i.next=null;var o=function(){zo(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=e,i.unobserve=function(){zo(i),clearTimeout(i.next),Fg(s,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new Ug(t,i)),i}function zo(e,t){t===void 0&&(t=!1);var n=ja.get(e.object);Va(n.value,e.object,e.patches,"",t),e.patches.length&&Fr(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Va(e,t,n,i,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var r=Wo(t),o=Wo(e),l=!1,c=o.length-1;c>=0;c--){var u=o[c],d=e[u];if(Vo(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[u];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?Va(d,h,n,i+"/"+ti(u),s):d!==h&&(s&&n.push({op:"test",path:i+"/"+ti(u),value:It(d)}),n.push({op:"replace",path:i+"/"+ti(u),value:It(h)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:i+"/"+ti(u),value:It(d)}),n.push({op:"remove",path:i+"/"+ti(u)}),l=!0):(s&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!l&&r.length==o.length))for(var c=0;c<r.length;c++){var u=r[c];!Vo(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+ti(u),value:It(t[u])})}}}function jg(e,t,n){n===void 0&&(n=!1);var i=[];return Va(e,t,i,"",n),i}const Vg=Object.freeze(Object.defineProperty({__proto__:null,compare:jg,generate:zo,observe:Hg,unobserve:Qg},Symbol.toStringTag,{value:"Module"}));Object.assign({},Dg,Vg,{JsonPatchError:Jd,deepClone:It,escapePathComponent:ti,unescapePathComponent:Kd});const hn=Object.create(null);hn.open="0";hn.close="1";hn.ping="2";hn.pong="3";hn.message="4";hn.upgrade="5";hn.noop="6";const Ks=Object.create(null);Object.keys(hn).forEach(e=>{Ks[hn[e]]=e});const Ko={type:"error",data:"parser error"},Zd=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",eh=typeof ArrayBuffer=="function",th=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Wa=({type:e,data:t},n,i)=>Zd&&t instanceof Blob?n?i(t):bc(t,i):eh&&(t instanceof ArrayBuffer||th(t))?n?i(t):bc(new Blob([t]),i):i(hn[e]+(t||"")),bc=(e,t)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];t("b"+(i||""))},n.readAsDataURL(e)};function wc(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let uo;function Wg(e,t){if(Zd&&e.data instanceof Blob)return e.data.arrayBuffer().then(wc).then(t);if(eh&&(e.data instanceof ArrayBuffer||th(e.data)))return t(wc(e.data));Wa(e,!1,n=>{uo||(uo=new TextEncoder),t(uo.encode(n))})}const kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ts=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<kc.length;e++)ts[kc.charCodeAt(e)]=e;const Gg=e=>{let t=e.length*.75,n=e.length,i,s=0,r,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(i=0;i<n;i+=4)r=ts[e.charCodeAt(i)],o=ts[e.charCodeAt(i+1)],l=ts[e.charCodeAt(i+2)],c=ts[e.charCodeAt(i+3)],d[s++]=r<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},Yg=typeof ArrayBuffer=="function",Ga=(e,t)=>{if(typeof e!="string")return{type:"message",data:nh(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:zg(e.substring(1),t)}:Ks[n]?e.length>1?{type:Ks[n],data:e.substring(1)}:{type:Ks[n]}:Ko},zg=(e,t)=>{if(Yg){const n=Gg(e);return nh(n,t)}else return{base64:!0,data:e}},nh=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ih="",Kg=(e,t)=>{const n=e.length,i=new Array(n);let s=0;e.forEach((r,o)=>{Wa(r,!1,l=>{i[o]=l,++s===n&&t(i.join(ih))})})},Jg=(e,t)=>{const n=e.split(ih),i=[];for(let s=0;s<n.length;s++){const r=Ga(n[s],t);if(i.push(r),r.type==="error")break}return i};function Xg(){return new TransformStream({transform(e,t){Wg(e,n=>{const i=n.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let ho;function Ls(e){return e.reduce((t,n)=>t+n.length,0)}function Us(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let s=0;s<t;s++)n[s]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function Zg(e,t){ho||(ho=new TextDecoder);const n=[];let i=0,s=-1,r=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(i===0){if(Ls(n)<1)break;const c=Us(n,1);r=(c[0]&128)===128,s=c[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(Ls(n)<2)break;const c=Us(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),i=3}else if(i===2){if(Ls(n)<8)break;const c=Us(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Ko);break}s=d*Math.pow(2,32)+u.getUint32(4),i=3}else{if(Ls(n)<s)break;const c=Us(n,s);l.enqueue(Ga(r?c:ho.decode(c),t)),i=0}if(s===0||s>e){l.enqueue(Ko);break}}}})}const sh=4;function nt(e){if(e)return e_(e)}function e_(e){for(var t in nt.prototype)e[t]=nt.prototype[t];return e}nt.prototype.on=nt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};nt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};nt.prototype.off=nt.prototype.removeListener=nt.prototype.removeAllListeners=nt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,s=0;s<n.length;s++)if(i=n[s],i===t||i.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};nt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,s=n.length;i<s;++i)n[i].apply(this,t)}return this};nt.prototype.emitReserved=nt.prototype.emit;nt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};nt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Rt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function rh(e,...t){return t.reduce((n,i)=>(e.hasOwnProperty(i)&&(n[i]=e[i]),n),{})}const t_=Rt.setTimeout,n_=Rt.clearTimeout;function Qr(e,t){t.useNativeTimers?(e.setTimeoutFn=t_.bind(Rt),e.clearTimeoutFn=n_.bind(Rt)):(e.setTimeoutFn=Rt.setTimeout.bind(Rt),e.clearTimeoutFn=Rt.clearTimeout.bind(Rt))}const i_=1.33;function s_(e){return typeof e=="string"?r_(e):Math.ceil((e.byteLength||e.size)*i_)}function r_(e){let t=0,n=0;for(let i=0,s=e.length;i<s;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}function o_(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function a_(e){let t={},n=e.split("&");for(let i=0,s=n.length;i<s;i++){let r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class l_ extends Error{constructor(t,n,i){super(t),this.description=n,this.context=i,this.type="TransportError"}}class Ya extends nt{constructor(t){super(),this.writable=!1,Qr(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,i){return super.emitReserved("error",new l_(t,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Ga(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=o_(t);return n.length?"?"+n:""}}const oh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Jo=64,c_={};let xc=0,Ms=0,Cc;function Sc(e){let t="";do t=oh[e%Jo]+t,e=Math.floor(e/Jo);while(e>0);return t}function ah(){const e=Sc(+new Date);return e!==Cc?(xc=0,Cc=e):e+"."+Sc(xc++)}for(;Ms<Jo;Ms++)c_[oh[Ms]]=Ms;let lh=!1;try{lh=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const u_=lh;function ch(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||u_))return new XMLHttpRequest}catch{}if(!t)try{return new Rt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function d_(){}const h_=function(){return new ch({xdomain:!1}).responseType!=null}();class f_ extends Ya{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}const n=t&&t.forceBase64;this.supportsBinary=h_&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Jg(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Kg(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=ah()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new cn(this.uri(),t)}doWrite(t,n){const i=this.request({method:"POST",data:t});i.on("success",n),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=t}}class cn extends nt{constructor(t,n){super(),Qr(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=rh(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new ch(n);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=cn.requestsCount++,cn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=d_,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete cn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}cn.requestsCount=0;cn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ec);else if(typeof addEventListener=="function"){const e="onpagehide"in Rt?"pagehide":"unload";addEventListener(e,Ec,!1)}}function Ec(){for(let e in cn.requests)cn.requests.hasOwnProperty(e)&&cn.requests[e].abort()}const za=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Bs=Rt.WebSocket||Rt.MozWebSocket,Ac=!0,p_="arraybuffer",Tc=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class m_ extends Ya{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,i=Tc?{}:rh(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Ac&&!Tc?n?new Bs(t,n):new Bs(t):new Bs(t,n,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],s=n===t.length-1;Wa(i,this.supportsBinary,r=>{const o={};try{Ac&&this.ws.send(r)}catch{}s&&za(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=ah()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Bs}}class y_ extends Ya{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=Zg(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(n).getReader(),s=Xg();s.readable.pipeTo(t.writable),this.writer=s.writable.getWriter();const r=()=>{i.read().then(({done:l,value:c})=>{l||(this.onPacket(c),r())}).catch(l=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=t[n],s=n===t.length-1;this.writer.write(i).then(()=>{s&&za(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const g_={websocket:m_,webtransport:y_,polling:f_},__=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,v_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xo(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");n!=-1&&i!=-1&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let s=__.exec(e||""),r={},o=14;for(;o--;)r[v_[o]]=s[o]||"";return n!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=b_(r,r.path),r.queryKey=w_(r,r.query),r}function b_(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function w_(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(n[s]=r)}),n}let uh=class bi extends nt{constructor(t,n={}){super(),this.binaryType=p_,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=Xo(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=Xo(n.host).host),Qr(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=a_(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=sh,n.transport=t,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new g_[t](i)}open(){let t;if(this.opts.rememberUpgrade&&bi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),i=!1;bi.priorWebsocketSuccess=!1;const s=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!i)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;bi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function r(){i||(i=!0,d(),n.close(),n=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=n.name,r(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function u(h){n&&h.name!==n.name&&r()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(this.readyState="open",bi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(n+=s_(s)),i>0&&n>this.maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}write(t,n,i){return this.sendPacket("message",t,n,i),this}send(t,n,i){return this.sendPacket("message",t,n,i),this}sendPacket(t,n,i,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:n,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){bi.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let i=0;const s=t.length;for(;i<s;i++)~this.transports.indexOf(t[i])&&n.push(t[i]);return n}};uh.protocol=sh;function k_(e,t="",n){let i=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),i=Xo(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}const x_=typeof ArrayBuffer=="function",C_=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,dh=Object.prototype.toString,S_=typeof Blob=="function"||typeof Blob<"u"&&dh.call(Blob)==="[object BlobConstructor]",E_=typeof File=="function"||typeof File<"u"&&dh.call(File)==="[object FileConstructor]";function Ka(e){return x_&&(e instanceof ArrayBuffer||C_(e))||S_&&e instanceof Blob||E_&&e instanceof File}function Js(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,i=e.length;n<i;n++)if(Js(e[n]))return!0;return!1}if(Ka(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Js(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Js(e[n]))return!0;return!1}function A_(e){const t=[],n=e.data,i=e;return i.data=Zo(n,t),i.attachments=t.length,{packet:i,buffers:t}}function Zo(e,t){if(!e)return e;if(Ka(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=Zo(e[i],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Zo(e[i],t));return n}return e}function T_(e,t){return e.data=ea(e.data,t),delete e.attachments,e}function ea(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ea(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ea(e[n],t));return e}const $_=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],q_=5;var Ae;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ae||(Ae={}));class O_{constructor(t){this.replacer=t}encode(t){return(t.type===Ae.EVENT||t.type===Ae.ACK)&&Js(t)?this.encodeAsBinary({type:t.type===Ae.EVENT?Ae.BINARY_EVENT:Ae.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Ae.BINARY_EVENT||t.type===Ae.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=A_(t),i=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(i),s}}function $c(e){return Object.prototype.toString.call(e)==="[object Object]"}class Ja extends nt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const i=n.type===Ae.BINARY_EVENT;i||n.type===Ae.BINARY_ACK?(n.type=i?Ae.EVENT:Ae.ACK,this.reconstructor=new I_(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ka(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const i={type:Number(t.charAt(0))};if(Ae[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ae.BINARY_EVENT||i.type===Ae.BINARY_ACK){const r=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(r,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););i.nsp=t.substring(r,n)}else i.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const r=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}i.id=Number(t.substring(r,n+1))}if(t.charAt(++n)){const r=this.tryParse(t.substr(n));if(Ja.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Ae.CONNECT:return $c(n);case Ae.DISCONNECT:return n===void 0;case Ae.CONNECT_ERROR:return typeof n=="string"||$c(n);case Ae.EVENT:case Ae.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&$_.indexOf(n[0])===-1);case Ae.ACK:case Ae.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class I_{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=T_(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const P_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ja,Encoder:O_,get PacketType(){return Ae},protocol:q_},Symbol.toStringTag,{value:"Module"}));function Ht(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const R_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hh extends nt{constructor(t,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ht(t,"open",this.onopen.bind(this)),Ht(t,"packet",this.onpacket.bind(this)),Ht(t,"error",this.onerror.bind(this)),Ht(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(R_.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Ae.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,l=n.pop();this._registerAckCallback(o,l),i.id=o}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(r),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((i,s)=>{const r=(o,l)=>o?s(o):i(l);r.withError=!0,n.push(r),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ae.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ae.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ae.EVENT:case Ae.BINARY_EVENT:this.onevent(t);break;case Ae.ACK:case Ae.BINARY_ACK:this.onack(t);break;case Ae.DISCONNECT:this.ondisconnect();break;case Ae.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let i=!1;return function(...s){i||(i=!0,n.packet({type:Ae.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ae.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(t===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,t.data)}}}function ji(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ji.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ji.prototype.reset=function(){this.attempts=0};ji.prototype.setMin=function(e){this.ms=e};ji.prototype.setMax=function(e){this.max=e};ji.prototype.setJitter=function(e){this.jitter=e};class ta extends nt{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qr(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ji({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||P_;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new uh(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=Ht(n,"open",function(){i.onopen(),t&&t()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Ht(n,"error",r);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ht(t,"ping",this.onping.bind(this)),Ht(t,"data",this.ondata.bind(this)),Ht(t,"error",this.onerror.bind(this)),Ht(t,"close",this.onclose.bind(this)),Ht(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){za(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new hh(this,t,n),this.nsps[t]=i),i}_destroy(t){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let i=0;i<n.length;i++)this.engine.write(n[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ji={};function Xs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=k_(e,t.path||"/socket.io"),i=n.source,s=n.id,r=n.path,o=Ji[s]&&r in Ji[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new ta(i,t):(Ji[s]||(Ji[s]=new ta(i,t)),c=Ji[s]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Xs,{Manager:ta,Socket:hh,io:Xs,connect:Xs});const N_={},D_={class:"modal"},L_={class:"modal__content"};function U_(e,t){return _(),C("div",D_,[Ii(e.$slots,"header",{},void 0),a("div",L_,[Ii(e.$slots,"content",{},void 0)])])}const ft=de(N_,[["render",U_],["__scopeId","data-v-16f47290"]]),M_=e=>($e("data-v-b77cb2fd"),e=e(),qe(),e),B_={class:"modal__header"},F_=M_(()=>a("i",{class:"fas fa-times"},null,-1)),Q_=[F_],H_=ue({__name:"ModalHeader",props:{closeButton:Boolean,closeButtonAction:Function},setup(e){const t=e;function n(){t.closeButtonAction?t.closeButtonAction():K.close()}return(i,s)=>(_(),C("div",B_,[Ii(i.$slots,"default",{},void 0),e.closeButton?(_(),C("button",{key:0,class:"btn--icon",onClick:n},Q_)):Y("",!0)]))}}),pt=de(H_,[["__scopeId","data-v-b77cb2fd"]]),j_=e=>($e("data-v-771211b0"),e=e(),qe(),e),V_={class:"info"},W_=["innerHTML"],G_=j_(()=>a("span",null,"Okay",-1)),Y_=[G_],z_=ue({__name:"InfoModal",props:{title:{},message:{}},setup(e){const t=e;return(n,i)=>(_(),ce(ft,null,{header:W(()=>[$(pt,null,{default:W(()=>[a("h2",null,U(t.title),1)]),_:1})]),content:W(()=>[a("div",V_,[a("p",{innerHTML:t.message},null,8,W_),a("button",{class:"btn mobile-full-width",onClick:i[0]||(i[0]=s=>H(K).close())},Y_)])]),_:1}))}}),Hr=de(z_,[["__scopeId","data-v-771211b0"]]);let Qt=null;function K_(e){console.log("@game-controller: connectToGame"),K.open(Qi),Qt&&(Qt.disconnect(),Qt=null);const t={query:{gameId:e,token:xt().refreshToken}};Qt=Xs(Ha,t),Qt.on("connect",Z_),Qt.on("disconnect",ev),Qt.on("patch",X_),Qt.on("error",tv),K.close()}function J_(){Qt&&(Qt.disconnect(),Qt=null,Me().clear())}function X_(e){try{const{patches:t}=e;console.log("patch:",t),Me().game=Fr(Me().game||{},t).newDocument}catch(t){console.error("Failed to patch:",t);return}}function Z_(){console.log("onOpen")}function ev(){console.log("onClose"),K.open(Hr,{title:"Disconnected",message:"You have been disconnected from the game. Please try to reconnect.",onClose:()=>{K.open(Qi),location.reload()}})}function tv(e){console.log("onError:",e),K.open(Hr,{title:"Network Error",message:"A network error occurred."})}async function ke(e){var t;await _t.patch(`/game/${(t=Me().game)==null?void 0:t._id}`,e)}const Xa=[{id:"46c018c0-de33-4bd2-9024-71548b22db7e",name:"Forest",author:"Dan Meyers",source:"https://unsplash.com/photos/tall-trees-wB6B3AqXjy0",url:"/images/cover-images/forest.jpg",commonColor:"#8b7d73"},{id:"9131e281-184e-4e2d-8994-8536f9d3c0d0",name:"Forest 2",author:"Simon Berger",source:"https://unsplash.com/photos/grayscale-photo-of-trees-and-pathway-rydQVdwcgUQ",url:"/images/cover-images/forest-2.jpg",commonColor:"#7f7f7f"},{id:"2e2ec06d-97b4-4cce-b88d-a58c10b8bef8",name:"Castle",author:"Cederic Vandenberghe",source:"https://unsplash.com/photos/closeup-photo-of-castle-with-mist-21DP3hytVHw",url:"/images/cover-images/castle.jpg",commonColor:"#3f7690"},{id:"230ecd94-c69b-4444-a7e2-2585a2652051",name:"Broadsword",author:"Jonathan Kemper",source:"https://unsplash.com/photos/brown-wooden-handle-bar-on-brown-wooden-table-4_ZvmLAeIZk",url:"/images/cover-images/broadsword.jpg",commonColor:"#6c4c34"},{id:"16761f54-5c0c-4f56-8274-f04af8e7f33e",name:"Warband",author:"Hasan Almasi",source:"https://unsplash.com/photos/people-gathering-on-street-during-nighttime-OwqLxCvoVxI",url:"/images/cover-images/warband.jpg",commonColor:"#c34e33"},{id:"8df23582-b58f-4120-b407-528c3d1d1ae8",name:"Cathedral",author:"John Towner",source:"https://unsplash.com/photos/low-angle-photography-of-building-glass-window-pDKoVuXYKxU",url:"/images/cover-images/cathedral.jpg",commonColor:"#8f836f"},{id:"02c928bb-d011-42ee-8722-fd7856e60100",name:"Ghost Field",author:"Pawel Czerwinski",source:"https://unsplash.com/photos/water-splash-in-close-up-photography-BPrk2cOoCq8",url:"/images/cover-images/ghost-field.jpg",commonColor:"#5976a5"},{id:"116bb45e-7ea7-4e81-83fb-5cd7af65794c",name:"Brightstone",author:"Rob Jackson",source:"https://unsplash.com/photos/photo-of-grey-brick-building-_6HuhLHZ1v8",url:"/images/cover-images/brightstone.jpg",commonColor:"#4f5fb2"},{id:"3c2911d4-21da-4af3-a9aa-8fb2a5289300",name:"Church of Ecstasy",author:"David Knieradl",source:"https://unsplash.com/photos/a-set-of-stairs-leading-up-to-a-large-window-TGCDipvrP-I",url:"/images/cover-images/church-of-ecstasy.jpg",commonColor:"#5176ad"},{id:"a4fa66a2-cb5b-4491-9dab-39bc6e49b426",name:"Alley",author:"Arno Senoner",source:"https://unsplash.com/photos/a-cobblestone-street-lined-with-brick-buildings-e0SEn3icqLg",url:"/images/cover-images/alley.jpg",commonColor:"#d47f2a"},{id:"5992a65e-44f1-4d73-b264-37d58dd16d94",name:"Alley 2",author:"Morica Pham",source:"https://unsplash.com/photos/empty-street-between-buildings-during-night-time-kOjoKSyGei4",url:"/images/cover-images/alley-2.jpg",commonColor:"#dd8937"},{id:"272718f9-53ef-41f5-a33f-e96018681d8d",name:"Flames",author:"Lucas K",source:"https://unsplash.com/photos/blue-and-orange-smoke-wQLAGv4_OYs",url:"/images/cover-images/flames.jpg",commonColor:"#cc4e34"},{id:"799aace5-ec2d-4748-a972-8a8b50c6f60c",name:"Beach",author:"Kate Rodriguez",source:"https://unsplash.com/photos/river-overflow-in-between-rock-formation-p3OzJuT_Dks",url:"/images/cover-images/beach.jpg",commonColor:"#ab8453"},{id:"48bbec01-3d2a-4419-a383-428a0d589b04",name:"Embers",author:"Andrey Andreyev",source:"https://unsplash.com/photos/burned-firewood-s20nA2KB1N4",url:"/images/cover-images/embers.jpg",commonColor:"#e16f32"},{id:"332e3040-e8ac-43d8-a3bd-bcd05633fd35",name:"Spiral Stairs",author:"Ryan Searle",source:"https://unsplash.com/photos/twirl-stairs-with-chandeliers-Dqv8VRUKBs0",url:"/images/cover-images/spiral-stairs.jpg",commonColor:"#ad6a2e"}],nv=e=>($e("data-v-bc5094d5"),e=e(),qe(),e),iv=["src"],sv={class:"game-card__content"},rv={class:"row info"},ov={class:"tag"},av={class:"row users"},lv=nv(()=>a("i",{class:"fas fa-users"},null,-1)),cv={class:"date-created"},uv=ue({__name:"GameCard",props:{game:{type:Object,required:!0}},setup(e){const t=e,n=X(()=>Xa.find(r=>r.id===t.game.coverImage)),i=X(()=>t.game.players[Ue().id]),s=X(()=>new Date(t.game.dateCreated).toLocaleDateString());return(r,o)=>{var l,c;return _(),C("div",{class:"game-card",style:Jt({backgroundColor:(l=n.value)==null?void 0:l.commonColor})},[a("img",{src:(c=n.value)==null?void 0:c.url},null,8,iv),a("div",sv,[a("h2",null,U(t.game.name),1),a("div",rv,[a("span",ov,U(i.value.role),1),a("div",av,[lv,a("span",null,U(Object.keys(t.game.players).length),1)]),a("p",cv,U(s.value),1)])])],4)}}}),dv=de(uv,[["__scopeId","data-v-bc5094d5"]]),hv=e=>($e("data-v-45fcb83d"),e=e(),qe(),e),fv={class:"ribbon__content"},pv=["innerHTML"],mv=hv(()=>a("i",{class:"fas fa-times"},null,-1)),yv=[mv],gv=ue({__name:"Ribbon",props:{id:{},message:{},onActivate:{type:Function}},setup(e){const t=e;function n(){localStorage.setItem("ribbon."+t.id,"true"),i.value=!1}const i=j(!localStorage.getItem("ribbon."+t.id));return(s,r)=>(_(),C("div",{class:Z(["ribbon",{"ribbon--hidden":!i.value}])},[a("div",fv,[a("p",{innerHTML:s.message,onClick:r[0]||(r[0]=(...o)=>s.onActivate&&s.onActivate(...o))},null,8,pv),a("button",{class:"btn btn--icon",onClick:n},yv)])],2))}}),_v=de(gv,[["__scopeId","data-v-45fcb83d"]]),vv="/images/fitd-logo.webp",bv={},Za=e=>($e("data-v-ba692196"),e=e(),qe(),e),wv={class:"divider"},kv=Za(()=>a("div",{class:"line"},null,-1)),xv=Za(()=>a("div",{class:"middle-symbol"},"❖",-1)),Cv=Za(()=>a("div",{class:"line"},null,-1)),Sv=[kv,xv,Cv];function Ev(e,t){return _(),C("div",wv,Sv)}const on=de(bv,[["render",Ev],["__scopeId","data-v-ba692196"]]),Tn=e=>($e("data-v-61c6eabd"),e=e(),qe(),e),Av=Tn(()=>a("h2",null,"Attribution",-1)),Tv={class:"attribution"},$v=Tn(()=>a("p",null,[se(" This work is based on "),a("a",{class:"anchor-link",href:"http://www.bladesinthedark.com/",target:"_blank"}," Blades in the Dark "),se(" , product of One Seven Design, developed and authored by John Harper, and licensed for our use under the "),a("a",{class:"anchor-link",href:"http://creativecommons.org/licenses/by/3.0/",target:"_blank"}," Creative Commons Attribution 3.0 Unported license ")],-1)),qv=Tn(()=>a("p",null,[se(" This website is made and maintained by "),a("a",{class:"anchor-link",href:"https://olinkirk.land",target:"_blank"},"Olin Kirkland")],-1)),Ov=Tn(()=>a("img",{src:vv},null,-1)),Iv=Tn(()=>a("p",null," Blades in the Dark™ is a trademark of One Seven Design. The Forged in the Dark Logo is © One Seven Design, and is used with permission ",-1)),Pv=Tn(()=>a("p",{class:"images-description"},[se(" Illustrations are by "),a("a",{class:"anchor-link",href:"https://www.reddit.com/user/perryphery/submitted/",target:"_blank"},"u/perryphery on Reddit")],-1)),Rv=Tn(()=>a("p",{class:"images-description"},[se(" Cover images are from "),a("a",{class:"anchor-link",href:"https://unsplash.com/",target:"_blank"},"Unsplash")],-1)),Nv={class:"images"},Dv=["href"],Lv=["src"],Uv=Tn(()=>a("br",null,null,-1)),Mv={class:"muted"},Bv=Tn(()=>a("p",{class:"images-description"},[se(" Icons are from "),a("a",{class:"anchor-link",href:"https://fontawesome.com/",target:"_blank"},"Font Awesome"),se(" and "),a("a",{class:"anchor-link",href:"https://icons8.com/"},"Icons8")],-1)),Fv=ue({__name:"AttributionModal",setup(e){new Date().getFullYear();const t=n=>{const[i,s]=n.split(" ");return s?`${i} ${s[0]}.`:i};return(n,i)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[Av]),_:1})]),content:W(()=>[a("div",Tv,[$v,$(on),qv,$(on),Ov,Iv,$(on),Pv,$(on),Rv,a("ul",Nv,[(_(!0),C(te,null,he(H(Xa),s=>(_(),C("li",{key:s.id},[a("a",{href:s.source,target:"_blank"},[a("img",{src:s.url},null,8,Lv),a("p",null,[se(U(s.name),1),Uv,a("span",Mv,"by "+U(t(s.author)),1)])],8,Dv)]))),128))]),$(on),Bv,se("   ")])]),_:1}))}}),fh=de(Fv,[["__scopeId","data-v-61c6eabd"]]),Qv={crew:{reputations:["Ambitious","Brutal","Daring","Honorable","Professional","Savvy","Subtle","Strange"],lairs:[{name:"A crumbling watch tower",districts:["Six Towers","Crow's Foot","Coalridge"]},{name:"A half-sunken grotto beneath the city",districts:["Charterhall","Nightmarket","Barrowcleft"]},{name:"A dilapidated lighthouse",districts:["The Docks","Nightmarket","Crow's Foot"]},{name:"Backrooms of a merchant's shop",districts:["Silkshore","Brightstone","Six Towers"]},{name:"A junked rail car",districts:["Dunslough","Charhollow","Coalridge"]},{name:"A rickety, tin-roofed shack",districts:["Silkshore","Charterhall"]},{name:"A small, abandoned house",districts:["Charterhall","Six Towers","Brightstone"]},{name:"Derelict ship, anchored in the canal",districts:["The Docks","Nightmarket","Crow's Foot"]},{name:"Tunnels beneath a bridge",districts:["Crow's Foot","Charterhall","Barrowcleft"]}],"upgrade-descriptions":{crew:{"assassin-rigging":`[/load 2 free load] Weapon or Gear items

For example, carry a pistol (a weapon) and burglary tools (gear) for zero load`,"bravos-rigging":`[/load 2 free load] Weapon or Armor items

For example, carry a sword and pistol or wear normal armor for zero load`,"cult-rigging":`[/load 2 free load] Document or Arcane Implement items

For example, carry a profane book of curses and a demon's hand for zero load`,"thief-rigging":`[/load 2 free load] Tool or Gear items

For example, carry burglary gear and tinkering tools for zero load`,"hawker-rigging":"[/load 1 free load] *Concealed* even against a patdown","smuggler-rigging":"Two of your carried items are *concealed* even against a pat down","elite-skulks":"Skulks Cohorts get [/dice +1] to *Quality Rolls* for Skulk-related actions","elite-thugs":"Thugs Cohorts get [/dice +1] to *Quality Rolls* for Thug-related actions","elite-rooks":"Rooks Cohorts get [/dice +1] to *Quality Rolls* for Rook-related actions","elite-rovers":"Rovers Cohorts get [/dice +1] to *Quality Rolls* for Rover-related actions","elite-adepts":"Adepts Cohorts get [/dice +1] to *Quality Rolls* for Adept-related actions","ironhook-contacts":"You have [/tier +1 Tier] in prison. This counts for any Tier-related element in prison, including the incarceration roll","ritual-sanctum-in-lair":"A sacred and arcane workshop for occult practices and rituals",hardened:"Each PC gets [/trauma +1 Trauma Box] and may bring a PC with 4 *Trauma* back into play. This costs three upgrades to unlock",ordained:"Each PC gets [/trauma +1 Trauma Box] and may bring a PC with 4 *Trauma* back into play. This costs three upgrades to unlock",composed:"Each PC gets [/stress +1 Stress Box] This costs three upgrades to unlock",steady:"Each PC gets [/stress +1 Stress Box] This costs three upgrades to unlock","underground-maps-and-passkeys":"You have easy passage through the underground canals, tunnels, and basements of the city",camouflage:"Your vehicles are perfectly concealed when at rest. They blend in as part of the environment, or as an uninteresting civilian vehicle (your choice)",barge:"You can move your lair to a new location as a *Downtime Activity"},lair:{"boat-house":`You have a boat, a dock on a waterway, and a small shack for storing boating supplies

A second upgrade improves the boat with armor and more cargo capacity`,"carriage-house":`You have a carriage, two goats to pull it, and a stable. A second upgrade improves the carriage with armor and larger, swifter goats

Horses are very rare in Duskwall—most carriages in the city use the large Akorosian goat as their draft animal`,"hidden-lair":"Your Lair is in a secret, hidden location. If it's discovered, use two *Downtime Activities* and pay [/coin Coin] equal to your *Tier* to relocate it and hide it again",quarters:`Your Lair includes living quarters for the Crew.

Without this upgrade, each PC sleeps elsewhere, and is vulnerable when they do so`,"secure-lair":`Your Lair has locks, alarms, and traps to thwart intruders. A second upgrade improves the defenses to include arcane measures that work against Spirits

Roll your Crew's *Tier* if these measures are ever put to the test to see how well they thwart an intruder`,vault:`Your Lair has a secure vault, increasing the Crew's storage capacity for *Coin* to 8. A separate part of your vault can be used as a holding cell

A second upgrade increases the capacity to 16`,workshop:`Your Lair has a workshop appointed with tools for tinkering and alchemy, as well as a small library of books, documents, and maps

You may accomplish long-term projects with these assets without leaving your Lair`},training:{insight:"Earn [/xp 2 XP] instead of 1 when you train **Insight** during Downtime",prowess:"Earn [/xp 2 XP] instead of 1 when you train **Prowess** during Downtime",resolve:"Earn [/xp 2 XP] instead of 1 when you train **Resolve** during Downtime",personal:"Earn [/xp 2 XP] instead of 1 when you train **Playbook** during Downtime",mastery:`The PCs gain access to master level training. You may advance your *Action Ratings* to 4

This costs four upgrades to unlock`},quality:{documents:"Improves the *Quality Rating* of the Crew's Documents",gear:"Improves the *Quality Rating* of the Crew's Burglary Gear and Climbing Gear",implements:"Improves the *Quality Rating* of the Crew's Arcane Implements",supplies:"Improves the *Quality Rating* of the Crew's Subterfuge Supplies",tools:"Improves the *Quality Rating* of the Crew's Demolitions Tools and Tinkering Tools",weapons:"Improves the *Quality Rating* of the Crew's Weapons"}},cohorts:{harm:[{name:"Weakened",description:"Reduced *Effect*"},{name:"Impaired",description:"Operates with [/dice -1] *Quality*"},{name:"Broken",description:"Can't do anything until they recover"},{name:"Dead",description:"Destroyed. Spend [/coin Coin] equal to your *Tier* +2 to restore it"}],expertise:["Doctor","Investigator","Occultist","Assassin","Spy"],edges:[{name:"Fearsome",description:"Terrifying in aspect and reputation"},{name:"Independent",description:"Can make good decisions and act on their own"},{name:"Loyal",description:"Can't be bribed or turned against you"},{name:"Tenacious",description:"Won't be deterred from a task"}],flaws:[{name:"Principled",description:"Has an ethic or values that it won't betray"},{name:"Savage",description:"Excessively violent and cruel"},{name:"Unreliable",description:"Not always available, due to other obligations"},{name:"Wild",description:"Drunken and loud-mouthed"}],vehicleEdges:[{name:"Nimble",description:"The vehicle handles easily. Consider this an assist for tricky maneuvers"},{name:"Simple",description:"The vehicle is easy to repair. Remove all of its harm during downtime"},{name:"Sturdy",description:"The vehicle keeps operating even when broken"}],vehicleFlaws:[{name:"Costly",description:"The vehicle costs [/coin 1 Coin] per Downtime to keep in operation"},{name:"Distinct",description:"The vehicle has memorable features. Take +1 *Heat* when you use it on a Score"},{name:"Finicky",description:"The vehicle has quirks that only one person understands. When operated without them, it has [/dice -1] *Quality*"}]}},character:{backgrounds:[{name:"Academic",blurb:"A scholar, a professor or student from Doskvol Academy, a philosopher or journalist, etc."},{name:"Labor",blurb:"A servant, a factory worker, a coach driver, a docker, a sailor, a Rail Jack, etc. A stevedore for the North Hook Company."},{name:"Law",blurb:"An advocate or barrister, a Bluecoat or inspector (or even Spirit Warden), a prison guard from Ironhook, etc."},{name:"Trade",blurb:"A shopkeeper, a merchant, a skilled crafts-person, a shipping agent, etc. A liaison to the Ministry of Preservation."},{name:"Military",blurb:"An Imperial or Skovlander soldier, a mercenary, an intelligence operative, a strategist, a training instructor, etc."},{name:"Noble",blurb:"A dilettante, a courtier, the scion of a fallen house, etc."},{name:"Underworld",blurb:"A street urchin, gang member, young thug, or other outcast who grew up on the streets."}],vices:[{name:"Faith",blurb:"You're dedicated to an unseen power, forgotten god, ancestor, etc."},{name:"Gambling",blurb:"You crave games of chance, betting on sporting events, etc."},{name:"Luxury",blurb:"Expensive and/or ostentatious displays of opulence."},{name:"Obligation",blurb:"You're devoted to a family, a cause, a charity, etc."},{name:"Pleasure",blurb:"Gratification from lovers, food, drink, drugs, art, theater, etc."},{name:"Stupor",blurb:"You seek oblivion in the abuse of drugs, drink to excess, getting beaten to a pulp in the fighting pits, etc."},{name:"Weird",blurb:"You experiment with strange essences, consort with rogue spirits, observe bizarre rituals or taboos, etc."}],vicePurveyors:[{name:"Mother Narya",blurb:"House of the Weeping Lady, Six Towers.",vices:["faith"]},{name:"Ilacille",blurb:"The ruins of the Temple to forgotten gods, Coalridge.",vices:["faith"]},{name:"Nelisanne",blurb:"The Church of the Ecstasy of the Flesh, Brightstone.",vices:["faith"]},{name:"Lord Penderyn",blurb:"The Archive of Echoes, Charterhall.",vices:["faith"]},{name:"Spogg",blurb:"Spogg's dice game, Crow's Foot.",vices:["gambling"]},{name:"Grist",blurb:"Boxing, the Docks.",vices:["gambling"]},{name:"Helene",blurb:"Silver Stag casino, Silkshore.",vices:["gambling","pleasure","stupor"]},{name:"Master Vreen",blurb:"Hound racing, Nightmarket.",vices:["gambling"]},{name:"Lady Dusk",blurb:"The Dusk Manor Club, Whitecrown.",vices:["gambling"]},{name:"Sergeant Velk",blurb:"The fighting pits, Dunslough.",vices:["gambling"]},{name:"Singer",blurb:"Bath house, Crow's Foot.",vices:["luxury","pleasure"]},{name:"Harvale Brogan",blurb:"The Centuralia Club, Brightstone.",vices:["luxury","pleasure"]},{name:"Traven",blurb:"Traven's smoke shop, Coalridge.",vices:["luxury","pleasure","stupor"]},{name:"Dunridge & Sons",blurb:"Fine fabrics and tailoring, Nightmarket.",vices:["luxury"]},{name:"Chef Roselle",blurb:"The Golden Plum restaurant, Six Towers.",vices:["luxury","pleasure"]},{name:"Maestro Helleren",blurb:"Spiregarden theater, Whitecrown.",vices:["luxury","pleasure"]},{name:"Family members",blurb:"Heritage or former co-workers (background).",vices:["obligation"]},{name:"Hutton",blurb:"Skovlander Refugees/Revolutionaries, Charhollow.",vices:["obligation"]},{name:"The Circle of Flame",blurb:"A secret society.",vices:["obligation"]},{name:"Mardin Gull",blurb:"The Leaky Bucket, tavern, Crow's Foot.",vices:["pleasure","stupor"]},{name:"Pux Bolin",blurb:"The Harping Monkey, tavern, Nightmarket.",vices:["pleasure","stupor"]},{name:"Lady Freyla",blurb:"The Emperor's Cask, bar, Whitecrown.",vices:["pleasure","stupor"]},{name:"Avrick",blurb:"Powder dealer, Barrowcleft.",vices:["pleasure","stupor"]},{name:"Rolan Volaris",blurb:"The Veil, social club, Nightmarket.",vices:["pleasure","stupor"]},{name:"Madame Tesslyn",blurb:"The Red Lamp, brothel, Silkshore.",vices:["pleasure"]},{name:"Eldrin Prichard",blurb:"The Silver Swan pleasure barge, Brightstone canals.",vices:["pleasure","stupor"]},{name:"Jewel, Bird, and Shine",blurb:"Catcrawl Alley, the Docks.",vices:["pleasure","stupor"]},{name:"The hooded proprietor",blurb:"A half-flooded grotto tavern near the docks. Strange passageways lead to stranger chambers beyond.",vices:["weird"]},{name:"Father Yoren",blurb:"House of the Weeping Lady, Six Towers.",vices:["weird"]},{name:"Salia",blurb:"A spirit of the Reconciled, which moves from body to body at their whim.",vices:["weird"]},{name:"Sister Thorn",blurb:"Deathlands scavenger gang, Gaddoc Station.",vices:["weird"]},{name:"Ojak",blurb:"Tycherosi rooftop market vendor, Silkshore.",vices:["weird"]},{name:"Aranna the Blessed",blurb:"Cultist of a forgotten god, barge moored in Nightmarket.",vices:["weird"]}]}},Hv={gangs:["a tiny gang (1-2)","small gang (3-6)","medium gang (12)","large gang (20)","huge gang (40)","massive gang (80)","colossal gang (160)"],districts:[{name:"Brightstone",blurb:"The grand mansions and luxury shops of the wealthy elite."},{name:"Charterhall",blurb:"The city's civic offices and the hub for shops, artisans, and commerce."},{name:"Six Towers",blurb:"A formerly rich district, now worn down and dilapidated."},{name:"Silkshore",blurb:"The 'red lamp district' and artist community."},{name:"Nightmarket",blurb:"The trade center for exotic goods imported by rail. Many vendors also trade in illicit goods."},{name:"Crow's Foot",blurb:"A cramped neighborhood of multi-level streets, ruled by gangs."},{name:"The Docks",blurb:"Rough taverns, tattoo parlors, fighting pits, and warehouses."},{name:"Barrowcleft",blurb:"Residences and markets for the farmers who work the fields and eeleries."},{name:"Coalridge",blurb:"The remnants of Duskwall's original hilltop mining settlement, now home to laborers and industrial factories."},{name:"Charhollow",blurb:"A maze of tenements and squalid row houses."},{name:"Dunslough",blurb:"A labor camp served by convicts and a ghetto for the destitute poor."}],locations:[{name:"Akoros",blurb:"A land of dark, petrified forests and rocky hills. The rich coastal cities get their wealth from leviathan hunting and from mining colonies deep inland. The Akorosi are sometimes called 'Imperials' since the Imperium began there. They are generally fair-skinned and dark-haired."},{name:"Severos",blurb:"A land of windswept plains, covered in dark scrub and thorny growths. Outside the Imperial cities on the coast, some native Severosi still live in free tribes, scavenging the death-lands on their ghost-hunting horses. They are generally brown-skinned and dark-haired."},{name:"Iruvia",blurb:"A land of black deserts, obsidian mountains, and raging volcanoes. Some say that positions of power are openly held by demons in Iruvia. The people are generally amber-skinned and dark-haired."},{name:"The Dagger Isles",blurb:"A tropical archipelago covered in dense jungle growth; now turned dark and twisted from the strange magic of the cataclysm. Some say that the people there live without lightning barriers. How do they manage that? Native islanders are generally copper-skinned and dark-haired."},{name:"Skovlan",blurb:"A ragged land of cold mountains and rough tundra. Skovlan was the last holdout against Imperial control. They are generally pale-skinned and fair-haired or red-haired."},{name:"Tycheros",blurb:"A far off land, disconnected from the Empire. People say the Tycherosi (rudely called 'Strangers') have demon blood in their lineage."}]},jv={firstNames:["Adric","Aldo","Amison","Andrel","Arcy","Arden","Arilyn","Arquo","Arvus","Ashlyn","Branon","Brace","Brance","Brena","Bricks","Candra","Canter","Carissa","Carro","Casslyn","Cavelle","Clave","Corille","Cross","Crowl","Cyrene","Daphnia","Drav","Edlun","Emeline","Grell","Helles","Hix","Holtz","Kamelin","Kelyr","Kobb","Kristov","Laudius","Lauria","Lenia","Lizete","Lorette","Lucella","Lynthia","Mara","Milos","Morlan","Myre","Narcus","Naria","Noggs","Odrienne","Orlan","Phin","Polonia","Quess","Remira","Ring","Roethe","Sesereth","Sethla","Skannon","Stavrul","Stev","Syra","Talitha","Tesslyn","Thena","Timoth","Tocker","Una","Vaurin","Veleris","Veretta","Vestine","Vey","Volette","Vond","Weaver","Wester","Zamira"],lastNames:["Arran","Athanoch","Basran","Boden","Booker","Ankhayat","Bowmore","Breakiron","Brogan","Clelland","Clermont","Coleburn","Comber","Daava","Dalmore","Danfield","Dunvil","Edrad","Farros","Grine","Haig","Helker","Helles","Hellyers","Jayan","Jeduin","Kardera","Karstas","Keel","Kessarin","Kinclaith","Lomond","Maroden","Michter","Morriston","Penderyn","Prichard","Rowan","Salkara","Sevoy","Skelkallan","Slane","Strangford","Strathmill","Templeton","Tyrconnell","Vale","Vedat","Walund"],deityNames:["The One Within Many","The Silver Fire","The Rapturous Chord","The Fallen Star","The Lord of the Depths","The Silent Song","The Lady of Thorns","Our Blood Spilled in Glory","The Ram","The Empty Vessel","The Closed Eye","The Hand of Sorrow","That Which Hungers","The Thousand Faces","The Web of Pain","The Pillars of Night","The Burned King","The Father of the Abyss","The Forsaken Legion","The Unbroken Sun","The Revelation","The Radiant Word","The Shrouded Queen","The Reconciler","The Cloud of Woe","The Broken Circle","The Conqueror","She Who Slays in Darkness","The Dream Beyond Death","The Blood Dimmed Tide","The Guardian of the Gates","The Maw of the Void","The Keeper of the Flame","The Throne of Judgment","The Lost Crown","The Golden Stag"],aliases:["Bell","Birch","Bricks","Bug","Chime","Coil","Cricket","Cross","Crow","Echo","Flint","Frog","Frost","Grip","Gunner","Hammer","Hook","Junker","Mist","Moon","Nail","Needle","Ogre","Pool","Ring","Ruby","Silver","Skinner","Song","Spur","Tackle","Thistle","Thorn","Tick-Tock","Twelves","Vixen","Whip","Wicker"]},Vv={adjectives:["Affable","Athletic","Bony","Bright","Brooding","Calm","Chiseled","Cold","Dark","Delicate","Fair","Fierce","Grimy","Handsome","Huge","Hunched","Languid","Lovely","Open","Plump","Rough","Sad","Scarred","Slim","Soft","Squat","Stern","Stout","Striking","Twitchy","Weathered","Wiry","Worn"],clothes:["Collared Shirt","Eel-skin Bodysuit","Fitted Dress","Fitted Leggings","Half-Cape","Heavy Cloak","Heavy Jacket","Hide & Furs","Hood & Veil","Hooded Cape","Hooded Coat","Knit Cap","Knit Sweater","Leathers","Long Coat","Long Scarf","Loose Silks","Mask & Robes","Rags & Tatters","Rough Tunic","Scavenged Uniform","Sharp Trousers","Short Cloak","Skirt & Blouse","Slim Jacket","Soft Boots","Suit & Tie","Suspenders","Tall Boots","Thick Greatcoat","Tricorn Hat","Vest or Waistcoat","Waxed Coat","Wide Belt","Work Boots","Work Trousers"]},na={sheets:Qv,lexicon:Hv,names:jv,looks:Vv};async function Wv(e,t){try{const n=await _t.post("/game/new",{gameName:e,coverImage:t,codex:na});if(n.status===An.Ok)return console.log(n.data),Ue().games=n.data,Mi.track("Create Game",{gameName:e}),null}catch(n){return n.response.data}}async function Gv(){var e;try{if((await _t.post(`/game/${(e=Me().game)==null?void 0:e._id}/leave`)).status===An.Ok)return Me().clear(),await Wi(),null}catch(t){return t.response.data}}const yi=e=>($e("data-v-a23a1ab2"),e=e(),qe(),e),Yv=yi(()=>a("h2",null,"New Game",-1)),zv={class:"game"},Kv=yi(()=>a("p",null,[se(" Create a new "),a("em",null,"Blades in the Dark"),se(" game. "),a("br"),a("span",{class:"muted"}," You can invite players once the game has been created. ")],-1)),Jv={class:"inputs"},Xv={class:"input-group"},Zv=yi(()=>a("label",{for:"gameName"},"Game Name",-1)),eb={key:0,class:"reminder shake-once"},tb={class:"input-group"},nb=yi(()=>a("label",{for:"coverImage"},"Cover Image",-1)),ib={class:"cover-image-list"},sb=["onClick"],rb=["src","onLoad","onError"],ob={key:0,class:"overlay"},ab={class:"caption"},lb={key:1,class:"fas fa-check-circle"},cb={key:0,class:"alert"},ub=yi(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),db=yi(()=>a("i",{class:"fas fa-times"},null,-1)),hb=[db],fb={class:"row center"},pb={key:0,class:"fas fa-circle-notch fa-spin"},mb=yi(()=>a("span",null,"Create Game",-1)),yb=ue({__name:"CreateGameModal",setup(e){const t=j(Xa.map(d=>({...d,loaded:!1}))),n=j(""),i=j(!1),s=j(""),r=j(!1),o=X(()=>r.value&&s.value.length===0?"Every game should have a name":null),l=j(t.value[0].id),c=X(()=>s.value.length>0);async function u(){var h;if(!c.value&&(!r.value||o.value)){r.value=!0,document.querySelectorAll(".reminder").forEach(m=>{m.classList.remove("shake-once"),m.offsetWidth,m.classList.add("shake-once")});return}i.value=!0,n.value="";const d=await Wv(s.value,l.value);if(i.value=!1,d)n.value=d;else{const f=(h=Ue().games.find(m=>m.name===s.value))==null?void 0:h._id;Kt.push({name:"game",params:{id:f}})}}return(d,h)=>(_(),ce(ft,{class:Z({disabled:i.value})},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[Yv]),_:1})]),content:W(()=>[a("div",zv,[Kv,a("div",Jv,[a("div",Xv,[Zv,Ne(a("input",{type:"text",onInput:h[0]||(h[0]=f=>r.value=!0),onKeyup:Ss(u,["enter"]),placeholder:"Enter a name","onUpdate:modelValue":h[1]||(h[1]=f=>s.value=f)},null,544),[[De,s.value]]),o.value?(_(),C("span",eb,U(o.value),1)):Y("",!0)]),a("div",tb,[nb,a("ul",ib,[(_(!0),C(te,null,he(t.value,f=>(_(),C("li",{key:f.id},[a("button",{onClick:m=>l.value=f.id,style:Jt({backgroundColor:f.commonColor})},[a("img",{src:f.url,onLoad:m=>f.loaded=!0,onError:m=>f.loaded=!0,class:Z({loaded:f.loaded})},null,42,rb),l.value===f.id?(_(),C("div",ob)):Y("",!0),a("div",ab,[a("span",null,U(f.name),1)]),l.value===f.id?(_(),C("i",lb)):Y("",!0)],12,sb)]))),128))])])]),n.value?(_(),C("div",cb,[ub,a("span",null,U(n.value),1),a("button",{class:"btn btn--icon close",onClick:h[2]||(h[2]=f=>n.value="")},hb)])):Y("",!0),a("div",fb,[a("button",{class:"btn mobile-full-width",onClick:u},[i.value?(_(),C("i",pb)):Y("",!0),mb])])])]),_:1},8,["class"]))}}),gb=de(yb,[["__scopeId","data-v-a23a1ab2"]]),ph=e=>($e("data-v-7bb8cfbf"),e=e(),qe(),e),_b={class:"page"},vb={class:"game-list"},bb=ph(()=>a("i",{class:"fas fa-folder-plus"},null,-1)),wb=ph(()=>a("span",null,"New Game",-1)),kb=[bb,wb],xb=ue({__name:"TheHomePage",setup(e){async function t(){K.open(gb)}const n=X(()=>Ue().games);function i(s){Kt.push({name:"game",params:{id:s._id}})}return pn(()=>{Wi()}),(s,r)=>(_(),C("div",_b,[$(_v,{id:"welcome-ribbon",message:"<em>Online in the Dark</em> is an unofficial tool designed for playing <em>Blades in the Dark</em> online. Click to view the full attribution.",onActivate:()=>{H(K).open(fh)}},null,8,["onActivate"]),a("ul",vb,[(_(!0),C(te,null,he(n.value,o=>(_(),C("li",{key:o._id},[$(dv,{game:o,onClick:l=>i(o)},null,8,["game","onClick"])]))),128)),a("li",null,[a("div",{class:"new-game-card",onClick:t},kb)])])]))}}),Cb=de(xb,[["__scopeId","data-v-7bb8cfbf"]]);async function Sb(e){K.open(Qi);try{const t=await _t.post(`/invite/${e}`);if(t.status===An.Ok){const n=t.data.gameId;Kt.push({name:aa.GAME,params:{id:n}})}}catch(t){console.error(t),Kt.push({name:aa.HOME}),K.close();return}K.close()}const Eb={},Ab={class:"panel"};function Tb(e,t){return _(),C("div",Ab,[Ii(e.$slots,"default",{},void 0)])}const mh=de(Eb,[["render",Tb],["__scopeId","data-v-c9a6184a"]]);/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const wi=typeof document<"u";function $b(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Be=Object.assign;function fo(e,t){const n={};for(const i in t){const s=t[i];n[i]=zt(s)?s.map(e):e(s)}return n}const ls=()=>{},zt=Array.isArray,yh=/#/g,qb=/&/g,Ob=/\//g,Ib=/=/g,Pb=/\?/g,gh=/\+/g,Rb=/%5B/g,Nb=/%5D/g,_h=/%5E/g,Db=/%60/g,vh=/%7B/g,Lb=/%7C/g,bh=/%7D/g,Ub=/%20/g;function el(e){return encodeURI(""+e).replace(Lb,"|").replace(Rb,"[").replace(Nb,"]")}function Mb(e){return el(e).replace(vh,"{").replace(bh,"}").replace(_h,"^")}function ia(e){return el(e).replace(gh,"%2B").replace(Ub,"+").replace(yh,"%23").replace(qb,"%26").replace(Db,"`").replace(vh,"{").replace(bh,"}").replace(_h,"^")}function Bb(e){return ia(e).replace(Ib,"%3D")}function Fb(e){return el(e).replace(yh,"%23").replace(Pb,"%3F")}function Qb(e){return e==null?"":Fb(e).replace(Ob,"%2F")}function bs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Hb=/\/$/,jb=e=>e.replace(Hb,"");function po(e,t,n="/"){let i,s={},r="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(i=t.slice(0,c),r=t.slice(c+1,l>-1?l:t.length),s=e(r)),l>-1&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=Yb(i??t,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:bs(o)}}function Vb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function qc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Wb(e,t,n){const i=t.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Ni(t.matched[i],n.matched[s])&&wh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ni(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function wh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Gb(e[n],t[n]))return!1;return!0}function Gb(e,t){return zt(e)?Oc(e,t):zt(t)?Oc(t,e):e===t}function Oc(e,t){return zt(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function Yb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o).join("/")}var ws;(function(e){e.pop="pop",e.push="push"})(ws||(ws={}));var cs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(cs||(cs={}));function zb(e){if(!e)if(wi){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),jb(e)}const Kb=/^[^#]+#/;function Jb(e,t){return e.replace(Kb,"#")+t}function Xb(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const jr=()=>({left:window.scrollX,top:window.scrollY});function Zb(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Xb(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ic(e,t){return(history.state?history.state.position-t:-1)+e}const sa=new Map;function ew(e,t){sa.set(e,t)}function tw(e){const t=sa.get(e);return sa.delete(e),t}let nw=()=>location.protocol+"//"+location.host;function kh(e,t){const{pathname:n,search:i,hash:s}=t,r=e.indexOf("#");if(r>-1){let l=s.includes(e.slice(r))?e.slice(r).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),qc(c,"")}return qc(n,e)+i+s}function iw(e,t,n,i){let s=[],r=[],o=null;const l=({state:f})=>{const m=kh(e,location),y=n.value,S=t.value;let A=0;if(f){if(n.value=m,t.value=f,o&&o===y){o=null;return}A=S?f.position-S.position:0}else i(m);s.forEach(N=>{N(n.value,y,{delta:A,type:ws.pop,direction:A?A>0?cs.forward:cs.back:cs.unknown})})};function c(){o=n.value}function u(f){s.push(f);const m=()=>{const y=s.indexOf(f);y>-1&&s.splice(y,1)};return r.push(m),m}function d(){const{history:f}=window;f.state&&f.replaceState(Be({},f.state,{scroll:jr()}),"")}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function Pc(e,t,n,i=!1,s=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:s?jr():null}}function sw(e){const{history:t,location:n}=window,i={value:kh(e,n)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,u,d){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:nw()+e+c;try{t[d?"replaceState":"pushState"](u,"",f),s.value=u}catch(m){console.error(m),n[d?"replace":"assign"](f)}}function o(c,u){const d=Be({},t.state,Pc(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});r(c,d,!0),i.value=c}function l(c,u){const d=Be({},s.value,t.state,{forward:c,scroll:jr()});r(d.current,d,!0);const h=Be({},Pc(i.value,c,null),{position:d.position+1},u);r(c,h,!1),i.value=c}return{location:i,state:s,push:l,replace:o}}function rw(e){e=zb(e);const t=sw(e),n=iw(e,t.state,t.location,t.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=Be({location:"",base:e,go:i,createHref:Jb.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function ow(e){return typeof e=="string"||e&&typeof e=="object"}function xh(e){return typeof e=="string"||typeof e=="symbol"}const Pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ch=Symbol("");var Rc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Rc||(Rc={}));function Di(e,t){return Be(new Error,{type:e,[Ch]:!0},t)}function _n(e,t){return e instanceof Error&&Ch in e&&(t==null||!!(e.type&t))}const Nc="[^/]+?",aw={sensitive:!1,strict:!1,start:!0,end:!0},lw=/[.+*?^${}()[\]/\\]/g;function cw(e,t){const n=Be({},aw,t),i=[];let s=n.start?"^":"";const r=[];for(const u of e){const d=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const f=u[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(lw,"\\$&"),m+=40;else if(f.type===1){const{value:y,repeatable:S,optional:A,regexp:N}=f;r.push({name:y,repeatable:S,optional:A});const F=N||Nc;if(F!==Nc){m+=10;try{new RegExp(`(${F})`)}catch(oe){throw new Error(`Invalid custom RegExp for param "${y}" (${F}): `+oe.message)}}let J=S?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;h||(J=A&&u.length<2?`(?:/${J})`:"/"+J),A&&(J+="?"),s+=J,m+=20,A&&(m+=-8),S&&(m+=-20),F===".*"&&(m+=-50)}d.push(m)}i.push(d)}if(n.strict&&n.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function l(u){const d=u.match(o),h={};if(!d)return null;for(let f=1;f<d.length;f++){const m=d[f]||"",y=r[f-1];h[y.name]=m&&y.repeatable?m.split("/"):m}return h}function c(u){let d="",h=!1;for(const f of e){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const m of f)if(m.type===0)d+=m.value;else if(m.type===1){const{value:y,repeatable:S,optional:A}=m,N=y in u?u[y]:"";if(zt(N)&&!S)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const F=zt(N)?N.join("/"):N;if(!F)if(A)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);d+=F}}return d||"/"}return{re:o,score:i,keys:r,parse:l,stringify:c}}function uw(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function dw(e,t){let n=0;const i=e.score,s=t.score;for(;n<i.length&&n<s.length;){const r=uw(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(Dc(i))return 1;if(Dc(s))return-1}return s.length-i.length}function Dc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const hw={type:0,value:""},fw=/[a-zA-Z0-9_]/;function pw(e){if(!e)return[[]];if(e==="/")return[[hw]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let l=0,c,u="",d="";function h(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=i;break;case 1:c==="("?n=2:fw.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function mw(e,t,n){const i=cw(pw(e.path),n),s=Be(i,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function yw(e,t){const n=[],i=new Map;t=Mc({strict:!1,end:!0,sensitive:!1},t);function s(d){return i.get(d)}function r(d,h,f){const m=!f,y=gw(d);y.aliasOf=f&&f.record;const S=Mc(t,d),A=[y];if("alias"in d){const J=typeof d.alias=="string"?[d.alias]:d.alias;for(const oe of J)A.push(Be({},y,{components:f?f.record.components:y.components,path:oe,aliasOf:f?f.record:y}))}let N,F;for(const J of A){const{path:oe}=J;if(h&&oe[0]!=="/"){const ee=h.record.path,ie=ee[ee.length-1]==="/"?"":"/";J.path=h.record.path+(oe&&ie+oe)}if(N=mw(J,h,S),f?f.alias.push(N):(F=F||N,F!==N&&F.alias.push(N),m&&d.name&&!Uc(N)&&o(d.name)),y.children){const ee=y.children;for(let ie=0;ie<ee.length;ie++)r(ee[ie],N,f&&f.children[ie])}f=f||N,(N.record.components&&Object.keys(N.record.components).length||N.record.name||N.record.redirect)&&c(N)}return F?()=>{o(F)}:ls}function o(d){if(xh(d)){const h=i.get(d);h&&(i.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){let h=0;for(;h<n.length&&dw(d,n[h])>=0&&(d.record.path!==n[h].record.path||!Sh(d,n[h]));)h++;n.splice(h,0,d),d.record.name&&!Uc(d)&&i.set(d.record.name,d)}function u(d,h){let f,m={},y,S;if("name"in d&&d.name){if(f=i.get(d.name),!f)throw Di(1,{location:d});S=f.record.name,m=Be(Lc(h.params,f.keys.filter(F=>!F.optional).concat(f.parent?f.parent.keys.filter(F=>F.optional):[]).map(F=>F.name)),d.params&&Lc(d.params,f.keys.map(F=>F.name))),y=f.stringify(m)}else if(d.path!=null)y=d.path,f=n.find(F=>F.re.test(y)),f&&(m=f.parse(y),S=f.record.name);else{if(f=h.name?i.get(h.name):n.find(F=>F.re.test(h.path)),!f)throw Di(1,{location:d,currentLocation:h});S=f.record.name,m=Be({},h.params,d.params),y=f.stringify(m)}const A=[];let N=f;for(;N;)A.unshift(N.record),N=N.parent;return{name:S,path:y,params:m,matched:A,meta:vw(A)}}return e.forEach(d=>r(d)),{addRoute:r,resolve:u,removeRoute:o,getRoutes:l,getRecordMatcher:s}}function Lc(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function gw(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:_w(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function _w(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Uc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function vw(e){return e.reduce((t,n)=>Be(t,n.meta),{})}function Mc(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Sh(e,t){return t.children.some(n=>n===e||Sh(e,n))}function bw(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(gh," "),o=r.indexOf("="),l=bs(o<0?r:r.slice(0,o)),c=o<0?null:bs(r.slice(o+1));if(l in t){let u=t[l];zt(u)||(u=t[l]=[u]),u.push(c)}else t[l]=c}return t}function Bc(e){let t="";for(let n in e){const i=e[n];if(n=Bb(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(zt(i)?i.map(r=>r&&ia(r)):[i&&ia(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function ww(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=zt(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const kw=Symbol(""),Fc=Symbol(""),tl=Symbol(""),nl=Symbol(""),ra=Symbol("");function Xi(){let e=[];function t(i){return e.push(i),()=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Un(e,t,n,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const u=f=>{f===!1?c(Di(4,{from:n,to:t})):f instanceof Error?c(f):ow(f)?c(Di(2,{from:t,to:f})):(o&&i.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),l())},d=r(()=>e.call(i&&i.instances[s],t,n,u));let h=Promise.resolve(d);e.length<3&&(h=h.then(u)),h.catch(f=>c(f))})}function mo(e,t,n,i,s=r=>r()){const r=[];for(const o of e)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(xw(c)){const d=(c.__vccOpts||c)[t];d&&r.push(Un(d,n,i,o,l,s))}else{let u=c();r.push(()=>u.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const h=$b(d)?d.default:d;o.components[l]=h;const m=(h.__vccOpts||h)[t];return m&&Un(m,n,i,o,l,s)()}))}}return r}function xw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Qc(e){const t=Yt(tl),n=Yt(nl),i=X(()=>{const c=H(e.to);return t.resolve(c)}),s=X(()=>{const{matched:c}=i.value,{length:u}=c,d=c[u-1],h=n.matched;if(!d||!h.length)return-1;const f=h.findIndex(Ni.bind(null,d));if(f>-1)return f;const m=Hc(c[u-2]);return u>1&&Hc(d)===m&&h[h.length-1].path!==m?h.findIndex(Ni.bind(null,c[u-2])):f}),r=X(()=>s.value>-1&&Aw(n.params,i.value.params)),o=X(()=>s.value>-1&&s.value===n.matched.length-1&&wh(n.params,i.value.params));function l(c={}){return Ew(c)?t[H(e.replace)?"replace":"push"](H(e.to)).catch(ls):Promise.resolve()}return{route:i,href:X(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}const Cw=ue({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Qc,setup(e,{slots:t}){const n=xs(Qc(e)),{options:i}=Yt(tl),s=X(()=>({[jc(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[jc(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:fd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),Sw=Cw;function Ew(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Aw(e,t){for(const n in t){const i=t[n],s=e[n];if(typeof i=="string"){if(i!==s)return!1}else if(!zt(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Hc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const jc=(e,t,n)=>e??t??n,Tw=ue({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Yt(ra),s=X(()=>e.route||i.value),r=Yt(Fc,0),o=X(()=>{let u=H(r);const{matched:d}=s.value;let h;for(;(h=d[u])&&!h.components;)u++;return u}),l=X(()=>s.value.matched[o.value]);js(Fc,X(()=>o.value+1)),js(kw,l),js(ra,s);const c=j();return Ut(()=>[c.value,l.value,e.name],([u,d,h],[f,m,y])=>{d&&(d.instances[h]=u,m&&m!==d&&u&&u===f&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!Ni(d,m)||!f)&&(d.enterCallbacks[h]||[]).forEach(S=>S(u))},{flush:"post"}),()=>{const u=s.value,d=e.name,h=l.value,f=h&&h.components[d];if(!f)return Vc(n.default,{Component:f,route:u});const m=h.props[d],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,A=fd(f,Be({},y,t,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(h.instances[d]=null)},ref:c}));return Vc(n.default,{Component:A,route:u})||A}}});function Vc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const $w=Tw;function qw(e){const t=yw(e.routes,e),n=e.parseQuery||bw,i=e.stringifyQuery||Bc,s=e.history,r=Xi(),o=Xi(),l=Xi(),c=xo(Pn);let u=Pn;wi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=fo.bind(null,T=>""+T),h=fo.bind(null,Qb),f=fo.bind(null,bs);function m(T,G){let V,x;return xh(T)?(V=t.getRecordMatcher(T),x=G):x=T,t.addRoute(x,V)}function y(T){const G=t.getRecordMatcher(T);G&&t.removeRoute(G)}function S(){return t.getRoutes().map(T=>T.record)}function A(T){return!!t.getRecordMatcher(T)}function N(T,G){if(G=Be({},G||c.value),typeof T=="string"){const k=po(n,T,G.path),I=t.resolve({path:k.path},G),O=s.createHref(k.fullPath);return Be(k,I,{params:f(I.params),hash:bs(k.hash),redirectedFrom:void 0,href:O})}let V;if(T.path!=null)V=Be({},T,{path:po(n,T.path,G.path).path});else{const k=Be({},T.params);for(const I in k)k[I]==null&&delete k[I];V=Be({},T,{params:h(k)}),G.params=h(G.params)}const x=t.resolve(V,G),z=T.hash||"";x.params=d(f(x.params));const fe=Vb(i,Be({},T,{hash:Mb(z),path:x.path})),g=s.createHref(fe);return Be({fullPath:fe,hash:z,query:i===Bc?ww(T.query):T.query||{}},x,{redirectedFrom:void 0,href:g})}function F(T){return typeof T=="string"?po(n,T,c.value.path):Be({},T)}function J(T,G){if(u!==T)return Di(8,{from:G,to:T})}function oe(T){return be(T)}function ee(T){return oe(Be(F(T),{replace:!0}))}function ie(T){const G=T.matched[T.matched.length-1];if(G&&G.redirect){const{redirect:V}=G;let x=typeof V=="function"?V(T):V;return typeof x=="string"&&(x=x.includes("?")||x.includes("#")?x=F(x):{path:x},x.params={}),Be({query:T.query,hash:T.hash,params:x.path!=null?{}:T.params},x)}}function be(T,G){const V=u=N(T),x=c.value,z=T.state,fe=T.force,g=T.replace===!0,k=ie(V);if(k)return be(Be(F(k),{state:typeof k=="object"?Be({},z,k.state):z,force:fe,replace:g}),G||V);const I=V;I.redirectedFrom=G;let O;return!fe&&Wb(i,x,V)&&(O=Di(16,{to:I,from:x}),Ke(x,x,!0,!1)),(O?Promise.resolve(O):Re(I,x)).catch(v=>_n(v)?_n(v,2)?v:dt(v):Se(v,I,x)).then(v=>{if(v){if(_n(v,2))return be(Be({replace:g},F(v.to),{state:typeof v.to=="object"?Be({},z,v.to.state):z,force:fe}),G||I)}else v=Ze(I,x,!0,g,z);return He(I,x,v),v})}function ae(T,G){const V=J(T,G);return V?Promise.reject(V):Promise.resolve()}function ne(T){const G=At.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(T):T()}function Re(T,G){let V;const[x,z,fe]=Ow(T,G);V=mo(x.reverse(),"beforeRouteLeave",T,G);for(const k of x)k.leaveGuards.forEach(I=>{V.push(Un(I,T,G))});const g=ae.bind(null,T,G);return V.push(g),q(V).then(()=>{V=[];for(const k of r.list())V.push(Un(k,T,G));return V.push(g),q(V)}).then(()=>{V=mo(z,"beforeRouteUpdate",T,G);for(const k of z)k.updateGuards.forEach(I=>{V.push(Un(I,T,G))});return V.push(g),q(V)}).then(()=>{V=[];for(const k of fe)if(k.beforeEnter)if(zt(k.beforeEnter))for(const I of k.beforeEnter)V.push(Un(I,T,G));else V.push(Un(k.beforeEnter,T,G));return V.push(g),q(V)}).then(()=>(T.matched.forEach(k=>k.enterCallbacks={}),V=mo(fe,"beforeRouteEnter",T,G,ne),V.push(g),q(V))).then(()=>{V=[];for(const k of o.list())V.push(Un(k,T,G));return V.push(g),q(V)}).catch(k=>_n(k,8)?k:Promise.reject(k))}function He(T,G,V){l.list().forEach(x=>ne(()=>x(T,G,V)))}function Ze(T,G,V,x,z){const fe=J(T,G);if(fe)return fe;const g=G===Pn,k=wi?history.state:{};V&&(x||g?s.replace(T.fullPath,Be({scroll:g&&k&&k.scroll},z)):s.push(T.fullPath,z)),c.value=T,Ke(T,G,V,g),dt()}let st;function Et(){st||(st=s.listen((T,G,V)=>{if(!R.listening)return;const x=N(T),z=ie(x);if(z){be(Be(z,{replace:!0}),x).catch(ls);return}u=x;const fe=c.value;wi&&ew(Ic(fe.fullPath,V.delta),jr()),Re(x,fe).catch(g=>_n(g,12)?g:_n(g,2)?(be(g.to,x).then(k=>{_n(k,20)&&!V.delta&&V.type===ws.pop&&s.go(-1,!1)}).catch(ls),Promise.reject()):(V.delta&&s.go(-V.delta,!1),Se(g,x,fe))).then(g=>{g=g||Ze(x,fe,!1),g&&(V.delta&&!_n(g,8)?s.go(-V.delta,!1):V.type===ws.pop&&_n(g,20)&&s.go(-1,!1)),He(x,fe,g)}).catch(ls)}))}let Ye=Xi(),_e=Xi(),Ce;function Se(T,G,V){dt(T);const x=_e.list();return x.length?x.forEach(z=>z(T,G,V)):console.error(T),Promise.reject(T)}function bt(){return Ce&&c.value!==Pn?Promise.resolve():new Promise((T,G)=>{Ye.add([T,G])})}function dt(T){return Ce||(Ce=!T,Et(),Ye.list().forEach(([G,V])=>T?V(T):G()),Ye.reset()),T}function Ke(T,G,V,x){const{scrollBehavior:z}=e;if(!wi||!z)return Promise.resolve();const fe=!V&&tw(Ic(T.fullPath,0))||(x||!V)&&history.state&&history.state.scroll||null;return Na().then(()=>z(T,G,fe)).then(g=>g&&Zb(g)).catch(g=>Se(g,T,G))}const Je=T=>s.go(T);let mt;const At=new Set,R={currentRoute:c,listening:!0,addRoute:m,removeRoute:y,hasRoute:A,getRoutes:S,resolve:N,options:e,push:oe,replace:ee,go:Je,back:()=>Je(-1),forward:()=>Je(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:_e.add,isReady:bt,install(T){const G=this;T.component("RouterLink",Sw),T.component("RouterView",$w),T.config.globalProperties.$router=G,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>H(c)}),wi&&!mt&&c.value===Pn&&(mt=!0,oe(s.location).catch(z=>{}));const V={};for(const z in Pn)Object.defineProperty(V,z,{get:()=>c.value[z],enumerable:!0});T.provide(tl,G),T.provide(nl,Pu(V)),T.provide(ra,c);const x=T.unmount;At.add(T),T.unmount=function(){At.delete(T),At.size<1&&(u=Pn,st&&st(),st=null,c.value=Pn,mt=!1,Ce=!1),x()}}};function q(T){return T.reduce((G,V)=>G.then(()=>ne(V)),Promise.resolve())}return R}function Ow(e,t){const n=[],i=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(e.matched.find(u=>Ni(u,l))?i.push(l):n.push(l));const c=e.matched[o];c&&(t.matched.find(u=>Ni(u,c))||s.push(c))}return[n,i,s]}function Eh(){return Yt(nl)}const Iw={class:"page"},Pw=a("h1",null,"INVITE PAGE",-1),Rw=ue({__name:"TheInvitePage",setup(e){const n=Eh().params.code;return pn(()=>{Sb(n)}),(i,s)=>(_(),C("div",Iw,[Pw,$(mh,null,{default:W(()=>[a("p",null,U(H(n)),1)]),_:1})]))}}),Ah=e=>($e("data-v-c2b83b82"),e=e(),qe(),e),Nw={class:"page"},Dw=Ah(()=>a("h1",null,"404",-1)),Lw=Ah(()=>a("p",null,"This page does not exist.",-1)),Uw=ue({__name:"TheLostPage",setup(e){function t(){Kt.push("/")}return(n,i)=>(_(),C("div",Nw,[$(mh,{id:"lost"},{default:W(()=>[Dw,Lw,a("button",{class:"btn",onClick:i[0]||(i[0]=s=>t())},"Return to Home Page")]),_:1})]))}}),Mw=de(Uw,[["__scopeId","data-v-c2b83b82"]]),Th=[{id:"e52f27b1-e5f6-42de-9889-c2d9aeeb3b0d",name:"Assassin Crew",author:"Perryphery",source:"",url:"/images/crews/assassins.jpg",commonColor:"#a27043"},{id:"ab9c33a6-2710-41ff-a814-edf6b648af54",name:"Bravos Crew",author:"Perryphery",source:"",url:"/images/crews/bravos.jpg",commonColor:"#e88b62"},{id:"7544b3a4-0e4d-4758-9870-cd5b8f7774cb",name:"Cult Crew",author:"Perryphery",source:"",url:"/images/crews/cult.jpg",commonColor:"#c94c34"},{id:"13867125-73d8-4399-a550-db499a4eedfe",name:"Hawkers Crew",author:"Perryphery",source:"",url:"/images/crews/hawkers.jpg",commonColor:"#bfa53f"},{id:"bbc1bf16-dc4d-4e97-a898-0bf9e688d327",name:"Shadows Crew",author:"Perryphery",source:"",url:"/images/crews/shadows.jpg",commonColor:"#a27043"},{id:"de509b5c-f37c-4975-9768-5e123d24e19b",name:"Smugglers Crew",author:"Perryphery",source:"",url:"/images/crews/smugglers.jpg",commonColor:"#dac684"},{id:"24fcce82-058a-4ba0-a517-d93167226b7b",name:"Cutter",author:"Perryphery",source:"",url:"/images/characters/cutter.jpg",commonColor:"#d4552a"},{id:"06c6e50e-b187-4161-99d4-01228ade7b96",name:"Hound",author:"Perryphery",source:"",url:"/images/characters/hound.jpg",commonColor:"#3fbfaf"},{id:"1b7d14f9-73c8-4b89-88a0-db246cd8b8b4",name:"Leech",author:"Perryphery",source:"",url:"/images/characters/leech.jpg",commonColor:"#708c8e"},{id:"9cec5287-f247-47ad-8eab-ed6a3ef82b0f",name:"Lurk",author:"Perryphery",source:"",url:"/images/characters/lurk.jpg",commonColor:"#a26a5c"},{id:"10f1b3a4-b4c3-4755-a66d-17181ba317b2",name:"Slide",author:"Perryphery",source:"",url:"/images/characters/slide.jpg",commonColor:"#a26a5c"},{id:"1f6e47b6-c3c6-47b9-8b19-e553e6362de2",name:"Spider",author:"Perryphery",source:"",url:"/images/characters/spider.jpg",commonColor:"#ad5151"},{id:"88a1879b-06a3-4632-897b-e0cd7e423c46",name:"Whisper",author:"Perryphery",source:"",url:"/images/characters/whisper.jpg",commonColor:"#9f825f"},{id:"9f5d267b-83f1-40e5-9ff6-04d1c92a3d21",name:"Ghost",author:"Perryphery",source:"",url:"/images/characters/ghost.jpg",commonColor:"#718d82"},{id:"aa5271f0-4d79-4ae7-9348-8bbeae94a27f",name:"Hull",author:"Perryphery",source:"",url:"/images/characters/hull.jpg",commonColor:"#c3a87f"},{id:"9cec5287-f247-47ad-8eab-ed6a3ef82b0f",name:"Vampire",author:"Perryphery",source:"",url:"/images/characters/vampire.jpg",commonColor:"#a67f58"}],Bw=["src"],Fw={class:"sheet-card__content"},Qw=ue({__name:"SheetCard",props:{sheet:{type:Object,required:!0}},setup(e){const t=e,n=X(()=>Th.find(s=>s.id===t.sheet.image));function i(){if(t.sheet.sheetType==="crew"){const s=t.sheet;return`Tier ${s.tier} ❖ ${s.crewType}`}else return`${t.sheet.characterType}`}return(s,r)=>{var o,l;return _(),C("div",{class:"sheet-card",style:Jt({backgroundColor:(o=n.value)==null?void 0:o.commonColor})},[a("img",{src:(l=n.value)==null?void 0:l.url},null,8,Bw),a("h1",{class:Z({"extra-long":e.sheet.name.length>20})},U(t.sheet.name),3),a("div",Fw,[a("p",null,U(i()),1)])],4)}}}),Wc=de(Qw,[["__scopeId","data-v-dc1d14c2"]]);function Hw(e){const t=jo.find(i=>i.id==="791e4a6b-8f2e-41b2-8410-09fdb69d22e2");return e&&jo.find(i=>e===i.id)||t}const jw=["src"],Vw=ue({__name:"Portrait",props:{portraitId:{}},setup(e){const t=e,n=X(()=>Hw(t.portraitId));return(i,s)=>(_(),C("div",{class:"portrait",style:Jt({backgroundColor:n.value.commonColor})},[a("img",{src:n.value.url,alt:"Portrait"},null,8,jw)],4))}}),il=de(Vw,[["__scopeId","data-v-ce4fddda"]]),Ww=["innerHTML"],Gw=ue({__name:"Tooltip",props:{text:{},top:{type:Boolean}},setup(e){const t=j(null);return(n,i)=>(_(),C("div",{class:Z(["tooltip",{"tooltip--top":n.top}]),ref_key:"tooltip",ref:t},[a("span",{innerHTML:n.text},null,8,Ww)],2))}}),Yw=de(Gw,[["__scopeId","data-v-20537d6c"]]),zw={class:"player-bar"},Kw=ue({__name:"PlayerBar",setup(e){return(t,n)=>{var i;return _(),C("ul",zw,[(_(!0),C(te,null,he((i=H(Me)().game)==null?void 0:i.players,(s,r)=>(_(),C("li",{key:r,class:Z({"inactive-player":!s.isOnline})},[$(il,{portraitId:s.portrait},null,8,["portraitId"]),$(Yw,{top:"",text:s.username},null,8,["text"]),a("div",{class:Z(["online-indicator",{"online-indicator--online":s.isOnline}])},null,2)],2))),128))])}}}),Jw=de(Kw,[["__scopeId","data-v-8422fb27"]]),Xw={class:"confirm"},Zw=["innerHTML"],e1={class:"row wrap"},t1=ue({__name:"ConfirmModal",props:{title:{},message:{},onConfirm:{type:Function},onCancel:{type:Function},confirmText:{},cancelText:{}},setup(e){const t=e;function n(){t.onCancel?t.onCancel():K.close()}return(i,s)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:"",closeButtonAction:n},{default:W(()=>[a("h2",null,U(t.title),1)]),_:1})]),content:W(()=>[a("div",Xw,[a("p",{innerHTML:t.message},null,8,Zw),a("div",e1,[a("button",{class:"btn btn--alt mobile-full-width",onClick:s[0]||(s[0]=(...r)=>t.onConfirm&&t.onConfirm(...r))},[a("span",null,U(t.confirmText||"Yes"),1)]),a("button",{class:"btn mobile-full-width",onClick:n},[a("span",null,U(t.cancelText||"No, I changed my mind"),1)])])])]),_:1}))}}),sl=de(t1,[["__scopeId","data-v-f18967fd"]]);let Fs;const n1=new Uint8Array(16);function i1(){if(!Fs&&(Fs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fs(n1)}const yt=[];for(let e=0;e<256;++e)yt.push((e+256).toString(16).slice(1));function s1(e,t=0){return yt[e[t+0]]+yt[e[t+1]]+yt[e[t+2]]+yt[e[t+3]]+"-"+yt[e[t+4]]+yt[e[t+5]]+"-"+yt[e[t+6]]+yt[e[t+7]]+"-"+yt[e[t+8]]+yt[e[t+9]]+"-"+yt[e[t+10]]+yt[e[t+11]]+yt[e[t+12]]+yt[e[t+13]]+yt[e[t+14]]+yt[e[t+15]]}const r1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gc={randomUUID:r1};function us(e,t,n){if(Gc.randomUUID&&!t&&!e)return Gc.randomUUID();e=e||{};const i=e.random||(e.rng||i1)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,s1(i)}class $h{constructor(){Q(this,"id");Q(this,"sheetType");Q(this,"createdBy");Q(this,"createdAt");Q(this,"image");Q(this,"lockLevel");Q(this,"notes");this.id=us(),this.sheetType="sheet",this.createdBy=Ue().id,this.createdAt=Date.now(),this.image="",this.lockLevel=99}}class yn extends $h{constructor(){super();Q(this,"ui",{});Q(this,"crewId","");Q(this,"characterType","");Q(this,"characterTypeDescription","");Q(this,"image","");Q(this,"name","Unnamed Character");Q(this,"alias","");Q(this,"look","");Q(this,"heritage");Q(this,"heritageDescription");Q(this,"background");Q(this,"backgroundDescription");Q(this,"notes","");Q(this,"vice","");Q(this,"viceDescription","");Q(this,"vicePurveyor","");Q(this,"contacts",[]);Q(this,"contactsLabel","Contacts");Q(this,"stress",0);Q(this,"maxStress",9);Q(this,"traumas");Q(this,"maxTraumas",4);Q(this,"harms",[{level:3,description:""},{level:2,description:""},{level:2,description:""},{level:1,description:""},{level:1,description:""}]);Q(this,"healingClock",{id:"healing",name:"",description:`Roll **Tinker** for a PC with the *Physicker* Special Ability or the *Quality Level* of an NPC) and then mark a number of segments on your Healing clock.

❖ 1-3: one segment
❖ 4/5: two segments
❖ 6: three segments
❖ Critical: five segments`,segments:4,value:0});Q(this,"armorUsed",!1);Q(this,"heavyArmorUsed",!1);Q(this,"specialArmorUsed",!1);Q(this,"playbookXP",0);Q(this,"maxPlaybookXP",8);Q(this,"insightXP",0);Q(this,"maxInsightXP",6);Q(this,"prowessXP",0);Q(this,"maxProwessXP",6);Q(this,"resolveXP",0);Q(this,"maxResolveXP",6);Q(this,"attrAttune",{id:"attr-attune",name:"Attune",description:"Attune to spirits and the ghost field; channel electroplasmic energy; perceive and communicate with ghosts; understand spectrology.",quantity:0,maxQuantity:4});Q(this,"attrCommand",{id:"attr-command",name:"Command",description:"Command obedience with your force of personality; intimidate or threaten; lead an action with one of the crew's gangs.",quantity:0,maxQuantity:4});Q(this,"attrConsort",{id:"attr-consort",name:"Consort",description:"Consort with connections from your heritage, background, friends, or rivals to gain access to resources, information, people, or places.",quantity:0,maxQuantity:4});Q(this,"attrFinesse",{id:"attr-finesse",name:"Finesse",description:"Finesse an item from someone's pocket; employ subtle misdirection or sleight-of-hand; handle a vehicle or a mount.",quantity:0,maxQuantity:4});Q(this,"attrHunt",{id:"attr-hunt",name:"Hunt",description:"Hunt a target; gather information about its location and movements; attack with precision shooting from a distance.",quantity:0,maxQuantity:4});Q(this,"attrProwl",{id:"attr-prowl",name:"Prowl",description:"Prowl about unseen and traverse obstacles; climb, swim, run, jump, and tumble. Ambush with close violence—a backstab, throat cutting, black-jack, etc.",quantity:0,maxQuantity:4});Q(this,"attrSkirmish",{id:"attr-skirmish",name:"Skirmish",description:"Skirmish with an opponent in close combat; assault or hold a position; brawl and wrestle.",quantity:0,maxQuantity:4});Q(this,"attrStudy",{id:"attr-study",name:"Study",description:"Study a person, document, or item with close scrutiny to gather information and apply knowledge; gain a deeper understanding; do research.",quantity:0,maxQuantity:4});Q(this,"attrSurvey",{id:"attr-survey",name:"Survey",description:"Survey a location or situation to understand what's going on; sense trouble before it happens; gather information about opportunities or exploits.",quantity:0,maxQuantity:4});Q(this,"attrSway",{id:"attr-sway",name:"Sway",description:"Sway someone with charm, logic, deception, disguise, or bluff; change attitudes or behavior with manipulation or seduction.",quantity:0,maxQuantity:4});Q(this,"attrTinker",{id:"attr-tinker",name:"Tinker",description:"Tinker with mechanisms to create, modify, disable, or repair; disable a trap, pick a lock, or crack a safe. Use the ubiquitous clockwork and electroplasmic devices around the city to your advantage.",quantity:0,maxQuantity:4});Q(this,"attrWreck",{id:"attr-wreck",name:"Wreck",description:"Wreck a place, item, or obstacle with savage force or carefully applied sabotage; breach defenses with force; create distractions and chaos.",quantity:0,maxQuantity:4});Q(this,"specialAbilities",[]);Q(this,"load",[{id:"light",name:"Light",max:3,description:"You're faster, less conspicuous; you blend in with citizens."},{id:"normal",name:"Normal",max:5,description:"You look like a scoundrel, ready for trouble."},{id:"heavy",name:"Heavy",max:6,description:"You're slower. You look like an operative on a mission."}]);Q(this,"selectedLoad",null);Q(this,"items",[{id:"a-blade-or-two",name:"A Blade or Two",description:"Perhaps you carry a simple fighting knife. Or two curved swords. Or a rapier and stiletto. Or a heavy butcher's cleaver.",quantity:0,maxQuantity:1,load:1},{id:"throwing-knives",name:"Throwing Knives",description:"Six small, light blades.",quantity:0,maxQuantity:1,load:1},{id:"a-pistol",name:"A Pistol",description:"A heavy, single-shot, breech-loading firearm. Devastating at 20 paces, slow to reload.",quantity:0,maxQuantity:1,load:1},{id:"a-large-weapon",name:"A Large Weapon",description:"A weapon meant for two hands. A battle-axe, greatsword, warhammer, or pole-arm. A hunting rifle. A blunderbuss. A bow or crossbow.",quantity:0,maxQuantity:1,load:2},{id:"an-unusual-weapon",name:"An Unusual Weapon",description:"A curiosity or tool turned into a weapon. A whip, a flail, a hatchet, a shovel, a length of chain, a razor-edged fan, steel-toed boots.",quantity:0,maxQuantity:1,load:1},{id:"armor",name:"Armor",description:"A thick leather tunic plus reinforced gloves and boots.",quantity:0,maxQuantity:1,load:2},{id:"heavy-armor",name:"Heavy Armor",description:"The addition of chain mail, metal plates, a metal helm.",quantity:0,maxQuantity:1,load:3},{id:"burglary-gear",name:"Burglary Gear",description:"A set of lockpicks. A small pry-bar. Vials of oil to silence squeaky hinges. A coil of wire and fishing hooks. A small pouch of fine sand.",quantity:0,maxQuantity:1,load:1},{id:"climbing-gear",name:"Climbing Gear",description:"A large coil of rope. A small coil of rope. Grappling hooks. A small pouch of chalk dust. A climbing harness with loops and metal rings. A set of iron pitons and a small mallet.",quantity:0,maxQuantity:1,load:2},{id:"documents",name:"Documents",description:"A collection of slim volumes on a variety of topics, including a registry of the nobility, City Watch commanders, and other notable citizens. Blank pages, a vial of ink, a pen. A number of interesting maps.",quantity:0,maxQuantity:1,load:1},{id:"arcane-implements",name:"Arcane Implements",description:"A vial of quicksilver. A pouch of black salt. A spirit anchor in the form of a small stone. A spirit bottle. A vial of electroplasm, designed to break and splatter on impact.",quantity:0,maxQuantity:1,load:1},{id:"subterfuge-supplies",name:"Subterfuge Supplies",description:"A theatrical make-up kit. A selection of blank documents, ready for the forger's hand. Costume jewelry. A reversible cloak and distinctive hat. A forged badge of office.",quantity:0,maxQuantity:1,load:1},{id:"demolition-tools",name:"Demolition Tools",description:"A sledgehammer and iron spikes. Heavy drill. Crowbar.",quantity:0,maxQuantity:1,load:2},{id:"tinkering-tools",name:"Tinkering Tools",description:"An assortment for detailed mechanist work: jeweler's loupe, tweezers, a small hammer, pliers, screwdriver, etc.",quantity:0,maxQuantity:1,load:1},{id:"lantern",name:"Lantern",description:"A simple oil lantern, a fancy electroplasmic lamp, or other light source.",quantity:0,maxQuantity:1,load:1},{id:"spiritbane-charm",name:"Spiritbane Charm",description:"A small arcane trinket that ghosts prefer to avoid.",quantity:0,maxQuantity:1,load:0}]);this.sheetType="character",this.traumas=[{id:"cold",name:"Cold",description:"You're not moved by emotional appeals or social bonds.",quantity:0,maxQuantity:1},{id:"haunted",name:"Haunted",description:"You're often lost in reverie, reliving past horrors, seeing things.",quantity:0,maxQuantity:1},{id:"obsessed",name:"Obsessed",description:"You're enthralled by one thing: an activity, a person, an ideology.",quantity:0,maxQuantity:1},{id:"paranoid",name:"Paranoid",description:"You imagine danger everywhere; you can't trust others.",quantity:0,maxQuantity:1},{id:"reckless",name:"Reckless",description:"You have little regard for your own safety or best interests.",quantity:0,maxQuantity:1},{id:"soft",name:"Soft",description:"You lose your edge; you become sentimental, passive, gentle.",quantity:0,maxQuantity:1},{id:"unstable",name:"Unstable",description:"Your emotional state is volatile. You can instantly rage, or fall into despair, act impulsively, or freeze up.",quantity:0,maxQuantity:1},{id:"vicious",name:"Vicious",description:"You seek out opportunities to hurt people, even for no good reason.",quantity:0,maxQuantity:1}]}}class o1 extends yn{constructor(){super(),this.name="Unnamed Cutter",this.characterType="Cutter",this.characterTypeDescription="A dangerous and intimidating fighter",this.image="24fcce82-058a-4ba0-a517-d93167226b7b",this.contactsLabel="Dangerous Friends",this.contacts=[{id:"marlane",name:"Marlane",description:"A pugilist",attitude:0},{id:"chael",name:"Chael",description:"A vicious thug",attitude:0},{id:"mercy",name:"Mercy",description:"A cold killer",attitude:0},{id:"grace",name:"Grace",description:"An extortionist",attitude:0},{id:"sawtooth",name:"Sawtooth",description:"A physicker",attitude:0}],this.specialAbilities=[{id:"cutter-battleborn",name:"Battleborn",description:"You may expend your special armor to reduce harm from an attack in combat or to push yourself during a fight.",quantity:0,maxQuantity:1},{id:"cutter-bodyguard",name:"Bodyguard",description:"When you protect a teammate, take +1d to your resistance roll. When you gather info to anticipate possible threats in the current situation, you get +1 effect.",quantity:0,maxQuantity:1},{id:"cutter-ghost-fighter",name:"Ghost Fighter",description:"You may imbue your hands, melee weapons, or tools with spirit energy. You gain potency in combat vs. the supernatural. You may grapple with spirits to restrain and capture them.",quantity:0,maxQuantity:1},{id:"cutter-leader",name:"Leader",description:"When you Command a cohort in combat, they continue to fight when they would otherwise break (they're not taken out when they suffer level 3 harm). They gain +1 effect and 1 armor.",quantity:0,maxQuantity:1},{id:"cutter-mule",name:"Mule",description:"Your load limits are higher. Light: 5. Normal: 7. Heavy: 8.",quantity:0,maxQuantity:1},{id:"cutter-not-to-be-trifled-with",name:"Not to be Trifled With",description:"You can push yourself to do one of the following: perform a feat of physical force that verges on the superhuman—engage a small gang on equal footing in close combat.",quantity:0,maxQuantity:1},{id:"cutter-savage",name:"Savage",description:"When you unleash physical violence, it's especially frightening. When you Command a frightened target, take +1d.",quantity:0,maxQuantity:1},{id:"cutter-vigorous",name:"Vigorous",description:"You recover from harm faster. Permanently fill in one of your healing clock segments. Take +1d to healing treatment rolls.",quantity:0,maxQuantity:1},{id:"cutter-veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-hand-weapon",name:"Fine Hand Weapon",description:"A finely crafted one-handed melee weapon of your choice. Is this a well-crafted standard weapon, like a perfectly-balanced dagger, or something exotic, like an Iruvian dueling saber or a metal-banded war-club?",quantity:0,maxQuantity:1,load:1},{id:"fine-heavy-weapon",name:"Fine Heavy Weapon",description:"A finely crafted two-handed melee weapon of your choice. A warhammer, a greatsword, a military pike, a battleaxe, etc. A heavy weapon has more reach and hits harder than a standard weapon. This might give you potency when the power or reach of the weapon is a factor.",quantity:0,maxQuantity:1,load:2},{id:"scary-weapon-or-tool",name:"Scary Weapon or Tool",description:"A scary-looking hand weapon or tool. This item grants increased effect when you intimidate, not increased harm in combat.",quantity:0,maxQuantity:1,load:1},{id:"manacles-and-chain",name:"Manacles & Chain",description:"A set of heavy manacles and chain, suitable for restraining a prisoner. A souvenir from a stay with the Bluecoats, perhaps?",quantity:0,maxQuantity:1,load:0},{id:"rage-essence-vial",name:"Rage Essence Vial",description:"A single dose, which greatly enhances the user’s strength, resistance to pain, and irrational aggression for the span of several minutes. The GM will modify your position and effect accordingly when you fight on rage essence. Also, you suffer two consequences: “Can’t Tell Friend From Foe” and “Can’t Stop Until They’re All Broken.” You may resist these as usual.",quantity:0,maxQuantity:1,load:0}];this.items=this.items.concat(t)}}class a1 extends yn{constructor(){super(),this.name="Unnamed Hound",this.characterType="Hound",this.characterTypeDescription="A deadly sharpshooter and tracker",this.image="06c6e50e-b187-4161-99d4-01228ade7b96",this.contactsLabel="Deadly Friends",this.contacts=[{id:"steiner",name:"Steiner",description:"An assassin",attitude:0},{id:"celene",name:"Celene",description:"A sentinel",attitude:0},{id:"melvir",name:"Melvir",description:"A physicker",attitude:0},{id:"veleris",name:"Veleris",description:"A spy",attitude:0},{id:"casta",name:"Casta",description:"A bounty hunter",attitude:0}],this.specialAbilities=[{id:"sharpshooter",name:"Sharpshooter",description:"You can push yourself to do one of the following: make a ranged attack at extreme distance beyond what's normal for the weapon—unleash a barrage of rapid fire to suppress the enemy.",quantity:0,maxQuantity:1},{id:"focused",name:"Focused",description:"You may expend your special armor to resist a consequence of surprise or mental harm (fear, confusion, losing track of someone) or to push yourself for ranged combat or tracking.",quantity:0,maxQuantity:1},{id:"ghost-hunter",name:"Ghost Hunter",description:"Your hunting pet is imbued with spirit energy. It gains potency when tracking or fighting the supernatural, and gains an arcane ability: ghost-form, mind-link, or arrow-swift. Take this ability again to choose an additional arcane ability for your pet.",quantity:0,maxQuantity:2},{id:"scout",name:"Scout",description:"When you gather info to locate a target, you get +1 effect. When you hide in a prepared position or use camouflage, you get +1d to rolls to avoid detection.",quantity:0,maxQuantity:1},{id:"survivor",name:"Survivor",description:"From hard won experience or occult ritual, you are immune to the poisonous miasma of the deathlands and are able to subsist on the strange flora and fauna there. You get +1 stress box.",quantity:0,maxQuantity:1},{id:"tough-as-nails",name:"Tough as Nails",description:"Penalties from harm are one level less severe (though level 4 harm is still fatal).",quantity:0,maxQuantity:1},{id:"vengeful",name:"Vengeful",description:"You gain an additional xp trigger: You got payback against someone who harmed you or someone you care about. If your crew helped you get payback, also mark crew xp.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-pair-of-pistols",name:"Fine Pair of Pistols",description:"A matched pair of handguns, made for greater accuracy, with double barrels that allow for two shots before reloading. Were your pistols made by Kardera’s Daughters, Templeton & Slane, the Imperial Forge, or some other gunsmith? How do they stand out from the average handgun?",quantity:0,maxQuantity:1,load:1},{id:"fine-long-rifle",name:"Fine Long Rifle",description:"A finely crafted hunting rifle, deadly at long range, unwieldy in close quarters. Long rifles are usually illegal for private citizens in Doskvol, but you have (real or forged) military paperwork for this one.",quantity:0,maxQuantity:1,load:2},{id:"electroplasmic-ammunition",name:"Electroplasmic Ammunition",description:"A bandolier of electroplasmic ammo, especially potent against spirits, but less effective against physical targets. The electrical charge is enough to stun a person, but does very little real harm. Several hits might incapacitate a human target. This ammunition is especially reactive in the ghost field—make a 4-clock called “Attention from the Spirit Wardens” and tick it for every operation in which this ammo was used.",quantity:0,maxQuantity:1,load:1},{id:"trained-hunting-pet",name:"A Trained Hunting Pet",description:"Your animal companion obeys your commands and anticipates your actions. Cohort (Expert: Hunter).",quantity:0,maxQuantity:1,load:0},{id:"spyglass",name:"Spyglass",description:"A brass tube with lenses that allow long-distance vision. Collapsible. May attach to a rifle.",quantity:0,maxQuantity:1,load:1}];this.items=this.items.concat(t)}}class l1 extends yn{constructor(){super(),this.name="Unnamed Leech",this.characterType="Leech",this.characterTypeDescription="A saboteur and technician",this.image="1b7d14f9-73c8-4b89-88a0-db246cd8b8b4",this.contactsLabel="Clever Friends",this.contacts=[{id:"stazia",name:"Stazia",description:"An apothecary",attitude:0},{id:"veldren",name:"Veldren",description:"A psychonaut",attitude:0},{id:"eckerd",name:"Eckerd",description:"A corpse thief",attitude:0},{id:"jul",name:"Jul",description:"A blood dealer",attitude:0},{id:"malista",name:"Malista",description:"A priestess",attitude:0}],this.specialAbilities=[{id:"alchemist",name:"Alchemist",description:"When you invent or craft a creation with alchemical features, take +1 result level to your roll. You begin with one special formula already known.",quantity:0,maxQuantity:1},{id:"analyst",name:"Analyst",description:"During downtime, you get two ticks to distribute among any long term project clocks that involve investigation or learning a new formula or design plan.",quantity:0,maxQuantity:1},{id:"artificer",name:"Artificer",description:"When you invent or craft a creation with spark-craft features, take +1 result level to your roll. You begin with one special design already known.",quantity:0,maxQuantity:1},{id:"fortitude",name:"Fortitude",description:"You may expend your special armor to resist a consequence of fatigue, weakness, or chemical effects, or to push yourself when working with technical skill or handling alchemicals.",quantity:0,maxQuantity:1},{id:"ghost-ward",name:"Ghost Ward",description:"You know how to Wreck an area with arcane substances and methods so it is either anathema or enticing to spirits (your choice).",quantity:0,maxQuantity:1},{id:"physicker",name:"Physicker",description:"You can Tinker with bones, blood, and bodily humours to treat wounds or stabilize the dying. You may study a malady or corpse. Everyone in your crew gets +1d to their healing treatment rolls.",quantity:0,maxQuantity:1},{id:"saboteur",name:"Saboteur",description:"When you Wreck, the work is much quieter than it should be and the damage is hidden from casual inspection.",quantity:0,maxQuantity:1},{id:"venomous",name:"Venomous",description:"Choose a drug or poison (from your bandolier stock) to which you have become immune. You can push yourself to secrete it through your skin or saliva or exhale it as a vapor.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-tinkering-tools",name:"Fine Tinkering Tools",description:"A finely crafted set of tools for detailed mechanist work. A jeweler’s loupe. Measuring devices.",quantity:0,maxQuantity:1,load:1},{id:"fine-wrecking-tools",name:"Fine Wrecking Tools",description:"A specialized set of tools for sabotage and destruction. A small, powerful drill. A mallet and steel spikes. A prybar. An electroplasmic battery, clamps, wire. Vials of acid. A spark-torch cutter and fuel tank.",quantity:0,maxQuantity:1,load:2},{id:"blowgun-and-darts-syringes",name:"Blowgun & Darts, Syringes",description:"A small tube and darts that can be filled from alchemy flasks. Empty syringes.",quantity:0,maxQuantity:1,load:0},{id:"bandolier",name:"Bandolier",description:"A strap worn across the body, fitted with specially-padded pouches to hold three alchemical agents or spark-craft bombs. When you employ an alchemical or bomb from a bandolier, choose one from the list at right (or one of your custom-made formulas). During downtime, you automatically refill your bandoliers, so long as you have reasonable access to a supplier or workshop.",quantity:0,maxQuantity:1,load:1},{id:"gadgets",name:"Gadgets",description:"You may create gadgets during downtime by Tinkering with tools and materials. See Gadgets, page 227. Track the load for each gadget you deploy during an operation.",quantity:0,maxQuantity:1,load:1}];this.items=this.items.concat(t)}}class c1 extends yn{constructor(){super(),this.name="Unnamed Lurk",this.characterType="Lurk",this.characterTypeDescription="A stealthy infiltrator and burglar",this.image="9cec5287-f247-47ad-8eab-ed6a3ef82b0f",this.contactsLabel="Shady Friends",this.contacts=[{id:"telda",name:"Telda",description:"A beggar",attitude:0},{id:"darmot",name:"Darmot",description:"A bluecoat",attitude:0},{id:"frake",name:"Frake",description:"A locksmith",attitude:0},{id:"roslyn_kellis",name:"Roslyn Kellis",description:"A noble",attitude:0},{id:"petra",name:"Petra",description:"A city clerk",attitude:0}],this.specialAbilities=[{id:"infiltrator",name:"Infiltrator",description:"You are not affected by quality or Tier when you bypass security measures.",quantity:0,maxQuantity:1},{id:"ambush",name:"Ambush",description:"When you attack from hiding or spring a trap, you get +1d.",quantity:0,maxQuantity:1},{id:"daredevil",name:"Daredevil",description:"When you roll a desperate action, you get +1d to your roll if you also take -1d to any resistance rolls against consequences from your action.",quantity:0,maxQuantity:1},{id:"devils-footsteps",name:"The Devil's Footsteps",description:"When you push yourself, choose one of the following additional benefits: perform a feat of athletics that verges on the superhuman—maneuver to confuse your enemies so they mistakenly attack each other.",quantity:0,maxQuantity:1},{id:"expertise",name:"Expertise",description:"Choose one of your action ratings. When you lead a group action using that action, you can suffer only 1 stress at most regardless of the number of failed rolls.",quantity:0,maxQuantity:1},{id:"ghost-veil",name:"Ghost Veil",description:"You may shift partially into the ghost field, becoming shadowy and insubstantial for a few moments. Take 2 stress when you shift, plus 1 stress for each extra feature: It lasts for a few minutes rather than moments—you are invisible rather than shadowy—you may float through the air like a ghost.",quantity:0,maxQuantity:1},{id:"reflexes",name:"Reflexes",description:"When there's a question about who acts first, the answer is you (two characters with Reflexes act simultaneously).",quantity:0,maxQuantity:1},{id:"shadow",name:"Shadow",description:"You may expend your special armor to resist a consequence from detection or security measures, or to push yourself for a feat of athletics or stealth.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-lockpicks",name:"Fine Lockpicks",description:"A finely crafted set of tools to disable and circumvent locks.",quantity:0,maxQuantity:1,load:0},{id:"fine-shadow-cloak",name:"Fine Shadow Cloak",description:"A hooded cloak made of rare Iruvian shadow-silk that blends into the darkness around it. This item improves your effect level when you sneak around.",quantity:0,maxQuantity:1,load:1},{id:"light-climbing-gear",name:"Light Climbing Gear",description:"A well-crafted set of climbing gear that is less bulky and heavy than a standard set. Standard climbing gear is 2 load.",quantity:0,maxQuantity:1,load:1},{id:"silence-potion-vial",name:"Silence Potion Vial",description:"A vial of golden liquid that negates all sound within 10 paces of the drinker for a span of several moments.",quantity:0,maxQuantity:1,load:0},{id:"dark-sight-goggles",name:"Dark-sight Goggles",description:"An arcane device that allows the wearer to see in pitch darkness as if it were well-lit.",quantity:0,maxQuantity:1,load:1}];this.items=this.items.concat(t)}}class u1 extends yn{constructor(){super(),this.name="Unnamed Slide",this.characterType="Slide",this.characterTypeDescription="A subtle manipulator and spy",this.image="10f1b3a4-b4c3-4755-a66d-17181ba317b2",this.contactsLabel="Sly Friends",this.contacts=[{id:"bryl",name:"Bryl",description:"A drug dealer",attitude:0},{id:"bazso_baz",name:"Bazso Baz",description:"A gang leader",attitude:0},{id:"klyra",name:"Klyra",description:"A tavern owner",attitude:0},{id:"nyryx",name:"Nyryx",description:"A prostitute",attitude:0},{id:"harker",name:"Harker",description:"A jail-bird",attitude:0}],this.specialAbilities=[{id:"rooks-gambit",name:"Rook's Gambit",description:"Take 2 stress to roll your best action rating while performing a different action. Say how you adapt your skill to this use.",quantity:0,maxQuantity:1},{id:"cloak-dagger",name:"Cloak & Dagger",description:"When you use a disguise or other form of covert misdirection, you get +1d to rolls to confuse or deflect suspicion. When you throw off your disguise, the resulting surprise gives you the initiative in the situation.",quantity:0,maxQuantity:1},{id:"ghost-voice",name:"Ghost Voice",description:"You know the secret method to interact with a ghost or demon as if it was a normal human, regardless of how wild or feral it appears. You gain potency when communicating with the supernatural.",quantity:0,maxQuantity:1},{id:"like-looking-into-a-mirror",name:"Like Looking into a Mirror",description:"You can always tell when someone is lying to you.",quantity:0,maxQuantity:1},{id:"a-little-something-on-the-side",name:"A Little Something on the Side",description:"At the end of each downtime phase, you earn +2 stash.",quantity:0,maxQuantity:1},{id:"mesmerism",name:"Mesmerism",description:"When you Sway someone, you may cause them to forget that it's happened until they next interact with you.",quantity:0,maxQuantity:1},{id:"subterfuge",name:"Subterfuge",description:"You may expend your special armor to resist a consequence from suspicion or persuasion, or to push yourself for subterfuge.",quantity:0,maxQuantity:1},{id:"trust-in-me",name:"Trust in Me",description:"You get +1d vs. a target with whom you have an intimate relationship.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-clothes-and-jewelry",name:"Fine Clothes & Jewelry",description:"An outfit that appears to be of such fine make as to pass you off as a wealthy noble. If you’re carrying this item as a second outfit to change into, it counts as 2 load.",quantity:0,maxQuantity:1,load:0},{id:"fine-disguise-kit",name:"Fine Disguise Kit",description:"A theatrical make-up kit equipped with an impressive array of expert appliances to fool the eye. The fine quality of this kit may increase the effect of your deceptive actions when you use it.",quantity:0,maxQuantity:1,load:1},{id:"fine-loaded-dice-trick-cards",name:"Fine Loaded Dice, Trick Cards",description:"Gambling accouterments subtly altered to favor particular outcomes. The fine quality of this kit may increase the effect of your deceptive actions when you use it.",quantity:0,maxQuantity:1,load:0},{id:"trance-powder",name:"Trance Powder",description:"A dose of the popular drug, which induces an altered mental state. The victim of this powder is not fully unconscious, but rather retreats into a calm, suggestible mental state, similar to hypnotism.",quantity:0,maxQuantity:1,load:0},{id:"cane-sword",name:"Cane-Sword",description:"A slim sword and its sheath, disguised as a noble’s cane. The disguise will fool a cursory inspection.",quantity:0,maxQuantity:1,load:1}];this.items=this.items.concat(t)}}class d1 extends yn{constructor(){super(),this.name="Unnamed Spider",this.characterType="Spider",this.characterTypeDescription="A devious mastermind",this.image="1f6e47b6-c3c6-47b9-8b19-e553e6362de2",this.contactsLabel="Shrewd Friends",this.contacts=[{id:"salia",name:"Salia",description:"An information broker",attitude:0},{id:"augus",name:"Augus",description:"A master architect",attitude:0},{id:"jennah",name:"Jennah",description:"A servant",attitude:0},{id:"riven",name:"Riven",description:"A chemist",attitude:0},{id:"jeren",name:"Jeren",description:"A bluecoat archivist",attitude:0}],this.specialAbilities=[{id:"foresight",name:"Foresight",description:"Two times per score you can assist a teammate without paying stress. Tell us how you prepared for this.",quantity:0,maxQuantity:1},{id:"calculating",name:"Calculating",description:"Due to your careful planning, during downtime, you may give yourself or another crew member +1 downtime action.",quantity:0,maxQuantity:1},{id:"connected",name:"Connected",description:"During downtime, you get +1 result level when you acquire an asset or reduce heat.",quantity:0,maxQuantity:1},{id:"functioning-vice",name:"Functioning Vice",description:"When you indulge your vice, you may adjust the dice outcome by 1 or 2 (up or down). An ally who joins in your vice may do the same.",quantity:0,maxQuantity:1},{id:"ghost-contract",name:"Ghost Contract",description:"When you shake on a deal, you and your partner—human or otherwise—both bear a mark of your oath. If either breaks the contract, they take level 3 harm, 'Cursed'.",quantity:0,maxQuantity:1},{id:"jail-bird",name:"Jail Bird",description:"When incarcerated, your wanted level counts as 1 less, your Tier as 1 more, and you gain +1 faction status with a faction you help on the inside (in addition to your incarceration roll).",quantity:0,maxQuantity:1},{id:"mastermind",name:"Mastermind",description:"You may expend your special armor to protect a teammate, or to push yourself when you gather information or work on a long-term project.",quantity:0,maxQuantity:1},{id:"weaving-the-web",name:"Weaving the Web",description:"You gain +1d to Consort when you gather information on a target for a score. You get +1d to the engagement roll for that operation.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-cover-identity",name:"Fine Cover Identity",description:"Paperwork, planted stories and rumors, and false relationships sufficient to pass as a different person.",quantity:0,maxQuantity:1,load:0},{id:"fine-bottle-of-whiskey",name:"Fine Bottle of Whiskey",description:"A rare distillation from your personal collection, potent both in its alcohol and its ability to impress.",quantity:0,maxQuantity:1,load:1},{id:"blueprints",name:"Blueprints",description:"A folio of useful architectural drawings and city plans. Feel free to specify which plans you’re carrying when you choose this item.",quantity:0,maxQuantity:1,load:1},{id:"vial-of-slumber-essence",name:"Vial of Slumber Essence",description:"A dose of slumber essence sufficient to put someone to sleep for an hour. The victim’s sleep isn’t supernatural, but it is deep—they can be roused with some effort.",quantity:0,maxQuantity:1,load:0},{id:"concealed-palm-pistol",name:"Concealed Palm Pistol",description:"A small firearm with a weak charge, easily concealed in a sleeve or waistcoat. This pistol has extremely limited range; only a few feet. It’s very difficult to detect on your person, even if you’re searched.",quantity:0,maxQuantity:1,load:0}];this.items=this.items.concat(t)}}class h1 extends yn{constructor(){super(),this.name="Unnamed Whisper",this.characterType="Whisper",this.characterTypeDescription="An arcane adept and channeler",this.image="88a1879b-06a3-4632-897b-e0cd7e423c46",this.contactsLabel="Strange Friends",this.contacts=[{id:"nyryx",name:"Nyryx",description:"A possessor ghost",attitude:0},{id:"scurlock",name:"Scurlock",description:"A vampire",attitude:0},{id:"setarra",name:"Setarra",description:"A demon",attitude:0},{id:"quellyn",name:"Quellyn",description:"A witch",attitude:0},{id:"flint",name:"Flint",description:"A spirit trafficker",attitude:0}],this.specialAbilities=[{id:"compel",name:"Compel",description:"You can Attune to the ghost field to force a nearby ghost to appear and obey a command you give it. You are not supernaturally terrified by a ghost you summon or compel (though your allies may be).",quantity:0,maxQuantity:1},{id:"ghost-mind",name:"Ghost Mind",description:"You're always aware of supernatural entities in your presence. Take +1d when you gather info about the supernatural.",quantity:0,maxQuantity:1},{id:"iron-will",name:"Iron Will",description:"You're immune to the terror that some supernatural entities inflict on sight. Take +1d to resistance rolls with Resolve.",quantity:0,maxQuantity:1},{id:"occultist",name:"Occultist",description:"You know the secret ways to Consort with ancient powers, forgotten gods or demons. Once you've consorted with one, you get +1d to command cultists who worship it.",quantity:0,maxQuantity:1},{id:"ritual",name:"Ritual",description:"You can Study an occult ritual (or create a new one) to summon a supernatural effect or being. You know the arcane methods to perform ritual sorcery. You begin with one ritual already learned.",quantity:0,maxQuantity:1},{id:"strange-methods",name:"Strange Methods",description:"When you invent or craft a creation with arcane features, take +1 result level to your roll. You begin with one arcane design already known.",quantity:0,maxQuantity:1},{id:"tempest",name:"Tempest",description:"You can push yourself to do one of the following: unleash a stroke of lightning as a weapon—summon a storm in your immediate vicinity (torrential rain, roaring winds, heavy fog, chilling frost/snow, etc.).",quantity:0,maxQuantity:1},{id:"warded",name:"Warded",description:"You may expend your special armor to resist a supernatural consequence, or to push yourself when you deal with arcane forces.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const t=[{id:"fine-lightning-hook",name:"Fine Lightning Hook",description:"A long, two-handed pole with a loop of heavy wire at the end, connected to an electroplasmic capacitor. Suitable for grappling a spirit and dragging it into a spirit bottle. This custom-made hook collapses into a compact form, thus reducing its load to 1, even though it’s two-handed.",quantity:0,maxQuantity:1,load:1},{id:"fine-spirit-mask",name:"Fine Spirit Mask",description:"An arcane item that allows the trained user to see supernatural energies in great detail. Also affords some measure of protection against ghostly possession. Each spirit mask is unique. What does yours look like? What makes it strange and disturbing to see?",quantity:0,maxQuantity:1,load:1},{id:"spirit-bottles",name:"Spirit Bottles (2)",description:"An arcane device used to trap a spirit. A metal and crystalline cylinder, the size of a loaf of bread.",quantity:0,maxQuantity:2,load:1},{id:"ghost-key",name:"Ghost Key",description:"An arcane device that can open ghost doors. There’s an echo of the entire city, across the ages, trapped in the ghost field. Sometimes a door to that place can be found.",quantity:0,maxQuantity:1,load:0},{id:"demonbane-charm",name:"Demonbane Charm",description:"An arcane trinket that demons prefer to avoid.",quantity:0,maxQuantity:1,load:0}];this.items=this.items.concat(t)}}class f1 extends yn{constructor(){super(),this.name="Unnamed Ghost",this.characterType="Ghost",this.characterTypeDescription="A spirit without a body",this.image="9f5d267b-83f1-40e5-9ff6-04d1c92a3d21",this.specialAbilities=[{id:"ghost-form",name:"Ghost Form",description:"You are now a concentration of electroplasmic vapor which resembles your living body and clothes. You may weakly interact with the physical world and vice versa. You're vulnerable to arcane powers and electroplasmic effects. You move about by floating and may fly swiftly without tiring. You may slowly flow through small openings as a vapor. You chill the area around you and are terrifying for the living to behold. You are affected by spiritbane charms (take 2 drain to overcome the repulsion). Whenever you would take stress, take drain instead. When you would take trauma, take gloom instead.",quantity:1,maxQuantity:1},{id:"dissipate",name:"Dissipate",description:"You can disperse the electroplasmic vapor of your ghostly form in order to pass through solid objects for a moment. Take 1 drain when you dissipate, plus 1 drain for each feature: It lasts longer (a minute—an hour—a day)—you also become invisible—anything that passes through your form becomes dangerously electrified or frozen.",quantity:0,maxQuantity:1},{id:"manifest",name:"Manifest",description:"Take 1 drain to flow through the electroplasmic pathways of the ghost field in order to instantly travel to any place you knew intimately in life, or to answer the summoning call of a compel.",quantity:0,maxQuantity:1},{id:"poltergeist",name:"Poltergeist",description:"Take 1 drain to strongly interact with the physical world for a few moments (as if you had a normal body). Extend the reach and magnitude of your interaction to include telekinetic force and electroplasmic discharges by taking more drain (2-6).",quantity:0,maxQuantity:1},{id:"possess",name:"Possess",description:"You may attune to the ghost field in order to take control of a living body. When your control is challenged, you must re-attune (risking electroplasmic harm) or leave the body. Your control is challenged when: you consume spirit energy from the host—when arcane powers act against you—when the host's will is driven to desperation. You may easily and indefinitely possess a hull or hollow which has been ritually prepared for you (change your playbook to Hull or Vampire, respectively).",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:4}]}}class p1 extends yn{constructor(){super();Q(this,"frameFeatures",[{id:"frame-feature-interior-chamber",name:"Interior Chamber",description:"You have a compartment for a passenger or operator.",quantity:0,maxQuantity:1},{id:"frame-feature-life-like-appearance",name:"Life-Like Appearance",description:"You are masterfully crafted to pass for a living being (unless it is closely scrutinized).",quantity:0,maxQuantity:1},{id:"frame-feature-levitation",name:"Levitation",description:"You can fly slowly by floating inside a volatile electroplasmic bubble.",quantity:0,maxQuantity:1},{id:"frame-feature-phonograph",name:"Phonograph",description:"A wax-cylinder recording and playback device.",quantity:0,maxQuantity:1},{id:"frame-feature-plating",name:"Plating",description:"Thick metal armor plates.",quantity:0,maxQuantity:1},{id:"frame-feature-reflexes",name:"Reflexes",description:"You have lightning-fast reaction time (as the Lurk ability).",quantity:0,maxQuantity:1},{id:"frame-feature-sensors",name:"Sensors",description:"Your sensorium includes sonar which can 'see' through walls and hear heartbeats.",quantity:0,maxQuantity:1},{id:"frame-feature-smoke-projectors",name:"Smoke Projectors",description:"Chemical system that can exude a dark, acrid cloud of smoke—enough to fill a large room.",quantity:0,maxQuantity:1},{id:"frame-feature-spider-climb",name:"Spider Climb",description:"Miniature barbs built into your frame allow it to walk and climb effortlessly on walls and ceilings.",quantity:0,maxQuantity:1},{id:"frame-feature-spring-leap-pistons",name:"Spring-Leap Pistons",description:"You can jump to extreme heights (several stories) and survive falls without damage.",quantity:0,maxQuantity:1}]);this.name="Unnamed Hull",this.characterType="Hull",this.characterTypeDescription="A spirit animating a clockwork frame",this.image="aa5271f0-4d79-4ae7-9348-8bbeae94a27f",this.specialAbilities=[{id:"automaton",name:"Automaton",description:"You are a spirit animating a clockwork body. You have human-like strength and senses, by default. Your hull has natural armor (this doesn't count for your load). Your former human feelings, interests, and connections are only dim memories. You now exist to fulfill your functions. Choose three (at left). You may be rebuilt if damaged or destroyed. If your soul vessel is shattered, you are freed from servitude and become a Ghost. Whenever you would take stress, take drain instead.",quantity:1,maxQuantity:1},{id:"overcharge",name:"Overcharge",description:"Take 1 drain to perform a feat of extreme strength or speed (run faster than a horse, rend metal with bare hands, etc.). This factors into effect.",quantity:0,maxQuantity:1},{id:"compartments",name:"Compartments",description:"Your items are built-in to your frame and may recess beneath panels out of sight. Your frame can now carry +2 load.",quantity:0,maxQuantity:1},{id:"electroplasmic-projectors",name:"Electroplasmic Projectors",description:"You may release some of your plasmic energy as an electrical shock around you or as a directed beam. You may also use this ability to create a lightning barrier to repel or trap a spirit. Take 1 drain for each level of magnitude.",quantity:0,maxQuantity:1},{id:"interface",name:"Interface",description:"You may attune to the local electroplasmic power field to control it or something connected to it (including another hull).",quantity:0,maxQuantity:1},{id:"secondary-hull",name:"Secondary Hull",description:"Choose an additional frame and its starting feature. You may transfer your consciousness between your frames at will.",quantity:0,maxQuantity:1},{id:"frame-upgrade",name:"Frame Upgrade",description:"Choose an additional frame feature.",quantity:0,maxQuantity:4}]}}class m1 extends yn{constructor(){super();Q(this,"strictures",[{id:"slumber",name:"Slumber",description:"In downtime, you must spend one activity resting in a dark, silent place (or else suffer 3 stress).",quantity:0,maxQuantity:1},{id:"forbidden",name:"Forbidden",description:"You cannot enter a private residence without permission from the owner.",quantity:0,maxQuantity:1},{id:"repelled",name:"Repelled",description:"Spiritbane charms can hold you at bay. Take 2 stress to resist the repulsion.",quantity:0,maxQuantity:1},{id:"bestial",name:"Bestial",description:"When you suffer physical harm or overindulge your vice, your body twists into a horrific bestial form until you next feed without overindulging.",quantity:0,maxQuantity:1},{id:"bound",name:"Bound",description:"Your spirit must remain in this body, or be destroyed.",quantity:0,maxQuantity:1}]);this.name="Unnamed Vampire",this.characterType="Vampire",this.characterTypeDescription="A spirit animating an undead body",this.image="9cec5287-f247-47ad-8eab-ed6a3ef82b0f",this.maxPlaybookXP=10,this.maxInsightXP=8,this.maxProwessXP=8,this.maxResolveXP=8,this.maxStress=12,this.contactsLabel="Dark Servants",this.contacts=[{id:"rutherford",name:"Rutherford",description:"A butler",attitude:0},{id:"lylandra",name:"Lylandra",description:"A consort",attitude:0},{id:"kira",name:"Kira",description:"A bodyguard",attitude:0},{id:"otto",name:"Otto",description:"A coachman",attitude:0},{id:"edrik",name:"Edrik",description:"An envoy",attitude:0}],this.specialAbilities=[{id:"undead",name:"Undead",description:"You are a spirit which animates an undead body. Your trauma is maxed out. Choose four trauma conditions which reflect your vampiric nature. Arcane attacks are potent against you. If you suffer fatal harm or trauma, your undead spirit is overwhelmed. You take level 3 harm: 'Incapacitated' until you feed enough to recover. If you suffer arcane harm while in this state, you are destroyed utterly. Your XP tracks are longer (you now advance more slowly). You have more stress boxes.",quantity:0,maxQuantity:1},{id:"terrible-power",name:"Terrible Power",description:"Take 1 stress to perform a feat of superhuman strength or speed (run faster than a carriage, break stone with bare hands, leap onto the roof of a building, etc.). This factors into effect.",quantity:0,maxQuantity:1},{id:"arcane-sight",name:"Arcane Sight",description:"Take 1 stress to sense beyond human limits. 'Hear' a subject's true thoughts or feelings, see in pitch darkness, sense the presence of invisible things, intuit the location of a hidden object, etc.",quantity:0,maxQuantity:1},{id:"void-in-the-echo",name:"A Void in the Echo",description:"You are invisible to spirits and may not be harmed by them. Take 2 stress to cause living things to avert their gaze and fail to observe you for a few moments.",quantity:0,maxQuantity:1},{id:"dark-talent",name:"Dark Talent",description:"Choose Insight, Prowess, or Resolve. Your max rating for actions under that attribute becomes 5. When you take this ability, add +1 dot to the resistance rating of the attribute you've chosen.",quantity:0,maxQuantity:1},{id:"sinister-guile",name:"Sinister Guile",description:"During downtime, choose one: Get a free additional downtime activity, or take +1d to all downtime activity rolls.",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a special ability from another source.",quantity:0,maxQuantity:3}];const n=[];this.items=this.items.concat(n)}}function y1(){return{cutter:new o1,hound:new a1,leech:new l1,lurk:new c1,slide:new u1,spider:new d1,whisper:new h1,ghost:new f1,hull:new p1,vampire:new m1}}function qh(e){var s,r,o,l,c,u,d,h,f,m;const t=(s=Me().game)==null?void 0:s.codex,n={id:us(),name:`Gang of ${e}s`,description:"Edit this gang to customize its Edges and Flaws.",cohortType:"gang",edges:((l=(o=(r=t==null?void 0:t.sheets)==null?void 0:r.crew)==null?void 0:o.cohorts)==null?void 0:l.edges.map(y=>({...y,id:"edge-"+name,quantity:0,maxQuantity:1})))||[],flaws:((d=(u=(c=t==null?void 0:t.sheets)==null?void 0:c.crew)==null?void 0:u.cohorts)==null?void 0:d.flaws.map(y=>({...y,id:"flaw-"+name,quantity:0,maxQuantity:1})))||[],gangType:[{id:"gangType-adepts",name:"Adepts",description:"Scholars, tinkerers, occultists, and chemists",quantity:0,maxQuantity:1},{id:"gangType-rooks",name:"Rooks",description:"Con artists, spies, and socialites",quantity:0,maxQuantity:1},{id:"gangType-rovers",name:"Rovers",description:"Sailors, carriage drivers, and scavengers",quantity:0,maxQuantity:1},{id:"gangType-skulks",name:"Skulks",description:"Scouts, infiltrators, and thieves",quantity:0,maxQuantity:1},{id:"gangType-thugs",name:"Thugs",description:"Killers, brawlers, and roustabouts",quantity:0,maxQuantity:1}],harm:((m=(f=(h=t==null?void 0:t.sheets)==null?void 0:h.crew)==null?void 0:f.cohorts)==null?void 0:m.harm.map(y=>({...y,id:"harm-"+name,quantity:0,maxQuantity:1})))||[],quality:0,scale:0},i="gangType-"+e.toLowerCase();return console.log(i),n.gangType.find(y=>y.id===i).quantity=1,n.edges[0].quantity=1,n.flaws[0].quantity=1,n}var bn=(e=>(e.NORTH="north",e.EAST="east",e.SOUTH="south",e.WEST="west",e))(bn||{});class Vi extends $h{constructor(){super();Q(this,"ui",{});Q(this,"name","Untitled Crew");Q(this,"description","");Q(this,"reputationType","Ambitious");Q(this,"lair","An abandoned warehouse");Q(this,"lairDistrict","Crow's Foot");Q(this,"huntingGroundsDistrict","Crow's Foot");Q(this,"reputation",0);Q(this,"turf",0);Q(this,"hold","strong");Q(this,"tier",0);Q(this,"heat",0);Q(this,"wantedLevel",0);Q(this,"coin",0);Q(this,"crewExperience",0);Q(this,"crewDefaultExperienceLabels",["Contend with challenges above your current station","Bolster the Crew's reputation or develop a new one","Express the Crew's goals, drives, inner conflict, or essential nature"]);Q(this,"crewExperienceLabels",[]);Q(this,"cohorts",[]);Q(this,"crewType","");Q(this,"crewTypeDescription","");Q(this,"specialAbilities",[]);Q(this,"image","e52f27b1-e5f6-42de-9889-c2d9aeeb3b0d");Q(this,"contacts",[]);Q(this,"crewUpgrades",[]);Q(this,"lairUpgrades",[{id:"carriage-house",name:"Carriage",description:"",quantity:0,maxQuantity:2},{id:"boat-house",name:"Boat",description:"",quantity:0,maxQuantity:2},{id:"hidden-lair",name:"Hidden",description:"",quantity:0,maxQuantity:1},{id:"quarters",name:"Quarters",description:"",quantity:0,maxQuantity:1},{id:"secure-lair",name:"Secure",description:"",quantity:0,maxQuantity:2},{id:"vault",name:"Vault",description:"",quantity:0,maxQuantity:2},{id:"workshop",name:"Workshop",description:"",quantity:0,maxQuantity:1}]);Q(this,"trainingUpgrades",[{id:"insight",name:"Insight",description:"",quantity:0,maxQuantity:1},{id:"prowess",name:"Prowess",description:"",quantity:0,maxQuantity:1},{id:"resolve",name:"Resolve",description:"",quantity:0,maxQuantity:1},{id:"personal",name:"Personal",description:"",quantity:0,maxQuantity:1},{id:"mastery",name:"Mastery",description:"",quantity:0,maxQuantity:4}]);Q(this,"qualityUpgrades",[{id:"documents",name:"Documents",description:"",quantity:0,maxQuantity:1},{id:"gear",name:"Gear",description:"",quantity:0,maxQuantity:1},{id:"implements",name:"Implements",description:"",quantity:0,maxQuantity:1},{id:"supplies",name:"Supplies",description:"",quantity:0,maxQuantity:1},{id:"tools",name:"Tools",description:"",quantity:0,maxQuantity:1},{id:"weapons",name:"Weapons",description:"",quantity:0,maxQuantity:1}]);Q(this,"claims",[]);Q(this,"huntingGroundsLabel","Hunting Grounds");Q(this,"huntingGrounds",[]);this.sheetType="crew"}applyUpgradesDescriptionsFromCodex(){var i;const n=(i=Me().game)==null?void 0:i.codex.sheets.crew["upgrade-descriptions"];this.crewUpgrades.forEach(s=>{var o;const r=(o=n==null?void 0:n.crew)==null?void 0:o[s.id];r?s.description=r:s.description||(s.description="no description found for "+s.id)}),this.lairUpgrades.forEach(s=>{const r=n.lair[s.id];r?s.description=r:s.description||(s.description="no description found for "+s.id)}),this.trainingUpgrades.forEach(s=>{const r=n.training[s.id];r?s.description=r:s.description||(s.description="no description found for "+s.id)}),this.qualityUpgrades.forEach(s=>{const r=n.quality[s.id];r?s.description=r:s.description||(s.description="no description found for "+s.id)})}}class g1 extends Vi{constructor(){super(),this.name="Untitled Assassins",this.crewType="Assassins",this.crewTypeDescription="Murderers for hire",this.image="e52f27b1-e5f6-42de-9889-c2d9aeeb3b0d",this.crewExperienceLabels=["Execute a successful accident, disappearance, murder, or ransom operation"],this.specialAbilities=[{id:"assassins-deadly",name:"Deadly",description:"Each PC may add +1 *Action Rating* to **Hunt**, **Prowl**, or **Skirmish** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"assassins-crows-veil",name:"Crow's Veil",description:"Your activities are hidden from the notice of the Death-seeker Crows and you don't take extra *Heat* when killing is involved on a Score",quantity:0,maxQuantity:1},{id:"assassins-emberdeath",name:"Emberdeath",description:"You know the arcane method to destroy a living victim's Spirit at the moment you kill them. Take [/stress 3 Stress] to channel electroplasmic energy from the ghost field to disintegrate the Spirit and dead body in a shower of sparking embers",quantity:0,maxQuantity:1},{id:"assassins-no-traces",name:"No Traces",description:"When you keep an operation quiet or make it look like an accident, you get half the [/rep Rep] value of the target (round up) instead of zero. When you end downtime with zero *Heat*, take [/rep +1 Rep]",quantity:0,maxQuantity:1},{id:"assassins-patron",name:"Patron",description:"When you advance your *Tier*, it costs half the *Coin* it normally would. Who is your patron? Why do they help you?",quantity:0,maxQuantity:1},{id:"assassins-predators",name:"Predators",description:"When you use stealth or subterfuge to commit murder, add [/dice +1] to the *Engagement* roll",quantity:0,maxQuantity:1},{id:"assassins-vipers",name:"Vipers",description:`When you acquire or craft poisons, you get [/result +1 Result Level] to your roll

When you employ a poison, you are specially prepared to be immune to its effects`,quantity:0,maxQuantity:1},{id:"assassins-veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"assassin-rigging",name:"Assassin Rigging",description:"2 free load of weapons or gear.",quantity:0,maxQuantity:1},{id:"ironhook-contacts",name:"Ironhook Contacts",description:"+1 Tier in prison.",quantity:0,maxQuantity:1},{id:"elite-skulks",name:"Elite Skulks",description:"",quantity:0,maxQuantity:1},{id:"elite-thugs",name:"Elite Thugs",description:"",quantity:0,maxQuantity:1},{id:"hardened",name:"Hardened",description:"+1 trauma box.",quantity:0,maxQuantity:3}],this.contacts=[{id:"assassins-trev",name:"Trev",description:"A gang boss",attitude:0},{id:"assassins-contact-lydra",name:"Lydra",description:"A deal broker",attitude:0},{id:"assassins-contact-irimina",name:"Irimina",description:"A vicious noble",attitude:0},{id:"assassins-contact-karlos",name:"Karlos",description:"A bounty hunter",attitude:0},{id:"assassins-contact-exeter",name:"Exeter",description:"A spirit warden",attitude:0},{id:"assassins-contact-sevoy",name:"Sevoy",description:"A merchant lord",attitude:0}],this.claims=[{id:"assassins-training-room",name:"Training Room",description:`[/scale +1 scale]
Skulks Cohorts`,position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"assassins-vice-den",name:"Vice Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"assassins-fixer",name:"Fixer",description:`[/coin +2 Coin]
Lower-class targets`,position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["south"]},{id:"assassins-informants",name:"Informants",description:"[/dice +1] Gather Information",position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"assassins-hagfish-farm",name:"Hagfish Farm",description:`Body disposal
[/dice +1] Reduce Heat after killing`,position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"assassins-victim-trophies",name:"Victim Trophies",description:`[/rep +1 Rep]
per Score`,position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["north","south"]},{id:"assassins-turf-1",name:"Turf",description:"",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south"]},{id:"assassins-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south","west"]},{id:"assassins-turf-2",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east"]},{id:"assassins-cover-operation",name:"Cover Operation",description:`[/heat -2 Heat]
per Score`,position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","south"]},{id:"assassins-protection-racket",name:"Protection Racket",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"assassins-infirmary",name:"Infirmary",description:"[/dice +1] Healing",position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]},{id:"assassins-envoy",name:"Envoy",description:`[/coin +2 Coin]
High-class targets`,position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north"]},{id:"assassins-cover-identities",name:"Cover Identities",description:`[/dice +1] Engagement
*Deception* and *Social plans*`,position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["east"]},{id:"assassins-city-records",name:"City Records",description:"[/dice +1] Engagement *Stealth plans*",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]}],this.huntingGroundsLabel="Hunting Grounds",this.huntingGrounds=[{id:"assassins-hunting-ground-accident",name:"Accident",description:"A killing with no telltale signs of murder",quantity:0,maxQuantity:1},{id:"assassins-hunting-ground-disappearance",name:"Disappearance",description:"The victim vanishes without a trace",quantity:0,maxQuantity:1},{id:"assassins-hunting-ground-murder",name:"Murder",description:"An obvious killing that sends a message",quantity:0,maxQuantity:1},{id:"assassins-hunting-ground-ransom",name:"Ransom",description:"A kidnapping and demand for payment for their return",quantity:0,maxQuantity:1}],this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(t=>t.id==="assassins-lair").quantity=1,this.trainingUpgrades.find(t=>t.id==="insight").quantity=1,this.trainingUpgrades.find(t=>t.id==="prowess").quantity=1}}class _1 extends Vi{constructor(){super(),this.name="Untitled Bravos",this.crewType="Bravos",this.crewTypeDescription="Mercenaries, thugs, & killers",this.image="ab9c33a6-2710-41ff-a814-edf6b648af54",this.crewExperienceLabels=["Execute a successful battle, extortion, sabotage, or smash & grab operation"],this.specialAbilities=[{id:"dangerous",name:"Dangerous",description:"Each PC may add +1 *Action Rating* to **Hunt**, **Skirmish**, or **Wreck** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"blood-brothers",name:"Blood Brothers",description:`When you fight alongside your Cohorts in combat, they get [/dice +1] for *Setup* and *Group Action* rolls

All of your Cohorts get the Thugs type for free. If they're already Thugs, add another type`,quantity:0,maxQuantity:1},{id:"door-kickers",name:"Door Kickers",description:"When you execute an *Assault plan*, take [/dice +1] to the *Engagement* roll",quantity:0,maxQuantity:1},{id:"fiends",name:"Fiends",description:"Fear is as good as respect. You may count each *Wanted Level* as if it was Turf",quantity:0,maxQuantity:1},{id:"forged-in-the-fire",name:"Forged in the Fire",description:"Each PC has been toughened by cruel experience. You get [/dice +1] to *Resistance* rolls",quantity:0,maxQuantity:1},{id:"patron",name:"Patron",description:"When you advance your *Tier*, it costs half the *Coin* it normally would. Who is your patron? Why do they help you?",quantity:0,maxQuantity:1},{id:"war-dogs",name:"War Dogs",description:"When you're at *War* (-3 *Faction Status*), your Crew does not suffer -1 *Hold* and PCs still get two *Downtime Activities* instead of just one",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"bravos-rigging",name:"Bravos Rigging",description:"2 free load of weapons or armor.",quantity:0,maxQuantity:1},{id:"elite-skulks",name:"Elite Skulks",description:"",quantity:0,maxQuantity:1},{id:"elite-thugs",name:"Elite Thugs",description:"",quantity:0,maxQuantity:1},{id:"hardened",name:"Hardened",description:"+1 trauma box.",quantity:0,maxQuantity:3},{id:"ironhook-contacts",name:"Ironhook Contacts",description:"+1 Tier in prison.",quantity:0,maxQuantity:1}],this.contacts=[{id:"bravos-contact-meg",name:"Meg",description:"A pit-fighter",attitude:0},{id:"bravos-contact-conway",name:"Conway",description:"A bluecoat",attitude:0},{id:"bravos-contact-keller",name:"Keller",description:"A blacksmith",attitude:0},{id:"bravos-contact-tomas",name:"Tomas",description:"A physicker",attitude:0},{id:"bravos-contact-walker",name:"Walker",description:"A ward boss",attitude:0},{id:"bravos-contact-lutes",name:"Lutes",description:"A tavern owner",attitude:0}],this.claims=[{id:"bravos-barracks",name:"Barracks",description:`[/scale +1 Scale]
Thug Cohorts`,position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"bravos-turf-1",name:"Turf",description:"",position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","east"]},{id:"bravos-terrorized-citizens",name:"Terrorized Citizens",description:`[/coin +2 Coin]
*Battle* or *Extortion plans*`,position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"bravos-informants",name:"Informants",description:"[/dice +1] Gather Information",position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"bravos-protection-racket",name:"Protection Racket",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"bravos-fighting-pits",name:"Fighting Pits",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south"]},{id:"bravos-turf-2",name:"Turf",description:"",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["west","east","south"]},{id:"bravos-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south","west"]},{id:"bravos-turf-3",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"bravos-turf-4",name:"Turf",description:"",position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","south"]},{id:"bravos-infirmary",name:"Infirmary",description:"[/dice +1] Healing",position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"bravos-bluecoat-intimidation",name:"Bluecoat Intimidation",description:`[/heat -2 Heat]
per Score`,position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]},{id:"bravos-street-fence",name:"Street Fence",description:`[/coin +2 Coin]
Lower-class targets`,position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"bravos-warehouses",name:"Warehouses",description:"Stockpiles give [/dice +1] *Acquire Assets*",position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["north","west","east"]},{id:"bravos-bluecoat-confederates",name:"Bluecoat Confederates",description:"[/dice +1] Engagement *Assault plans*",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]}],this.huntingGroundsLabel="Hunting Grounds",this.huntingGrounds=[{id:"bravos-hunting-ground-battle",name:"Battle",description:"Defeat an enemy with overwhelming force",quantity:0,maxQuantity:1},{id:"bravos-hunting-ground-extortion",name:"Extortion",description:"Threaten violence unless you're paid off",quantity:0,maxQuantity:1},{id:"bravos-hunting-ground-sabotage",name:"Sabotage",description:"Hurt an opponent by destroying something",quantity:0,maxQuantity:1},{id:"bravos-hunting-ground-smash-and-grab",name:"Smash & Grab",description:"A fast and violent armed robbery",quantity:0,maxQuantity:1}],this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(t=>t.id==="bravos-lair").quantity=1,this.trainingUpgrades.find(t=>t.id==="prowess").quantity=1,this.cohorts.push(qh("Thugs"))}}class v1 extends Vi{constructor(){super();Q(this,"deityName");Q(this,"deityFeatures");this.name="Untitled Cult",this.crewType="Cult",this.crewTypeDescription="Acolytes of a deity",this.image="7544b3a4-0e4d-4758-9870-cd5b8f7774cb",this.crewExperienceLabels=["Advance the agenda of your deity or embody its precepts"],this.specialAbilities=[{id:"chosen",name:"Chosen",description:"Each PC may add +1 *Action Rating* to **Attune**, **Study**, or **Sway** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"anointed",name:"Anointed",description:`You get [/dice +1] to *Resistance* rolls against supernatural threats

You get [/dice +1] to healing rolls when you have supernatural harm`,quantity:0,maxQuantity:1},{id:"bound-in-darkness",name:"Bound in Darkness",description:`You may use *Teamwork* with any cult member, regardless of the distance separating you

Take [/stress 1 Stress] for your whispered message to be heard by every cultist`,quantity:0,maxQuantity:1},{id:"conviction",name:"Conviction",description:`Each PC gains an additional *Vice*: Worship. You don't overindulge when indulging in Worship (if you provide a pleasing sacrifice)

In addition, your deity will grant [/dice +1] to one *Action Roll* you make—from now until you indulge in Worship again`,quantity:0,maxQuantity:1},{id:"glory-incarnate",name:"Glory Incarnate",description:`Your deity sometimes manifests in the physical world. This can be a great boon, but the priorities and values of a god are not those of mortals

You have been warned`,quantity:0,maxQuantity:1},{id:"sealed-in-blood",name:"Sealed in Blood",description:"Each human sacrifice yields -3 *Stress Cost* when performing a ritual",quantity:0,maxQuantity:1},{id:"zealotry",name:"Zealotry",description:`Your Cohorts have abandoned reason in devotion to the cult and will undertake any service, no matter how dangerous or strange

They gain [/dice +1] to rolls against enemies of the faith`,quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"cult-rigging",name:"Cult Rigging",description:"2 free load of documents or implements.",quantity:0,maxQuantity:1},{id:"ritual-sanctum-in-lair",name:"Ritual Sanctum in Lair",description:"",quantity:0,maxQuantity:1},{id:"elite-adepts",name:"Elite Adepts",description:"",quantity:0,maxQuantity:1},{id:"elite-thugs",name:"Elite Thugs",description:"",quantity:0,maxQuantity:1},{id:"ordained",name:"Ordained",description:"+1 trauma box.",quantity:0,maxQuantity:3}],this.contacts=[{id:"cult-contact-gagan",name:"Gagan",description:"An academic",attitude:0},{id:"cult-contact-adikin",name:"Adikin",description:"An occultist",attitude:0},{id:"cult-contact-hutchins",name:"Hutchins",description:"An antiquarian",attitude:0},{id:"cult-contact-moriya",name:"Moriya",description:"A spirit trafficker",attitude:0},{id:"cult-contact-mateas-kline",name:"Mateas Kline",description:"A noble",attitude:0},{id:"cult-bennett",name:"Bennett",description:"An astronomer",attitude:0}],this.claims=[{id:"cult-cloister",name:"Cloister",description:`[/scale +1 Scale]
Adept Cohorts`,position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"cult-vice-den",name:"Vice Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","south","east"]},{id:"cult-offertory",name:"Offertory",description:"[/coin +2 Coin] *Occult plans*",position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"cult-ancient-obelisk",name:"Ancient Obelisk",description:"-1 *Stress Cost* for *Arcane Powers* and *Rituals*",position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east"]},{id:"cult-ancient-tower",name:"Ancient Tower",description:"[/dice +1] Consort w/ Arcane entities on-site",position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"cult-turf-1",name:"Turf",description:"",position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"cult-turf-2",name:"Turf",description:"",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"cult-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"cult-turf-3",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["south","west","east"]},{id:"cult-turf-4",name:"Turf",description:"",position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","south"]},{id:"cult-spirit-well",name:"Spirit Well",description:"[/dice +1] **Attune** on-site",position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["east"]},{id:"cult-ancient-gate",name:"Ancient Gate",description:"Safe passage into the Deathlands",position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["west","north"]},{id:"cult-sanctuary",name:"Sanctuary",description:"[/dice +1] *Command* and *Sway* on-site",position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north"]},{id:"cult-sacred-nexus",name:"Sacred Nexus",description:"[/dice +1] Healing on-site",position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"cult-ancient-altar",name:"Ancient Altar",description:"[/dice +1] Engagement *Occult plans*",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]}],this.huntingGroundsLabel="Sacred Sites",this.huntingGrounds=[{id:"cult-sacred-site-acquisition",name:"Acquisition",description:"Procure an arcane artifact and attune it to your god",quantity:0,maxQuantity:1},{id:"cult-sacred-site-augury",name:"Augury",description:"Do what you must to attract the god's attention and counsel",quantity:0,maxQuantity:1},{id:"cult-sacred-site-consecration",name:"Consecration",description:"Anoint a place for your deity",quantity:0,maxQuantity:1},{id:"cult-sacred-site-sacrifice",name:"Sacrifice",description:"Destroy what is valuable or good in honor of your god",quantity:0,maxQuantity:1}],this.deityName="",this.deityFeatures="",this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(n=>n.id==="cult-lair").quantity=1,this.trainingUpgrades.find(n=>n.id==="resolve").quantity=1,this.cohorts.push(qh("Adepts"))}}class b1 extends Vi{constructor(){super(),this.name="Untitled Hawkers",this.crewType="Hawkers",this.crewTypeDescription="Vice dealers",this.image="13867125-73d8-4399-a550-db499a4eedfe",this.crewExperienceLabels=["Acquire product supply, execute clandestine/covert sales, or secure new territory"],this.specialAbilities=[{id:"silver-tongues",name:"Silver Tongues",description:"Each PC may add +1 *Action Rating* to **Command**, **Consort**, or **Sway** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"accord",name:"Accord",description:"Sometimes friends are as good as territory. Count up to three +3 *Faction Statuses* as Turf",quantity:0,maxQuantity:1},{id:"the-good-stuff",name:"The Good Stuff",description:`Your merchandise is exquisite. The product quality is equal to your *Tier* +2

When you deal with a *Faction*, the GM will tell you who among them is hooked on your product (one, a few, many, or all)`,quantity:0,maxQuantity:1},{id:"ghost-market",name:"Ghost Market",description:`You have discovered how to prepare your product for sale to ghosts and/or demons

They do not pay in *Coin*. What do they pay with?`,quantity:0,maxQuantity:1},{id:"high-society",name:"High Society",description:`It's all about who you know

Take [/heat -1 Heat] during Downtime and [/dice +1] to Gather Information about the city's elite`,quantity:0,maxQuantity:1},{id:"hooked",name:"Hooked",description:"Your Cohorts use your product. Add the savage, unreliable, or wild *Flaw* to your Gangs to give them [/quality +1 Quality]",quantity:0,maxQuantity:1},{id:"patron",name:"Patron",description:"When you advance your *Tier*, it costs half the *Coin* it normally would. Who is your patron? Why do they help you?",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"hawker-rigging",name:"Hawkers Rigging",description:"1 carried item is concealed and has no load",quantity:0,maxQuantity:1},{id:"ironhook-contacts",name:"Ironhook Contacts",description:"+1 Tier in prison.",quantity:0,maxQuantity:1},{id:"elite-rooks",name:"Elite Rooks",description:"",quantity:0,maxQuantity:1},{id:"elite-thugs",name:"Elite Thugs",description:"",quantity:0,maxQuantity:1},{id:"composed",name:"Composed",description:"+1 stress box.",quantity:0,maxQuantity:3}],this.contacts=[{id:"hawkers-contact-rolan-wott",name:"Rolan Wott",description:"A magistrate",attitude:0},{id:"hawkers-contact-laroze",name:"Laroze",description:"A bluecoat",attitude:0},{id:"hawkers-contact-lydra",name:"Lydra",description:"A deal broker",attitude:0},{id:"hawkers-contact-hoxley",name:"Hoxley",description:"A smuggler",attitude:0},{id:"hawkers-contact-anya",name:"Anya",description:"A dilettante",attitude:0},{id:"hawkers-contact-marlo",name:"Marlo",description:"A gang boss",attitude:0}],this.claims=[{id:"hawkers-turf-1",name:"Turf",description:"",position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"hawkers-personal-clothier",name:"Personal Clothier",description:"[/dice +1] Engagement *Social plans*",position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"hawkers-local-graft",name:"Local Graft",description:`[/coin +2 Coin]
*Show of Force* or *Socialize plans*`,position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["south"]},{id:"hawkers-lookouts",name:"Lookouts",description:"[/dice +1] **Survey** and **Hunt** on Turf",position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"hawkers-informants",name:"Informants",description:"[/dice +1] Gather Information",position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"hawkers-turf-2",name:"Turf",description:"",position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["north","south"]},{id:"hawkers-turf-3",name:"Turf",description:"",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south"]},{id:"hawkers-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south","west"]},{id:"hawkers-turf-4",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"hawkers-luxury-venue",name:"Luxury Venue",description:"[/dice +1] **Consort** and **Sway** on-site",position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west"]},{id:"hawkers-foreign-market",name:"Foreign Market",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["east","north"]},{id:"hawkers-vice-den",name:"Vice Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]},{id:"hawkers-surplus-caches",name:"Surplus Caches",description:`[/coin +2 Coin]
*Sale* or *Supply plans*`,position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north"]},{id:"hawkers-cover-operation",name:"Cover Operation",description:`[/heat -2 Heat]
per Score`,position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"hawkers-cover-identities",name:"Cover Identities",description:"[/dice +1] Engagement *Deception* or *Transport plans*",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["west"]}],this.huntingGroundsLabel="Sales Territory",this.huntingGrounds=[{id:"hawkers-sales-territory-sale",name:"Sale",description:"A significant transaction with a special buyer of illicit product",quantity:0,maxQuantity:1},{id:"hawkers-sales-territory-supply",name:"Supply",description:"A transaction to acquire new product or establish a new supplier",quantity:0,maxQuantity:1},{id:"hawkers-sales-territory-show-of-force",name:"Show of Force",description:"Make an example of an enemy to dominate territory",quantity:0,maxQuantity:1},{id:"hawkers-sales-territory-socialize",name:"Socialize",description:"Improve customer and/or supplier relations with a social event",quantity:0,maxQuantity:1}],this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(t=>t.id==="hawkers-lair").quantity=1,this.trainingUpgrades.find(t=>t.id==="resolve").quantity=1,this.lairUpgrades.find(t=>t.id==="secure-lair").quantity=1,console.log(this.lairUpgrades)}}class w1 extends Vi{constructor(){super(),this.name="Untitled Shadows",this.crewType="Shadows",this.crewTypeDescription="Thieves, spies, and saboteurs",this.image="bbc1bf16-dc4d-4e97-a898-0bf9e688d327",this.crewExperienceLabels=["Execute a successful espionage, sabotage, or theft operation"],this.specialAbilities=[{id:"everyone-steals",name:"Everyone Steals",description:"Each PC may add +1 *Action Rating* to **Prowl**, **Finesse**, or **Tinker** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"ghost-echoes",name:"Ghost Echoes",description:"All Crew members gain the ability to see and interact with the ghostly structures, streets, and objects within the echo of Duskwall that exists in the Ghost Field.",quantity:0,maxQuantity:1},{id:"pack-rats",name:"Pack Rats",description:"Your Lair is a jumble of stolen items. Take [/dice +1d] when you *Acquire an Asset*",quantity:0,maxQuantity:1},{id:"patron",name:"Patron",description:"When you advance your *Tier*, it costs half the *Coin* it normally would. Who is your patron? Why do they help you?",quantity:0,maxQuantity:1},{id:"second-story",name:"Second Story",description:"When you execute a clandestine infiltration, you get [/dice +1] to the *Engagement* roll",quantity:0,maxQuantity:1},{id:"slippery",name:"Slippery",description:`When you roll *Entanglements*, roll twice and keep the one you want

Take [/dice +1] when you reduce *Heat*`,quantity:0,maxQuantity:1},{id:"synchronized",name:"Synchronized",description:"When you perform a *Group Action* you may count multiple 6s from different rolls as a Critical Success",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"thief-rigging",name:"Thief Rigging",description:"2 free load of tools or gear.",quantity:0,maxQuantity:1},{id:"underground-maps-and-passkeys",name:"Underground Maps and Passkeys",description:"",quantity:0,maxQuantity:1},{id:"elite-rooks",name:"Elite Rooks",description:"",quantity:0,maxQuantity:1},{id:"elite-skulks",name:"Elite Skulks",description:"",quantity:0,maxQuantity:1},{id:"steady",name:"Steady",description:"+1 stress box.",quantity:0,maxQuantity:3}],this.contacts=[{id:"shadows-contact-dowler",name:"Dowler",description:"An explorer",attitude:0},{id:"shadows-contact-laroze",name:"Laroze",description:"A bluecoat",attitude:0},{id:"shadows-contact-amancio",name:"Amancio",description:"A deal broker",attitude:0},{id:"shadows-contact-fitz",name:"Fitz",description:"A collector",attitude:0},{id:"shadows-contact-adelaide-phroaig",name:"Adelaide Phroaig",description:"A noble",attitude:0},{id:"shadows-contact-rigney",name:"Rigney",description:"A tavern owner",attitude:0}],this.claims=[{id:"shadows-interrogation-chamber",name:"Interrogation Chamber",description:"[/dice +1] **Command** and **Sway** on-site",position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"shadows-turf-1",name:"Turf",description:"",position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","east"]},{id:"shadows-loyal-fence",name:"Loyal Fence",description:"[/coin +2 Coin] *Burglary* or *Robbery plans*",position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"shadows-gambling-den",name:"Gambling Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"shadows-tavern",name:"Tavern",description:"[/dice +1] **Consort** and **Sway** on-site",position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"shadows-drug-den",name:"Drug Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south"]},{id:"shadows-informants",name:"Informants",description:"[/dice +1] Gather Information",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["south","west","east"]},{id:"shadows-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"shadows-turf-2",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east"]},{id:"shadows-lookouts",name:"Lookouts",description:"[/dice +1] **Survey** and **Hunt** on Turf",position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","south"]},{id:"shadows-hagfish-farm",name:"Hagfish Farm",description:`Body disposal
[/dice +1] Reduce Heat after killing`,position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["east","north"]},{id:"shadows-infirmary",name:"Infirmary",description:"[/dice +1] Healing",position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["west","north"]},{id:"shadows-covert-drops",name:"Covert Drops",description:"+2 coin for espionage or sabotage",position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"shadows-turf-3",name:"Turf",description:"",position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["west","east"]},{id:"shadows-secret-pathways",name:"Secret Pathways",description:"+1d engagement for stealth plans",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["west","north"]}],this.huntingGroundsLabel="Hunting Grounds",this.huntingGrounds=[{id:"shadows-hunting-grounds-burglary",name:"Burglary",description:"Theft by breaking and entering",quantity:0,maxQuantity:1},{id:"shadows-hunting-grounds-espionage",name:"Espionage",description:"Obtain secret information by covert or clandestine means",quantity:0,maxQuantity:1},{id:"shadows-hunting-grounds-robbery",name:"Robbery",description:"Theft by force or threats",quantity:0,maxQuantity:1},{id:"shadows-hunting-grounds-sabotage",name:"Sabotage",description:"Hurt an opponent by destroying something",quantity:0,maxQuantity:1}],this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(t=>t.id==="shadows-lair").quantity=1,this.trainingUpgrades.find(t=>t.id==="prowess").quantity=1,this.lairUpgrades.find(t=>t.id==="hidden-lair").quantity=1}}class k1 extends Vi{constructor(){super(),this.name="Untitled Smugglers",this.crewType="Smugglers",this.crewTypeDescription="Suppliers of illicit goods",this.image="de509b5c-f37c-4975-9768-5e123d24e19b",this.crewExperienceLabels=["Execute a successful smuggling or acquire new clients or contraband sources"],this.specialAbilities=[{id:"like-part-of-the-family",name:"Like Part of the Family",description:"Create one of your vehicles as a Cohort. Its *Quality* is equal to your *Tier* +1.",quantity:0,maxQuantity:1},{id:"all-hands",name:"All Hands",description:"One of your Cohorts may perform a *Downtime Activity* for the Crew to *Acquire an Asset*, reduce *Heat*, or work on a *Long-term Project*",quantity:0,maxQuantity:1},{id:"ghost-passage",name:"Ghost Passage",description:'All crew members become immune to possession by Spirits, but may choose to "carry" a Ghost as a passenger within their body.',quantity:0,maxQuantity:1},{id:"just-passing-through",name:"Just Passing Through",description:`[/heat -1 Heat] in Downtime

When your *Heat* is 4 or less, take [/dice +1] to deceive people when you pass yourselves off as ordinary citizens`,quantity:0,maxQuantity:1},{id:"leverage",name:"Leverage",description:`Your Crew supplies contraband for other *Factions*. Your success is good for them

Gain [/rep +1 Rep] whenever you gain *Rep*`,quantity:0,maxQuantity:1},{id:"reavers",name:"Reavers",description:`When you go into conflict aboard a vehicle, you gain +1 *Effect* for vehicle damage and speed

Your vehicle gains Armor`,quantity:0,maxQuantity:1},{id:"renegades",name:"Renegades",description:"Each PC may add +1 *Action Rating* to **Finesse**, **Prowl**, or **Skirmish** (up to a max of 3)",quantity:0,maxQuantity:1},{id:"veteran",name:"Veteran",description:"Choose a *Special Ability* from another crew",quantity:0,maxQuantity:3}],this.crewUpgrades=[{id:"smugglers-rigging",name:"Smugglers Rigging",description:"2 items carried are perfectly concealed.",quantity:0,maxQuantity:1},{id:"camoflage",name:"Camoflage",description:"Vehicles are perfectly concealed at rest",quantity:0,maxQuantity:1},{id:"elite-rovers",name:"Elite Rovers",description:"",quantity:0,maxQuantity:1},{id:"barge",name:"Barge",description:"",quantity:0,maxQuantity:1},{id:"steady",name:"Steady",description:"+1 stress box.",quantity:0,maxQuantity:3}],this.contacts=[{id:"smugglers-contact-elynn",name:"Elynn",description:"A dock worker",attitude:0},{id:"smugglers-contact-rolan",name:"Rolan",description:"A drug dealer",attitude:0},{id:"smugglers-contact-sera",name:"Sera",description:"An arms dealer",attitude:0},{id:"smugglers-contact-nyelle",name:"Nyelle",description:"A spirit trafficker",attitude:0},{id:"smugglers-contact-decker",name:"Decker",description:"An anarchist",attitude:0},{id:"smugglers-contact-esme",name:"Esme",description:"A tavern owner",attitude:0}],this.claims=[{id:"smugglers-turf-1",name:"Turf",description:"",position:{x:0,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"smugglers-side-business",name:"Side Business",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:1,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"smugglers-luxury-fence",name:"Luxury Fence",description:`[/coin +2]
High-class targets`,position:{x:2,y:0},quantity:0,maxQuantity:1,adjacent:["south"]},{id:"smugglers-vice-den",name:"Vice Den",description:`[/coin +Coin]
[/dice Tier] - *Heat*`,position:{x:3,y:0},quantity:0,maxQuantity:1,adjacent:["east","south"]},{id:"smugglers-tavern",name:"Tavern",description:"[/dice +1] **Consort** and **Sway** on-site",position:{x:4,y:0},quantity:0,maxQuantity:1,adjacent:["west","south"]},{id:"smugglers-ancient-gate",name:"Ancient Gate",description:"Safe passage into the Deathlands",position:{x:0,y:1},quantity:0,maxQuantity:1,adjacent:["south","north"]},{id:"smugglers-turf-2",name:"Turf",description:"",position:{x:1,y:1},quantity:0,maxQuantity:1,adjacent:["north","east","south"]},{id:"smugglers-lair",name:"Lair",description:"",position:{x:2,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"smugglers-turf-3",name:"Turf",description:"",position:{x:3,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","east","south"]},{id:"smugglers-turf-4",name:"Turf",description:"",position:{x:4,y:1},quantity:0,maxQuantity:1,adjacent:["north","west","south"]},{id:"smugglers-secret-routes",name:"Secret Routes",description:"[/dice +1] Engagement *Transport plans*",position:{x:0,y:2},quantity:0,maxQuantity:1,adjacent:["east","north"]},{id:"smugglers-informants",name:"Informants",description:"[/dice +1] Gather Information",position:{x:1,y:2},quantity:0,maxQuantity:1,adjacent:["west","north"]},{id:"smugglers-fleet",name:"Fleet",description:"Cohorts have their own vehicles",position:{x:2,y:2},quantity:0,maxQuantity:1,adjacent:["north"]},{id:"smugglers-cover-operation",name:"Cover Operation",description:"[/heat -2] per Score",position:{x:3,y:2},quantity:0,maxQuantity:1,adjacent:["north","east"]},{id:"smugglers-warehouse",name:"Warehouse",description:"Stockpiles give [/dice +1] *Acquire Assets*",position:{x:4,y:2},quantity:0,maxQuantity:1,adjacent:["north","west"]}],this.huntingGroundsLabel="Cargo Types",this.huntingGrounds=[{id:"smugglers-cargo-type-arcane-weird",name:"Arcane/Weird",description:"Spirit essences, ghosts, cult materials",quantity:0,maxQuantity:1},{id:"smugglers-cargo-type-arms",name:"Arms",description:"Restricted military weapons, heavy ordnance, explosives",quantity:0,maxQuantity:1},{id:"smugglers-cargo-type-contraband",name:"Contraband",description:"High-tax luxuries, drugs, banned art, etc",quantity:0,maxQuantity:1},{id:"smugglers-cargo-type-passengers",name:"Passengers",description:"People or livestock traveling in secret",quantity:0,maxQuantity:1}],this.applyUpgradesDescriptionsFromCodex(),this.applyStartingUpgrades()}applyStartingUpgrades(){this.claims.find(t=>t.id==="smugglers-lair").quantity=1,this.trainingUpgrades.find(t=>t.id==="prowess").quantity=1,this.lairUpgrades=this.lairUpgrades.filter(t=>t.id!=="carriage-house"&&t.id!=="boat-house");for(let t=1;t<=2;t++)this.lairUpgrades.push({id:`vehicle-${t}`,name:`Vehicle ${t}`,description:"Either a carriage or a boat, along with the relevant stable or boat-house.",quantity:t==1?1:0,maxQuantity:2})}}function x1(){return{assassins:new g1,bravos:new _1,cult:new v1,hawkers:new b1,shadows:new w1,smugglers:new k1}}function C1(e){return e==="crew"?x1():e==="character"?y1():{}}function Li(e){return Th.find(t=>t.id===e)}function S1(e){return e.length===0?e:e.charAt(0).toUpperCase()+e.slice(1)}function E1(e){return["zero","one","two","three","four","five","six","seven","eight","nine","ten"][e]}function ot(e){const t=e.replace(/<[^>]*>/g,""),n=[{pattern:/(\*\*|__)(.*?)\1/g,replacement:'<span class="strong">$2</span>'},{pattern:/(\*|_)(.*?)\1/g,replacement:'<span class="em">$2</span>'},{pattern:/\n\n/g,replacement:'<br class="paragraph-break" />'},{pattern:/\n/g,replacement:"<br />"},{pattern:/\[\/dice\s+([^\]]+)\]/g,replacement:'<span class="t t--dice">$1<i class="fas fa-dice-three"></i></span>'},{pattern:/\[\/(\w+)\s+([^\]]+)\]/g,replacement:'<span class="t t--$1">$2</span>'}];let i=t;return n.forEach(s=>{i=i.replaceAll(s.pattern,s.replacement)}),`<span class="markdown">${i}</span>`}const A1={class:"template-picker"},T1=["onClick"],$1=["src"],q1={class:"row mobile-only"},O1=ue({__name:"SheetTemplatePickerModal",props:{sheetType:String,description:String,templateTypeKey:String,templates:Object,onConfirm:{type:Function,required:!0}},setup(e){const t=e;function n(r){console.log("template",r),t.onConfirm(t.sheetType,r),K.close()}const i=j(0);function s(r){const o=r.children[0].clientWidth,l=(r.scrollLeft+o/2)/o;i.value=Math.floor(l)}return(r,o)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,"Choose a "+U(e.sheetType)+" template",1)]),_:1})]),content:W(()=>[a("div",A1,[a("p",null,U(t.description),1),a("ul",{class:"scroll-container",ref:"carouselRef",onScroll:o[0]||(o[0]=l=>s(l.target))},[(_(!0),C(te,null,he(e.templates,(l,c,u)=>{var d,h;return _(),C("li",null,[(_(),C("div",{class:Z(["template-card prevent-click-on-mobile",{active:i.value==u,"left-of-active":i.value>u,"right-of-active":i.value<u}]),onClick:f=>n(l),key:l.id,style:Jt({"background-color":(d=H(Li)(l.image))==null?void 0:d.commonColor})},[a("img",{src:(h=H(Li)(l.image))==null?void 0:h.url},null,8,$1),a("h3",null,U(l[e.templateTypeKey]),1),a("p",null,U(l[e.templateTypeKey+"Description"]),1)],14,T1))])}),256))],544),a("div",q1,[a("button",{class:"btn mobile-full-width",onClick:o[1]||(o[1]=l=>n(Object.values(t.templates)[i.value]))},[a("span",null,"New "+U(H(S1)(Object.keys(t.templates||[])[i.value])),1)])])])]),_:1}))}}),I1=de(O1,[["__scopeId","data-v-deaeb7fc"]]),P1={class:"icon"},R1={key:1},N1=ue({__name:"Checkbox",props:{modelValue:{type:[String,Boolean,Array],required:!0},label:{type:String,required:!1},value:{type:String,required:!1},text:{type:String,required:!1,default:"❖"},icon:{type:String,required:!1},emptyWhenUnchecked:{type:Boolean,required:!1,default:!1}},setup(e,{emit:t}){const n=e,i=t,s=X(()=>n.value&&Array.isArray(n.modelValue)?n.modelValue.includes(n.value):n.modelValue);function r(o){if(o.preventDefault(),!(n.value&&Array.isArray(n.modelValue)))return i("update:modelValue",!n.modelValue);n.modelValue.includes(n.value)?n.modelValue.splice(n.modelValue.indexOf(n.value),1):n.modelValue.push(n.value),i("update:modelValue",n.modelValue)}return(o,l)=>{var c;return _(),C("div",{class:Z(["checkbox-group",{compact:!((c=e.label)!=null&&c.length),checked:s.value}]),onClick:r},[a("div",P1,[s.value||!e.emptyWhenUnchecked?(_(),C("i",{key:0,class:Z(["fas",e.icon])},null,2)):Y("",!0),e.icon?Y("",!0):(_(),C("span",R1,U(e.text),1))]),a("p",null,U(e.label),1)],2)}}}),at=de(N1,[["__scopeId","data-v-673eeeb5"]]),D1={class:"header"},L1=99,U1=ue({__name:"AttributeTile",props:{effectable:{},change:{type:Function}},setup(e){const t=e;function n(){i.value=r(t.effectable.quantity)}const i=j([]);n(),Ut(()=>t.effectable.quantity,n);function s(o){let l=i.value;l=l.filter(u=>parseInt(u)<=parseInt(o));const c=Math.max(...l.map(u=>parseInt(u)));l=l.map(u=>parseInt(u)<=c?u:o),i.value=Array.from({length:c},(u,d)=>(d+1).toString()),t.change(Math.max(c,0))}function r(o){return Array.from({length:o},(l,c)=>(c+1).toString())}return(o,l)=>(_(),C("div",{class:Z(["attribute-tile",{active:t.effectable.quantity>0}])},[a("div",D1,[a("h2",null,U(t.effectable.name),1)]),a("div",{class:Z(["row selection-bar",{locked:L1<1}])},[(_(!0),C(te,null,he(o.effectable.maxQuantity,c=>(_(),ce(at,{key:o.effectable.id+c,modelValue:i.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>i.value=u),u=>s(c.toString())],value:c.toString()},null,8,["modelValue","value","onUpdate:modelValue"]))),128))],2)],2))}}),Pt=de(U1,[["__scopeId","data-v-1bc0d4da"]]),M1={class:"checkbox-list"},B1=99,F1=ue({__name:"CheckboxBar",props:{value:{},locked:{},max:{},coinMode:{type:Boolean}},emits:["change"],setup(e,{emit:t}){const n=e,i=t,s=j(n.value),r=j([]);o();function o(){r.value=l(s.value)}function l(d){return Array.from({length:d},(h,f)=>(f+1).toString())}Ut(()=>n.value,d=>{s.value=d});function c(d){return d>n.max-(n.locked??0)?"fas fa-lock":n.coinMode&&r.value.includes(d.toString())?"fas fa-crown":r.value.includes(d.toString())?"fas fa-check":"N/A"}function u(d){let h=r.value;h=h.filter(m=>parseInt(m)<=parseInt(d));const f=Math.max(...h.map(m=>parseInt(m)));h=h.map(m=>parseInt(m)<=f?m:d),r.value=Array.from({length:f},(m,y)=>(y+1).toString()),s.value=Math.max(f,0),i("change",s.value)}return(d,h)=>(_(),C("div",{class:Z(["checkbox-bar",{"coin-mode":n.coinMode,locked:B1<1}])},[a("ul",M1,[(_(!0),C(te,null,he(n.max,f=>(_(),ce(at,{class:Z({locked:f>n.max-(n.locked??0)}),key:f,modelValue:r.value,"onUpdate:modelValue":[h[0]||(h[0]=m=>r.value=m),m=>u(f.toString())],value:f.toString(),icon:c(f)},null,8,["class","modelValue","value","onUpdate:modelValue","icon"]))),128))])],2))}}),vn=de(F1,[["__scopeId","data-v-7bed470d"]]),Q1={class:"row"},H1={viewBox:"-50 -50 100 100"},j1=["d"],V1=["innerHTML"],W1=ue({__name:"Clock",props:{clock:{},change:{type:Function}},setup(e){const t=e,n=X(()=>Array.from({length:t.clock.segments},(r,o)=>o));function i(r,o){const c=r/o*Math.PI*2-Math.PI/2,u=(r+1)/o*Math.PI*2-Math.PI/2,d=Math.cos(c)*50,h=Math.sin(c)*50,f=Math.cos(u)*50,m=Math.sin(u)*50,y=u-c<=Math.PI?0:1;return`M 0 0 L ${d} ${h} A 50 50 0 ${y} 1 ${f} ${m} Z`}function s(){const r=t.clock.value+1;t.change(r>t.clock.segments?0:r)}return(r,o)=>(_(),C("div",Q1,[a("div",{class:"pie-chart",onClick:s},[(_(!0),C(te,null,he(n.value,l=>(_(),C("div",{class:"slice",key:l},[(_(),C("svg",H1,[a("path",{d:i(l,n.value.length),style:Jt({fill:t.clock.value>l?"var(--primary)":"var(--dark)",stroke:"var(--dark-2)"})},null,12,j1)]))]))),128))]),a("h2",null,U(t.clock.name),1),a("p",{innerHTML:H(ot)(t.clock.description)},null,8,V1)]))}}),G1=de(W1,[["__scopeId","data-v-4c6a1f91"]]),Y1=ue({__name:"CollapsingShelf",props:{show:{type:Boolean}},setup(e){const t=e;return(n,i)=>(_(),C("div",{class:Z(["shelf",{show:t.show}])},[Ii(n.$slots,"default",{},void 0)],2))}}),tt=de(Y1,[["__scopeId","data-v-024dcdea"]]),zn=e=>($e("data-v-bc8da894"),e=e(),qe(),e),z1={class:"edit"},K1={class:"input-group"},J1=zn(()=>a("label",{for:"name"},"Name",-1)),X1=zn(()=>a("label",{for:"id"},[se("ID "),a("label",{class:"muted"},"(permanent)")],-1)),Z1={class:"input-group stretch"},e0={for:"description"},t0={class:"muted"},n0={class:"input-group"},i0=zn(()=>a("label",{for:"maxQuantity"},"Max Quantity",-1)),s0={key:0,class:"row"},r0=zn(()=>a("span",null,"Cancel",-1)),o0=[r0],a0=zn(()=>a("span",null,"New",-1)),l0=[a0],c0={key:1,class:"row"},u0=zn(()=>a("i",{class:"fas fa-trash"},null,-1)),d0=zn(()=>a("span",null,"Delete",-1)),h0=[u0,d0],f0=zn(()=>a("span",null,"Save",-1)),p0=[f0],m0=ue({__name:"EditEffectableModal",props:{propertyName:{},effectable:{},onEdit:{type:Function},onDelete:{type:Function},idPrefix:{},onCreateNew:{type:Function}},setup(e){const t=e,n={id:"",name:"",description:"",quantity:0,maxQuantity:1},i=j({...t.effectable||n});function s(c){if(!t.onCreateNew)return;let u=(t.idPrefix||"")+"-"+c;u=u.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,""),i.value.id=u}function r(){t.onCreateNew&&(t.onCreateNew(i.value),K.close())}function o(){t.onEdit&&(t.onEdit(i.value),K.close())}function l(){t.onDelete&&(t.onDelete(i.value.id),K.close())}return(c,u)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,U(t.onCreateNew?"Create a new":"Edit")+" "+U(c.propertyName),1)]),_:1})]),content:W(()=>[a("div",z1,[a("div",K1,[J1,Ne(a("input",{type:"text",id:"name","onUpdate:modelValue":u[0]||(u[0]=d=>i.value.name=d),placeholder:"Enter a memorable name",onInput:u[1]||(u[1]=d=>s(i.value.name))},null,544),[[De,i.value.name]])]),a("div",{class:Z(["input-group",{disabled:!t.onCreateNew}])},[X1,Ne(a("input",{type:"text",id:"id","onUpdate:modelValue":u[2]||(u[2]=d=>i.value.id=d),placeholder:"A hyphenated identifier"},null,512),[[De,i.value.id]])],2),a("div",Z1,[a("label",e0,[se("Description "),a("label",t0,"("+U(i.value.description.length)+" / 400) ",1)]),Ne(a("textarea",{id:"description","onUpdate:modelValue":u[3]||(u[3]=d=>i.value.description=d),placeholder:"A brief description"},null,512),[[De,i.value.description]])]),a("div",n0,[i0,Ne(a("input",{type:"number",id:"maxQuantity","onUpdate:modelValue":u[4]||(u[4]=d=>i.value.maxQuantity=d),placeholder:"1, 2, 3..."},null,512),[[De,i.value.maxQuantity]])]),t.onCreateNew?(_(),C("div",s0,[a("button",{class:"btn btn--alt mobile-full-width",onClick:u[5]||(u[5]=d=>H(K).close())},o0),a("button",{class:"btn mobile-full-width",onClick:r},l0)])):(_(),C("div",c0,[a("button",{class:"btn btn--alt mobile-full-width",onClick:l},h0),a("button",{class:"btn mobile-full-width",onClick:o},p0)]))])]),_:1}))}}),ii=de(m0,[["__scopeId","data-v-bc8da894"]]),y0=e=>($e("data-v-b2037dda"),e=e(),qe(),e),g0={class:"header"},_0=y0(()=>a("i",{class:"fas fa-edit"},null,-1)),v0=[_0],b0=["innerHTML"],Yc=99,w0=ue({__name:"EffectableTile",props:{effectable:{},idPrefix:{},propertyName:{},change:{type:Function},onEdit:{type:Function},onDelete:{type:Function}},setup(e){const t=e;function n(){i.value=r(t.effectable.quantity)}const i=j([]);n(),Ut(()=>t.effectable.quantity,n);function s(c){let u=i.value;u=u.filter(h=>parseInt(h)<=parseInt(c));const d=Math.max(...u.map(h=>parseInt(h)));u=u.map(h=>parseInt(h)<=d?h:c),i.value=Array.from({length:d},(h,f)=>(f+1).toString()),t.change(Math.max(d,0))}function r(c){return Array.from({length:c},(u,d)=>(d+1).toString())}function o(c){t.onEdit&&t.onEdit(c)}function l(c){t.onDelete&&t.onDelete(c)}return(c,u)=>(_(),C("div",{class:Z(["effectable-tile",{active:t.effectable.quantity>0}])},[a("div",g0,[a("h2",null,U(t.effectable.name),1),t.onEdit?(_(),C("button",{key:0,class:Z(["btn btn--icon",{removed:Yc<2}]),onClick:u[0]||(u[0]=d=>H(K).open(ii,{propertyName:c.propertyName,effectable:t.effectable,idPrefix:t.idPrefix,onDelete:l,onEdit:o}))},v0,2)):Y("",!0)]),a("div",{class:Z(["row selection-bar",{locked:Yc<1}])},[(_(!0),C(te,null,he(c.effectable.maxQuantity,d=>(_(),ce(at,{key:c.effectable.id+d,modelValue:i.value,"onUpdate:modelValue":[u[1]||(u[1]=h=>i.value=h),h=>s(d.toString())],value:d.toString()},null,8,["modelValue","value","onUpdate:modelValue"]))),128))],2),a("p",{innerHTML:H(ot)(t.effectable.description||"")},null,8,b0)],2))}}),Nt=de(w0,[["__scopeId","data-v-b2037dda"]]),k0=["value"],x0=ue({__name:"HarmTile",props:{harm:{},changeHarm:{type:Function}},setup(e){const t=e;return(n,i)=>(_(),C("div",{class:Z(["harm-tile",{active:t.harm.description.length>0}])},[a("input",{type:"text",value:t.harm.description,onChange:i[0]||(i[0]=s=>{var r;return t.changeHarm(((r=s.target||null)==null?void 0:r.value)||"")})},null,40,k0),a("h3",null,"Level "+U(t.harm.level),1)],2))}}),Zi=de(x0,[["__scopeId","data-v-c989e776"]]),Kn=e=>($e("data-v-61690dda"),e=e(),qe(),e),C0={class:"edit"},S0={class:"input-group"},E0=Kn(()=>a("label",{for:"name"},"Name",-1)),A0=Kn(()=>a("label",{for:"id"},[se("ID "),a("label",{class:"muted"},"(permanent)")],-1)),T0={class:"input-group stretch"},$0={for:"description"},q0={class:"muted"},O0={class:"input-group"},I0=Kn(()=>a("label",{for:"load"},"Load",-1)),P0={key:0,class:"row"},R0=Kn(()=>a("span",null,"Cancel",-1)),N0=[R0],D0=Kn(()=>a("span",null,"New",-1)),L0=[D0],U0={key:1,class:"row"},M0=Kn(()=>a("i",{class:"fas fa-trash"},null,-1)),B0=Kn(()=>a("span",null,"Delete",-1)),F0=[M0,B0],Q0=Kn(()=>a("span",null,"Save",-1)),H0=[Q0],j0=ue({__name:"EditItemModal",props:{propertyName:{},item:{},onEdit:{type:Function},onDelete:{type:Function},idPrefix:{},onCreateNew:{type:Function}},setup(e){const t=e,n={id:"",name:"",description:"",quantity:0,maxQuantity:1,load:1},i=j({...t.item||n});function s(c){if(!t.onCreateNew)return;let u=(t.idPrefix||"")+"-"+c;u=u.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,""),i.value.id=u}function r(){t.onCreateNew&&(t.onCreateNew(i.value),K.close())}function o(){t.onEdit&&(t.onEdit(i.value),K.close())}function l(){t.onDelete&&(t.onDelete(i.value.id),K.close())}return(c,u)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,U(t.onCreateNew?"Create a new":"Edit")+" "+U(c.propertyName),1)]),_:1})]),content:W(()=>[a("div",C0,[a("div",S0,[E0,Ne(a("input",{type:"text",id:"name","onUpdate:modelValue":u[0]||(u[0]=d=>i.value.name=d),placeholder:"Enter a memorable name",onInput:u[1]||(u[1]=d=>s(i.value.name))},null,544),[[De,i.value.name]])]),a("div",{class:Z(["input-group",{disabled:!t.onCreateNew}])},[A0,Ne(a("input",{type:"text",id:"id","onUpdate:modelValue":u[2]||(u[2]=d=>i.value.id=d),placeholder:"A hyphenated identifier"},null,512),[[De,i.value.id]])],2),a("div",T0,[a("label",$0,[se("Description "),a("label",q0,"("+U(i.value.description.length)+" / 400) ",1)]),Ne(a("textarea",{id:"description","onUpdate:modelValue":u[3]||(u[3]=d=>i.value.description=d),placeholder:"A brief description"},null,512),[[De,i.value.description]])]),a("div",O0,[I0,Ne(a("input",{type:"number",id:"load","onUpdate:modelValue":u[4]||(u[4]=d=>i.value.load=d),placeholder:"1, 2, 3..."},null,512),[[De,i.value.load]])]),t.onCreateNew?(_(),C("div",P0,[a("button",{class:"btn btn--alt mobile-full-width",onClick:u[5]||(u[5]=d=>H(K).close())},N0),a("button",{class:"btn mobile-full-width",onClick:r},L0)])):(_(),C("div",U0,[a("button",{class:"btn btn--alt mobile-full-width",onClick:l},F0),a("button",{class:"btn mobile-full-width",onClick:o},H0)]))])]),_:1}))}}),Oh=de(j0,[["__scopeId","data-v-61690dda"]]),V0=e=>($e("data-v-cfc26f1d"),e=e(),qe(),e),W0={class:"header"},G0={class:"selection-bar"},Y0=V0(()=>a("i",{class:"fas fa-edit"},null,-1)),z0=[Y0],K0=["innerHTML"],J0=ue({__name:"ItemTile",props:{item:{},idPrefix:{},propertyName:{},change:{type:Function},onEdit:{type:Function},onDelete:{type:Function}},setup(e){const t=e;function n(r){t.onEdit&&t.onEdit(r)}function i(r){t.onDelete&&t.onDelete(r)}function s(){t.change(t.item.quantity>0?0:1)}return(r,o)=>(_(),C("div",{class:Z(["item-tile",{active:t.item.quantity>0}])},[a("div",W0,[a("h2",null,U(t.item.name),1),a("div",G0,[a("button",{class:"btn btn--icon btn--toggle",onClick:s},[a("h2",null,U(r.item.load),1)])]),a("button",{class:"btn btn--icon",onClick:o[0]||(o[0]=l=>H(K).open(Oh,{propertyName:r.propertyName,item:t.item,idPrefix:t.idPrefix,onDelete:i,onEdit:n}))},z0)]),$(tt,{show:t.item.quantity>0},{default:W(()=>[a("p",{innerHTML:H(ot)(t.item.description||"")},null,8,K0)]),_:1},8,["show"])],2))}}),X0=de(J0,[["__scopeId","data-v-cfc26f1d"]]);function Z0(e){return ek(0,e)}function ek(e,t){return Math.floor(Math.random()*(t-e)+e)}function un(e){return e[Z0(e.length)]}const gn=e=>($e("data-v-dbf6d572"),e=e(),qe(),e),tk={class:"edit"},nk={class:"input-group"},ik=gn(()=>a("label",{for:"name"},"Name",-1)),sk={class:"row flat"},rk=gn(()=>a("i",{class:"fas fa-random"},null,-1)),ok=[rk],ak=gn(()=>a("p",null,"Choose a name.",-1)),lk=gn(()=>a("label",{for:"id"},[se("ID "),a("label",{class:"muted"},"(permanent)")],-1)),ck={class:"input-group stretch"},uk={for:"description"},dk={class:"muted"},hk={class:"input-group"},fk=gn(()=>a("label",{for:"attitude"},"Attitude",-1)),pk={key:0,class:"row"},mk=gn(()=>a("span",null,"Cancel",-1)),yk=[mk],gk=gn(()=>a("span",null,"New",-1)),_k=[gk],vk={key:1,class:"row"},bk=gn(()=>a("i",{class:"fas fa-trash"},null,-1)),wk=gn(()=>a("span",null,"Delete",-1)),kk=[bk,wk],xk=gn(()=>a("span",null,"Save",-1)),Ck=[xk],Sk=ue({__name:"EditPersonModal",props:{propertyName:{},person:{},onEdit:{type:Function},onDelete:{type:Function},idPrefix:{},onCreateNew:{type:Function}},setup(e){var f;const t=e;pn(()=>{document.addEventListener("blur",s,!0)}),mi(()=>{document.removeEventListener("blur",s,!0)});const n=(f=Me().game)==null?void 0:f.codex,i=j();function s(m){i.value=null}function r(){var A,N;const m=un((A=n==null?void 0:n.names)==null?void 0:A.firstNames),y=un((N=n==null?void 0:n.names)==null?void 0:N.lastNames),S=`${m} ${y}`;l.value.name=S,c(S)}const o={id:"",name:"",description:"",attitude:0},l=j({...t.person||o});function c(m){if(!t.onCreateNew)return;let y=(t.idPrefix||"")+"-"+m;y=y.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,""),l.value.id=y}function u(){t.onCreateNew&&(t.onCreateNew(l.value),K.close())}function d(){t.onEdit&&(t.onEdit(l.value),K.close())}function h(){t.onDelete&&(t.onDelete(l.value.id),K.close())}return(m,y)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,U(t.onCreateNew?"Create a new":"Edit")+" "+U(m.propertyName),1)]),_:1})]),content:W(()=>[a("div",tk,[a("div",nk,[ik,a("div",sk,[Ne(a("input",{type:"text",id:"name","onUpdate:modelValue":y[0]||(y[0]=S=>l.value.name=S),placeholder:"Enter a memorable name",onInput:y[1]||(y[1]=S=>c(l.value.name)),onFocus:y[2]||(y[2]=S=>i.value="name")},null,544),[[De,l.value.name]]),a("button",{class:"btn btn--icon",onMousedown:r},ok,32)]),$(tt,{show:i.value==="name"},{default:W(()=>[ak]),_:1},8,["show"])]),a("div",{class:Z(["input-group",{disabled:!t.onCreateNew}])},[lk,Ne(a("input",{type:"text",id:"id","onUpdate:modelValue":y[3]||(y[3]=S=>l.value.id=S),placeholder:"A hyphenated identifier"},null,512),[[De,l.value.id]])],2),a("div",ck,[a("label",uk,[se("Description "),a("label",dk,"("+U(l.value.description.length)+" / 400) ",1)]),Ne(a("textarea",{id:"description","onUpdate:modelValue":y[4]||(y[4]=S=>l.value.description=S),placeholder:"A brief description"},null,512),[[De,l.value.description]])]),a("div",hk,[fk,Ne(a("input",{type:"number",id:"attitude","onUpdate:modelValue":y[5]||(y[5]=S=>l.value.attitude=S),placeholder:"-1, 0, 1..."},null,512),[[De,l.value.attitude]])]),t.onCreateNew?(_(),C("div",pk,[a("button",{class:"btn btn--alt mobile-full-width",onClick:y[6]||(y[6]=S=>H(K).close())},yk),a("button",{class:"btn mobile-full-width",onClick:u},_k)])):(_(),C("div",vk,[a("button",{class:"btn btn--alt mobile-full-width",onClick:h},kk),a("button",{class:"btn mobile-full-width",onClick:d},Ck)]))])]),_:1}))}}),rl=de(Sk,[["__scopeId","data-v-dbf6d572"]]),Ih=e=>($e("data-v-aac6f290"),e=e(),qe(),e),Ek=Ih(()=>a("i",{class:"fas fa-theater-masks"},null,-1)),Ak={class:"person-tile__content"},Tk={class:"header"},$k=Ih(()=>a("i",{class:"fas fa-edit"},null,-1)),qk=[$k],Ok={class:"row selection-bar"},Ik=ue({__name:"PersonTile",props:{person:{},propertyName:{},idPrefix:{},change:{type:Function},onEdit:{type:Function},onDelete:{type:Function},options:{}},setup(e){const t=e,n=j([t.person.attitude.toString()]);function i(o){n.value.length>1&&(n.value=[o.toString()]);const l=n.value.length>0?parseInt(n.value[0]):0;t.change(t.person,l)}function s(o){t.onEdit(o)}function r(o){t.onDelete(o)}return(o,l)=>(_(),C("div",{class:Z(["person-tile",{active:t.person.attitude!==0}])},[Ek,a("div",Ak,[a("div",Tk,[a("h2",null,U(t.person.name),1),a("button",{class:"btn btn--icon",onClick:l[0]||(l[0]=c=>H(K).open(rl,{propertyName:o.propertyName,person:t.person,idPrefix:t.idPrefix,onDelete:r,onEdit:s}))},qk)]),a("div",Ok,[(_(!0),C(te,null,he(o.options,c=>(_(),ce(at,{key:c.value,modelValue:n.value,"onUpdate:modelValue":[l[1]||(l[1]=u=>n.value=u),u=>i(c.value)],value:c.value.toString(),icon:c.icon,text:c.text},null,8,["modelValue","value","onUpdate:modelValue","icon","text"]))),128))]),a("p",null,U(t.person.description),1)])],2))}}),Ph=de(Ik,[["__scopeId","data-v-aac6f290"]]),Oe=e=>($e("data-v-93a03cd1"),e=e(),qe(),e),Pk={class:"sheet-layout__nested"},Rk=["src"],Nk={class:"input-group name"},Dk=Oe(()=>a("label",{for:"character-name"},"Name",-1)),Lk={class:"row flat"},Uk=["value","placeholder"],Mk=Oe(()=>a("i",{class:"fas fa-random"},null,-1)),Bk=[Mk],Fk=Oe(()=>a("p",null,"What's your name?",-1)),Qk={class:"input-group"},Hk=Oe(()=>a("label",{for:"character-alias"},[se("Alias "),a("label",{class:"muted"},"(Optional)")],-1)),jk={class:"row flat"},Vk=["value"],Wk=Oe(()=>a("i",{class:"fas fa-random"},null,-1)),Gk=[Wk],Yk=Oe(()=>a("p",null,"What alias or nickname are you known by in the underworld?",-1)),zk={class:"input-group"},Kk=Oe(()=>a("label",{for:"character-heritage"},"Heritage",-1)),Jk=["value"],Xk=Oe(()=>a("p",null,"You can trace your family line back to this place.",-1)),Zk={class:"text-list"},ex=["onMousedown"],tx=["value"],nx=Oe(()=>a("p",null,"Add a detail about your family life or upbringing.",-1)),ix={class:"input-group"},sx=Oe(()=>a("label",{for:"character-look"},"Look",-1)),rx=["value","placeholder"],ox=Oe(()=>a("p",null,"What do you look like?",-1)),ax={class:"text-list"},lx=Oe(()=>a("label",null,"Descriptions",-1)),cx=["onClick"],ux={class:"text-list"},dx=Oe(()=>a("label",null,"Clothes",-1)),hx=["onClick"],fx={class:"input-group"},px=Oe(()=>a("label",{for:"character-background"},"Background",-1)),mx=["value"],yx=Oe(()=>a("p",null,"What did you do before you joined the crew?",-1)),gx={class:"text-list"},_x=["onMousedown"],vx={class:"input-group"},bx=["value"],wx=Oe(()=>a("p",null,"Add a detail about your past life or career.",-1)),kx={class:"input-group"},xx=Oe(()=>a("label",null,"Crew",-1)),Cx={class:"row wrap"},Sx=["onClick"],Ex={class:"input-group"},Ax=Oe(()=>a("label",{for:"character-vice"},"Vice",-1)),Tx=["value"],$x=Oe(()=>a("p",null,"What vice do you indulge in to relieve stress?",-1)),qx={class:"text-list"},Ox=["onClick"],Ix={class:"input-group"},Px=["value"],Rx=Oe(()=>a("p",null,"Add a detail about your Vice.",-1)),Nx={class:"input-group"},Dx=Oe(()=>a("label",{for:"character-vice-purveyor"},"Vice Purveyor",-1)),Lx=["value"],Ux=Oe(()=>a("p",null,"Who provides your vice?",-1)),Mx={key:0,class:"text-list"},Bx=["onClick"],Fx={for:"contacts"},Qx={class:"row"},Hx=Oe(()=>a("span",null,"New",-1)),jx=[Hx],Vx={key:0,class:"tile-list tile-list--mini"},Wx={key:1,class:"no-tiles"},Gx={class:"input-group"},Yx={for:"stress"},zx={class:"muted"},Kx={class:"input-group"},Jx={for:"trauma"},Xx={class:"muted"},Zx={key:0,class:"tile-list"},eC={key:1,class:"no-tiles"},tC=Oe(()=>a("em",null,"❖ No Traumas",-1)),nC=[tC],iC=Oe(()=>a("label",null,"Harms",-1)),sC={class:"harms-list"},rC={key:0},oC={key:1,class:"harm",innerHTML:"Need help"},aC={key:2},lC=["innerHTML"],cC={key:4},uC=["innerHTML"],dC=Oe(()=>a("label",null," Healing ",-1)),hC=Oe(()=>a("label",null," Armors ",-1)),fC=Oe(()=>a("label",null,"Playbook",-1)),pC=Oe(()=>a("label",null,"Special Abilities",-1)),mC={class:"row"},yC=Oe(()=>a("span",null,"New",-1)),gC=[yC],_C={class:"tile-list"},vC={class:"muted"},bC={class:"attribute-list"},wC={class:"muted"},kC={class:"attribute-list"},xC={class:"muted"},CC={class:"attribute-list"},SC={class:"muted"},EC={class:"row wrap"},AC=["onClick"],TC={key:0,class:"load"},$C={class:"muted"},qC={key:0,class:"tile-list"},OC={key:1,class:"no-tiles"},IC=Oe(()=>a("em",null,"❖ No Items",-1)),PC=[IC],RC={class:"row center mobile-nav"},NC=Oe(()=>a("i",{class:"fas fa-file-alt"},null,-1)),DC=Oe(()=>a("i",{class:"fas fa-file-alt"},null,-1)),LC=Oe(()=>a("i",{class:"fas fa-file-alt"},null,-1)),UC=ue({__name:"TheCharacterSheet",props:{sheet:{}},setup(e){var At;const t=e,n=(At=Me().game)==null?void 0:At.codex;pn(()=>{document.addEventListener("blur",s,!0)}),mi(()=>{document.removeEventListener("blur",s,!0)});const i=j();function s(R){var q;(q=R.relatedTarget)!=null&&q.closest(".shelf")||(i.value=null)}function r(R,q){console.log("onChangeValue",R,q);const T=`/data/sheets/${t.sheet.id}/${q}`;ke([{op:"replace",path:T,value:R}])}const o=X(()=>{var R,q;return Object.values(((q=(R=Me().game)==null?void 0:R.data)==null?void 0:q.sheets)||[]).filter(T=>T.sheetType==="crew")});X(()=>o.value.find(R=>R.id===t.sheet.crewId)||null);function l(){var V,x;const R=((V=n==null?void 0:n.names)==null?void 0:V.firstNames)||[],q=((x=n==null?void 0:n.names)==null?void 0:x.lastNames)||[],T=un(R),G=un(q);r(`${T} ${G}`,"name")}function c(){var T;const R=((T=n==null?void 0:n.names)==null?void 0:T.aliases)||[],q=un(R);r(q,"alias")}const u=X(()=>{var R,q;return(q=(R=n.sheets)==null?void 0:R.character)==null?void 0:q.vicePurveyors.filter(T=>T.vices.includes(t.sheet.vice.toLowerCase()))}),d=j(localStorage.getItem("showOnlySelectedContacts")==="true"),h=X(()=>d.value?t.sheet.contacts.filter(R=>R.attitude!==0):t.sheet.contacts);function f(R){const q=t.sheet.contacts.findIndex(T=>T.id===R.id);ke([{op:"replace",path:`/data/sheets/${t.sheet.id}/contacts/${q}`,value:R}])}function m(R){const q=t.sheet.contacts.findIndex(T=>T.id===R);ke([{op:"remove",path:`/data/sheets/${t.sheet.id}/contacts/${q}`}])}function y(R,q){const T=t.sheet.contacts.findIndex(V=>V.id===R.id),G=`/data/sheets/${t.sheet.id}/contacts/${T}/attitude`;ke([{op:"replace",path:G,value:q}])}function S(R){ke([{op:"add",path:`/data/sheets/${t.sheet.id}/contacts/-`,value:R}])}const A=X(()=>t.sheet.maxStress),N=j(localStorage.getItem("showOnlySelectedTraumas")==="true"),F=X(()=>N.value?t.sheet.traumas.filter(R=>R.quantity>0):t.sheet.traumas);function J(R,q){const T=t.sheet.traumas.findIndex(V=>V.id===R.id),G=`/data/sheets/${t.sheet.id}/traumas/${T}/quantity`;ke([{op:"replace",path:G,value:q}])}const oe=X(()=>t.sheet.maxTraumas);function ee(R,q){const T=`/data/sheets/${t.sheet.id}/harms/${R}/description`;ke([{op:"replace",path:T,value:q}])}const ie=X(()=>t.sheet.attrHunt.quantity>0||0+t.sheet.attrStudy.quantity>0||0+t.sheet.attrSurvey.quantity>0||0+t.sheet.attrTinker.quantity>0?1:0),be=X(()=>t.sheet.attrFinesse.quantity>0||0+t.sheet.attrProwl.quantity>0||0+t.sheet.attrSkirmish.quantity>0||0+t.sheet.attrWreck.quantity>0?1:0),ae=X(()=>t.sheet.attrAttune.quantity>0||0+t.sheet.attrCommand.quantity>0||0+t.sheet.attrConsort.quantity>0||0+t.sheet.attrSway.quantity>0?1:0),ne=j(!1),Re=X(()=>ne.value?t.sheet.specialAbilities.filter(R=>R.quantity>0):t.sheet.specialAbilities);function He(R,q){const T=t.sheet.specialAbilities.findIndex(V=>V.id===R.id),G=`/data/sheets/${t.sheet.id}/specialAbilities/${T}/quantity`;ke([{op:"replace",path:G,value:q}])}function Ze(R){const q=t.sheet.specialAbilities.findIndex(T=>T.id===R.id);ke([{op:"replace",path:`/data/sheets/${t.sheet.id}/specialAbilities/${q}`,value:R}])}function st(R){const q=t.sheet.specialAbilities.findIndex(T=>T.id===R);ke([{op:"remove",path:`/data/sheets/${t.sheet.id}/specialAbilities/${q}`}])}function Et(R){ke([{op:"add",path:`/data/sheets/${t.sheet.id}/specialAbilities/-`,value:R}])}const Ye=X(()=>t.sheet.load.find(q=>q.id===t.sheet.selectedLoad)),_e=X(()=>t.sheet.items.reduce((R,q)=>q.quantity>0?R+q.load:R,0));function Ce(R,q){const G=`items/${t.sheet.items.findIndex(V=>V.id===R)}/quantity`;r(q,G)}function Se(R){r(R,"items/-")}function bt(R){const T=`items/${t.sheet.items.findIndex(G=>G.id===R.id)}`;r(R,T)}Ut([d,N],([R,q])=>{localStorage.setItem("showOnlySelectedContacts",R.toString()),localStorage.setItem("showOnlySelectedTraumas",q.toString())});const dt=j(0),Ke=j(null);function Je(R){const q=Math.round(R.scrollLeft/R.clientWidth);dt.value=q}function mt(R){Ke.value&&(Ke.value.scrollTo({top:0}),Ke.value.scrollTo({left:Ke.value.clientWidth*R,behavior:"smooth"}))}return(R,q)=>{var G,V;const T=Fi("Divider");return _(),C("div",Pk,[a("div",{class:"character-layout",ref_key:"carouselRef",ref:Ke,onScroll:q[38]||(q[38]=x=>Je(x.target))},[a("div",null,[a("section",null,[a("div",{class:"character-type-card",style:Jt({backgroundColor:(G=H(Li)(R.sheet.image))==null?void 0:G.commonColor})},[a("img",{src:(V=H(Li)(R.sheet.image))==null?void 0:V.url},null,8,Rk),a("h1",{class:Z({"extra-long":R.sheet.name.split(" ").some(x=>x.length>8)})},U(R.sheet.name),3),a("h2",null,U(R.sheet.characterTypeDescription),1)],4),a("div",Nk,[Dk,a("div",Lk,[a("input",{id:"character-name",type:"text",value:t.sheet.name,onFocus:q[0]||(q[0]=x=>i.value="name"),placeholder:"Unnamed "+R.sheet.characterType,onChange:q[1]||(q[1]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"name")})},null,40,Uk),a("button",{class:"btn btn--icon",onClick:l},Bk)]),$(tt,{show:i.value=="name"},{default:W(()=>[Fk]),_:1},8,["show"])]),a("div",Qk,[Hk,a("div",jk,[a("input",{id:"character-alias",type:"text",value:t.sheet.alias,onFocus:q[2]||(q[2]=x=>i.value="alias"),placeholder:"Alias",onChange:q[3]||(q[3]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"alias")})},null,40,Vk),a("button",{class:"btn btn--icon",onClick:c},Gk)]),$(tt,{show:i.value=="alias"},{default:W(()=>[Yk]),_:1},8,["show"])]),a("div",zk,[Kk,a("input",{id:"character-heritage",type:"text",value:t.sheet.heritage,onFocus:q[4]||(q[4]=x=>i.value="heritage"),placeholder:"Heritage",onChange:q[5]||(q[5]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"heritage")})},null,40,Jk),$(tt,{show:i.value=="heritage"},{default:W(()=>[Xk,a("div",Zk,[(_(!0),C(te,null,he(H(n).lexicon.locations,x=>(_(),C("button",{class:"btn btn--text",key:x.name,onMousedown:z=>{r(x.name,"heritage"),r(x.blurb,"heritageDescription")}},U(x.name),41,ex))),128))])]),_:1},8,["show"]),a("textarea",{spellcheck:"false",value:t.sheet.heritageDescription,onFocus:q[6]||(q[6]=x=>i.value="heritageDescription"),onChange:q[7]||(q[7]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"heritageDescription")}),placeholder:"A detail about your family life or upbringing."},null,40,tx),$(tt,{show:i.value=="heritageDescription"},{default:W(()=>[nx]),_:1},8,["show"])]),a("div",ix,[sx,a("textarea",{id:"character-look",type:"text",value:t.sheet.look,onFocus:q[8]||(q[8]=x=>i.value="look"),placeholder:`A plain-looking ${R.sheet.characterType}${R.sheet.heritage?` from ${R.sheet.heritage}`:""}`,onChange:q[9]||(q[9]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"look")})},null,40,rx),$(tt,{show:i.value=="look"},{default:W(()=>{var x,z;return[ox,a("div",ax,[lx,(_(!0),C(te,null,he((x=H(n).looks)==null?void 0:x.adjectives,fe=>(_(),C("button",{class:"btn btn--text",key:fe,onClick:g=>r(R.sheet.look.length?R.sheet.look+", "+fe.toLowerCase():fe,"look")},U(fe),9,cx))),128))]),a("div",ux,[dx,(_(!0),C(te,null,he((z=H(n).looks)==null?void 0:z.clothes,fe=>(_(),C("button",{class:"btn btn--text",key:fe,onClick:g=>r(R.sheet.look.length?R.sheet.look+", "+fe.toLowerCase():fe,"look")},U(fe),9,hx))),128))])]}),_:1},8,["show"])]),a("div",fx,[px,a("input",{id:"character-background",type:"text",value:t.sheet.background,onFocus:q[10]||(q[10]=x=>i.value="background"),placeholder:"Background",onChange:q[11]||(q[11]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"background")})},null,40,mx),$(tt,{show:i.value=="background"},{default:W(()=>{var x,z;return[yx,a("div",gx,[(_(!0),C(te,null,he((z=(x=H(n).sheets)==null?void 0:x.character)==null?void 0:z.backgrounds,fe=>(_(),C("button",{class:"btn btn--text",key:fe.name,onMousedown:g=>{r(fe.name,"background"),r(fe.blurb,"backgroundDescription")}},U(fe.name),41,_x))),128))])]}),_:1},8,["show"])]),a("div",vx,[a("textarea",{spellcheck:"false",value:t.sheet.backgroundDescription,onFocus:q[12]||(q[12]=x=>i.value="backgroundDescription"),onChange:q[13]||(q[13]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"backgroundDescription")}),placeholder:"E.g. Sailor, mutineer, former Bluecoat, smuggler, courtier, street urchin, gang member, etc."},null,40,bx),$(tt,{show:i.value=="backgroundDescription"},{default:W(()=>[wx]),_:1},8,["show"])]),a("div",kx,[xx,a("div",Cx,[a("button",{class:Z(["btn btn--tab mobile-full-width",{active:R.sheet.crewId===null}]),onClick:q[14]||(q[14]=x=>r(null,"crewId"))}," None ",2),(_(!0),C(te,null,he(o.value,x=>(_(),C("button",{class:Z(["btn btn--tab mobile-full-width",{active:R.sheet.crewId===x.id}]),key:x.id,onClick:z=>r(x.id,"crewId")},U(x.name),11,Sx))),128))])])]),$(T),a("section",null,[a("div",Ex,[Ax,a("input",{id:"character-vice",type:"text",value:t.sheet.vice,onFocus:q[15]||(q[15]=x=>i.value="vice"),placeholder:"Vice",onChange:q[16]||(q[16]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"vice")})},null,40,Tx),$(tt,{show:i.value=="vice"},{default:W(()=>{var x,z;return[$x,a("div",qx,[(_(!0),C(te,null,he((z=(x=H(n).sheets)==null?void 0:x.character)==null?void 0:z.vices,fe=>(_(),C("button",{class:"btn btn--text",key:fe.name,onClick:g=>{r(fe.name,"vice"),r(fe.blurb,"viceDescription")}},U(fe.name),9,Ox))),128))])]}),_:1},8,["show"])]),a("div",Ix,[a("textarea",{spellcheck:"false",value:t.sheet.viceDescription,onFocus:q[17]||(q[17]=x=>i.value="viceDescription"),onChange:q[18]||(q[18]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"viceDescription")}),placeholder:"Add a detail about your vice."},null,40,Px),$(tt,{show:i.value=="viceDescription"},{default:W(()=>[Rx]),_:1},8,["show"])]),a("div",Nx,[Dx,a("textarea",{id:"character-vice-purveyor",type:"text",value:t.sheet.vicePurveyor,spellcheck:"false",onFocus:q[19]||(q[19]=x=>i.value="vicePurveyor"),placeholder:"Vice Purveyor",onChange:q[20]||(q[20]=x=>{var z;return r((z=x.target)==null?void 0:z.value,"vicePurveyor")})},null,40,Lx),$(tt,{show:i.value=="vicePurveyor"},{default:W(()=>[Ux,u.value.length?(_(),C("div",Mx,[(_(!0),C(te,null,he(u.value,x=>(_(),C("button",{class:"btn btn--text",key:x,onClick:z=>r(`${x.name}. ${x.blurb}`,"vicePurveyor")},U(x.name),9,Bx))),128))])):Y("",!0)]),_:1},8,["show"])])]),$(T),a("section",null,[a("label",Fx,U(R.sheet.contactsLabel),1),a("div",Qx,[a("button",{class:"btn",onClick:q[21]||(q[21]=x=>H(K).open(rl,{propertyName:"Person",idPrefix:"contact",onCreateNew:S}))},jx),$(at,{icon:"fa-low-vision",modelValue:d.value,"onUpdate:modelValue":q[22]||(q[22]=x=>d.value=x),label:"Show only selected"},null,8,["modelValue"])]),h.value.length>0?(_(),C("div",Vx,[(_(!0),C(te,null,he(h.value,x=>(_(),ce(Ph,{key:x.id,idPrefix:t.sheet.characterType+"-contact",propertyName:R.sheet.contactsLabel,person:x,change:y,onEdit:f,onDelete:m,options:[{value:-1,icon:"fas fa-thumbs-down"},{value:1,icon:"fas fa-thumbs-up"}]},null,8,["idPrefix","propertyName","person"]))),128))])):Y("",!0),h.value.length==0?(_(),C("p",Wx,[a("em",null,"❖ No "+U(R.sheet.contactsLabel),1)])):Y("",!0)])]),a("div",null,[a("section",null,[a("div",Gx,[a("label",Yx,[se(" Stress "),a("label",zx,U(R.sheet.stress)+" / "+U(A.value),1)]),$(vn,{id:"stress",value:t.sheet.stress,max:t.sheet.maxStress,onChange:q[23]||(q[23]=x=>r(x,"stress"))},null,8,["value","max"])]),a("div",Kx,[a("label",Jx,[se("Trauma "),a("label",Xx,U(F.value.filter(x=>x.quantity>0).length)+" / "+U(oe.value),1)]),$(at,{icon:"fa-low-vision",modelValue:N.value,"onUpdate:modelValue":q[24]||(q[24]=x=>N.value=x),label:"Show only selected"},null,8,["modelValue"]),F.value.length>0?(_(),C("div",Zx,[(_(!0),C(te,null,he(F.value,x=>(_(),ce(Nt,{key:x.id,effectable:x,idPrefix:"trauma",propertyName:"Trauma",change:z=>J(x,z)},null,8,["effectable","change"]))),128))])):Y("",!0),F.value.length==0?(_(),C("p",eC,nC)):Y("",!0)])]),$(T),a("section",null,[iC,a("div",sC,[(_(),ce(Zi,{key:0,harm:R.sheet.harms[0],changeHarm:x=>ee(0,x)},null,8,["harm","changeHarm"])),R.sheet.harms[0].description.length?(_(),C("p",oC)):(_(),C("p",rC,"Severe Harm")),(_(),ce(Zi,{key:1,harm:R.sheet.harms[1],changeHarm:x=>ee(1,x)},null,8,["harm","changeHarm"])),(_(),ce(Zi,{key:2,harm:R.sheet.harms[2],changeHarm:x=>ee(2,x)},null,8,["harm","changeHarm"])),!R.sheet.harms[1].description.length&&!R.sheet.harms[2].description.length?(_(),C("p",aC," Moderate Harm ")):(_(),C("p",{key:3,class:"harm",innerHTML:H(ot)("[/dice -1]")},null,8,lC)),(_(),ce(Zi,{key:3,harm:R.sheet.harms[3],changeHarm:x=>ee(3,x)},null,8,["harm","changeHarm"])),(_(),ce(Zi,{key:4,harm:R.sheet.harms[4],changeHarm:x=>ee(4,x)},null,8,["harm","changeHarm"])),!R.sheet.harms[3].description.length&&!R.sheet.harms[4].description.length?(_(),C("p",cC," Lesser Harm ")):(_(),C("p",{key:5,class:"harm",innerHTML:H(ot)("Less Effect")},null,8,uC))]),dC,$(G1,{clock:R.sheet.healingClock,change:x=>r(x,"healingClock/value")},null,8,["clock","change"]),hC,$(at,{icon:"fa-shield-alt",modelValue:R.sheet.armorUsed,"onUpdate:modelValue":[q[25]||(q[25]=x=>R.sheet.armorUsed=x),q[26]||(q[26]=x=>r(x,"armorUsed"))],label:"Armor"},null,8,["modelValue"]),$(at,{icon:"fa-shield-alt",modelValue:R.sheet.heavyArmorUsed,"onUpdate:modelValue":[q[27]||(q[27]=x=>R.sheet.heavyArmorUsed=x),q[28]||(q[28]=x=>r(x,"heavyArmorUsed"))],label:"Heavy"},null,8,["modelValue"]),$(at,{icon:"fa-shield-alt",modelValue:R.sheet.specialArmorUsed,"onUpdate:modelValue":[q[29]||(q[29]=x=>R.sheet.specialArmorUsed=x),q[30]||(q[30]=x=>r(x,"specialArmorUsed"))],label:"Special"},null,8,["modelValue"])]),$(T),a("section",null,[fC,$(vn,{value:t.sheet.playbookXP,max:8,onChange:q[31]||(q[31]=x=>r(x,"playbookXP"))},null,8,["value"]),pC,a("div",mC,[a("button",{class:"btn",onClick:q[32]||(q[32]=x=>H(K).open(ii,{propertyName:"Special Ability",idPrefix:R.sheet.characterType,onCreateNew:Et}))},gC),$(at,{icon:"fa-low-vision",modelValue:ne.value,"onUpdate:modelValue":q[33]||(q[33]=x=>ne.value=x),label:"Show only selected"},null,8,["modelValue"])]),a("div",_C,[(_(!0),C(te,null,he(Re.value,x=>(_(),ce(Nt,{key:x.id,effectable:x,propertyName:"Special Ability",idPrefix:t.sheet.characterType,change:z=>He(x,z),onEdit:Ze,onDelete:st},null,8,["effectable","idPrefix","change"]))),128))])]),$(T),a("section",null,[a("label",null,[se("Insight "),a("label",vC,"("+U(ie.value)+")",1)]),$(vn,{value:t.sheet.insightXP,max:6,onChange:q[34]||(q[34]=x=>r(x,"insightXP"))},null,8,["value"]),a("div",bC,[$(Pt,{effectable:R.sheet.attrHunt,change:x=>r(x,"attrHunt/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrStudy,change:x=>r(x,"attrStudy/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrSurvey,change:x=>r(x,"attrSurvey/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrTinker,change:x=>r(x,"attrTinker/quantity")},null,8,["effectable","change"])])]),$(T),a("section",null,[a("label",null,[se("Prowess "),a("label",wC,"("+U(be.value)+")",1)]),$(vn,{value:t.sheet.prowessXP,max:6,onChange:q[35]||(q[35]=x=>r(x,"prowessXP"))},null,8,["value"]),a("div",kC,[$(Pt,{effectable:R.sheet.attrFinesse,change:x=>r(x,"attrFinesse/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrProwl,change:x=>r(x,"attrProwl/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrSkirmish,change:x=>r(x,"attrSkirmish/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrWreck,change:x=>r(x,"attrWreck/quantity")},null,8,["effectable","change"])])]),$(T),a("section",null,[a("label",null,[se("Resolve "),a("label",xC,"("+U(ae.value)+")",1)]),$(vn,{value:t.sheet.resolveXP,max:6,onChange:q[36]||(q[36]=x=>r(x,"resolveXP"))},null,8,["value"]),a("div",CC,[$(Pt,{effectable:R.sheet.attrAttune,change:x=>r(x,"attrAttune/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrCommand,change:x=>r(x,"attrCommand/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrConsort,change:x=>r(x,"attrConsort/quantity")},null,8,["effectable","change"]),$(Pt,{effectable:R.sheet.attrSway,change:x=>r(x,"attrSway/quantity")},null,8,["effectable","change"])])])]),a("div",null,[a("section",null,[a("label",null,[se("Load "),a("label",SC,"("+U(_e.value)+U(Ye.value&&"/"+Ye.value.max)+")",1)]),a("div",EC,[(_(!0),C(te,null,he(R.sheet.load,x=>(_(),C("button",{class:Z(["btn btn--tab",{active:x.id===R.sheet.selectedLoad}]),onClick:z=>r(x.id===R.sheet.selectedLoad?null:x.id,"selectedLoad")},U(x.name)+" ("+U(x.max)+U(x.id==="heavy"?"+":"")+") ",11,AC))),256)),a("button",{class:"btn",onClick:q[37]||(q[37]=x=>H(K).open(Oh,{propertyName:"Item",idPrefix:"item",onCreateNew:Se}))}," New Item ")]),Ye.value?(_(),C("div",TC,[a("p",$C,U(Ye.value.description),1)])):Y("",!0)]),a("section",null,[R.sheet.items.length>0?(_(),C("div",qC,[(_(!0),C(te,null,he(R.sheet.items,x=>(_(),ce(X0,{key:x.id,item:x,propertyName:"Item",idPrefix:"item",onEdit:bt,change:z=>Ce(x.id,z)},null,8,["item","change"]))),128))])):Y("",!0),R.sheet.items.length==0?(_(),C("p",OC,PC)):Y("",!0)])])],544),a("div",RC,[a("button",{class:Z(["btn btn--tab",{active:dt.value==0}]),onClick:q[39]||(q[39]=x=>mt(0))},[se(" 1 "),NC],2),a("button",{class:Z(["btn btn--tab",{active:dt.value==1}]),onClick:q[40]||(q[40]=x=>mt(1))},[se(" 2 "),DC],2),a("button",{class:Z(["btn btn--tab",{active:dt.value==2}]),onClick:q[41]||(q[41]=x=>mt(2))},[se(" 3 "),LC],2)])])}}}),MC=de(UC,[["__scopeId","data-v-93a03cd1"]]),BC={class:"header"},FC=["innerHTML"],QC={class:"roadmap"},HC=ue({__name:"ClaimTile",props:{claim:{},showDetails:{type:Boolean},idPrefix:{},propertyName:{},neighborClaims:{},change:{type:Function}},setup(e){const t=e,n=j(null),i=j(!1);pn(()=>{s(),window.addEventListener("resize",s)}),mi(()=>{window.removeEventListener("resize",s)});function s(){var c;i.value=((c=n.value)==null?void 0:c.clientWidth)&&n.value.clientWidth<140||!1}function r(c){const u=t.neighborClaims[c];return u?u.quantity>0:!1}const o=X(()=>t.claim.adjacent.map(c=>l(c)));function l(c,u=1){const d=[bn.NORTH,bn.EAST,bn.SOUTH,bn.WEST],h=d.indexOf(c);return h===-1?c:d[(h+u+d.length)%d.length]}return(c,u)=>(_(),C("div",{ref_key:"claimTile",ref:n,class:Z(["claim-tile",{small:i.value,active:t.claim.quantity>0}]),onClick:u[0]||(u[0]=d=>t.change(t.claim.quantity?0:1))},[a("div",BC,[a("h2",null,U(t.claim.name),1)]),t.showDetails?(_(),C("p",{key:0,innerHTML:H(ot)(t.claim.description)},null,8,FC)):Y("",!0),a("ul",QC,[(_(!0),C(te,null,he(o.value,d=>(_(),C("li",{class:Z({[d]:!0,active:t.claim.quantity>0&&r(l(d,-1))})},null,2))),256))])],2))}}),jC=de(HC,[["__scopeId","data-v-4c40cc41"]]),oa=Rr("options",()=>{const e={showHints:!0},t=j(JSON.parse(localStorage.getItem("options")||JSON.stringify(e)));return Ut(t,n=>{localStorage.setItem("options",JSON.stringify(n))},{deep:!0}),{options:t}}),VC=e=>($e("data-v-b4e36480"),e=e(),qe(),e),WC={key:0,class:"info-box"},GC=VC(()=>a("i",{class:"fas fa-info"},null,-1)),YC=ue({__name:"InfoBox",props:{ignoreOptions:{type:Boolean}},setup(e){const t=e;return(n,i)=>H(oa)().options.showHints||t.ignoreOptions?(_(),C("div",WC,[GC,a("div",null,[Ii(n.$slots,"default",{},void 0)])])):Y("",!0)}}),Vt=de(YC,[["__scopeId","data-v-b4e36480"]]),Rh=e=>($e("data-v-2e5538b2"),e=e(),qe(),e),zC={class:"stepper"},KC=Rh(()=>a("i",{class:"fas fa-minus-circle"},null,-1)),JC=[KC],XC={class:"content"},ZC={key:0},eS=Rh(()=>a("i",{class:"fas fa-plus-circle"},null,-1)),tS=[eS],zc=99,nS=ue({__name:"NumberStepper",props:{value:{},min:{},max:{},label:{}},emits:["change"],setup(e,{emit:t}){const n=e,i=t,s=j(n.value);Ut(()=>n.value,l=>{s.value=l});const r=()=>{n.max!==void 0&&s.value>=n.max||(s.value++,i("change",s.value))},o=()=>{n.min!==void 0&&s.value<=n.min||(s.value--,i("change",s.value))};return(l,c)=>(_(),C("div",zC,[a("button",{onClick:o,class:Z(["btn btn--icon",{disabled:n.min!==void 0&&s.value<=n.min,locked:zc<1}])},JC,2),a("div",XC,[a("h1",null,U(l.value),1),n.label?(_(),C("h2",ZC,U(n.label),1)):Y("",!0)]),a("button",{onClick:r,class:Z(["btn btn--icon",{disabled:n.max!==void 0&&s.value>=n.max,locked:zc<1}])},tS,2)]))}}),ds=de(nS,[["__scopeId","data-v-2e5538b2"]]),ut=e=>($e("data-v-550bdc37"),e=e(),qe(),e),iS={class:"edit"},sS={key:0,class:"input-group"},rS=ut(()=>a("label",{for:"gangType"},[se("Gang Type "),a("label",{class:"muted"},"(Choose one. A second Gang Type costs 2 upgrades)")],-1)),oS={class:"tile-list tile-list--mini"},aS={key:1,class:"input-group"},lS=ut(()=>a("label",{for:"name"},"Name",-1)),cS=ut(()=>a("p",null,"Choose a name for your Expert.",-1)),uS=ut(()=>a("i",{class:"fas fa-random"},null,-1)),dS=ut(()=>a("span",null,"Randomize",-1)),hS=[uS,dS],fS={key:2,class:"input-group"},pS=ut(()=>a("label",{for:"expertise1"},"Expertise",-1)),mS=ut(()=>a("p",null,"Choose your Expert's area of expertise.",-1)),yS={class:"text-list"},gS=["onMousedown"],_S={key:3,class:"input-group"},vS=ut(()=>a("label",{for:"expertise2"},[se("Additional Expertise "),a("label",{class:"muted"},"(Costs 2 upgrades)")],-1)),bS=ut(()=>a("p",null,"Choose an additional area of expertise for your Expert.",-1)),wS={class:"text-list"},kS=["onMousedown"],xS={key:4,class:"input-group"},CS=ut(()=>a("label",{for:"name"},"Name",-1)),SS={class:"muted"},ES={class:"input-block"},AS={class:"input-group"},TS=["innerHTML"],$S=["innerHTML"],qS=["innerHTML"],OS={key:0,class:"input-group"},IS={class:"row flat"},PS=["innerHTML"],RS={class:"input-group"},NS=ut(()=>a("label",{for:"edges"},[se("Edges "),a("label",{class:"muted"},"(Choose at least one)")],-1)),DS={class:"tile-list tile-list--mini"},LS={class:"input-group"},US={for:"flaws"},MS={class:"muted"},BS={class:"tile-list tile-list--mini"},FS={class:"input-group"},QS=ut(()=>a("label",{for:"harm"},"Harm",-1)),HS={class:"tile-list tile-list--mini"},jS={class:"input-group stretch"},VS={for:"description"},WS={class:"muted"},GS={key:5,class:"alert"},YS=ut(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),zS=ut(()=>a("i",{class:"fas fa-times"},null,-1)),KS=[zS],JS={key:6,class:"row"},XS=ut(()=>a("span",null,"Cancel",-1)),ZS=[XS],eE=ut(()=>a("span",null,"New",-1)),tE=[eE],nE={key:7,class:"row"},iE=ut(()=>a("i",{class:"fas fa-trash"},null,-1)),sE=ut(()=>a("span",null,"Delete",-1)),rE=[iE,sE],oE=ut(()=>a("span",null,"Save",-1)),aE=[oE],lE=ue({__name:"EditCohortModal",props:{propertyName:{},cohort:{},onEdit:{type:Function},onDelete:{type:Function},idPrefix:{},onCreateNew:{type:Function}},setup(e){var F,J,oe,ee,ie,be,ae,ne,Re,He,Ze,st,Et,Ye,_e,Ce,Se,bt,dt,Ke,Je,mt,At,R,q,T,G,V,x,z,fe,g,k,I;const t=(F=Me().game)==null?void 0:F.codex,n=e;pn(()=>{document.addEventListener("blur",s,!0)}),mi(()=>{document.removeEventListener("blur",s,!0)});const i=j();function s(O){i.value=null}function r(){var b,E;const O=un((b=t==null?void 0:t.names)==null?void 0:b.firstNames),v=un((E=t==null?void 0:t.names)==null?void 0:E.lastNames);h.value.name=`${O} ${v}`,console.log(h.value.name)}const o=X(()=>{const O=[...t.lexicon.gangs];try{return O[h.value.scale]}catch{return"0-2 people"}}),l={id:us(),name:"",description:"",cohortType:"gang",edges:((ee=(oe=(J=t==null?void 0:t.sheets)==null?void 0:J.crew)==null?void 0:oe.cohorts)==null?void 0:ee.edges.map(O=>({...O,id:"edge-"+O.name,quantity:0,maxQuantity:1})))||[],flaws:((ae=(be=(ie=t==null?void 0:t.sheets)==null?void 0:ie.crew)==null?void 0:be.cohorts)==null?void 0:ae.flaws.map(O=>({...O,id:"flaw-"+O.name,quantity:0,maxQuantity:1})))||[],gangType:[{id:"gangType-adepts",name:"Adepts",description:"Scholars, tinkerers, occultists, and chemists",quantity:0,maxQuantity:1},{id:"gangType-rooks",name:"Rooks",description:"Con artists, spies, and socialites",quantity:0,maxQuantity:1},{id:"gangType-rovers",name:"Rovers",description:"Sailors, carriage drivers, and scavengers",quantity:0,maxQuantity:1},{id:"gangType-skulks",name:"Skulks",description:"Scouts, infiltrators, and thieves",quantity:0,maxQuantity:1},{id:"gangType-thugs",name:"Thugs",description:"Killers, brawlers, and roustabouts",quantity:0,maxQuantity:1}],harm:((st=(Ze=(He=(Re=(ne=Me().game)==null?void 0:ne.codex)==null?void 0:Re.sheets)==null?void 0:He.crew)==null?void 0:Ze.cohorts)==null?void 0:st.harm.map(O=>({...O,id:"harm-"+O.name,quantity:0,maxQuantity:1})))||[],quality:0,scale:0},c={id:us(),name:"",description:"",cohortType:"expert",edges:((_e=(Ye=(Et=t==null?void 0:t.sheets)==null?void 0:Et.crew)==null?void 0:Ye.cohorts)==null?void 0:_e.edges.map(O=>({...O,id:"edge-"+O.name,quantity:0,maxQuantity:1})))||[],flaws:((bt=(Se=(Ce=t==null?void 0:t.sheets)==null?void 0:Ce.crew)==null?void 0:Se.cohorts)==null?void 0:bt.flaws.map(O=>({...O,id:"flaw-"+O.name,quantity:0,maxQuantity:1})))||[],expertise1:"",expertise2:"",harm:((At=(mt=(Je=(Ke=(dt=Me().game)==null?void 0:dt.codex)==null?void 0:Ke.sheets)==null?void 0:Je.crew)==null?void 0:mt.cohorts)==null?void 0:At.harm.map(O=>({...O,id:"harm-"+O.name,quantity:0,maxQuantity:1})))||[],quality:0,scale:0},u={id:us(),name:"",description:"",cohortType:"vehicle",edges:((T=(q=(R=t==null?void 0:t.sheets)==null?void 0:R.crew)==null?void 0:q.cohorts)==null?void 0:T.vehicleEdges.map(O=>({...O,id:"edge-"+O.name,quantity:0,maxQuantity:1})))||[],flaws:((x=(V=(G=t==null?void 0:t.sheets)==null?void 0:G.crew)==null?void 0:V.cohorts)==null?void 0:x.vehicleFlaws.map(O=>({...O,id:"flaw-"+O.name,quantity:0,maxQuantity:1})))||[],harm:((I=(k=(g=(fe=(z=Me().game)==null?void 0:z.codex)==null?void 0:fe.sheets)==null?void 0:g.crew)==null?void 0:k.cohorts)==null?void 0:I.harm.map(O=>({...O,id:"harm-"+O.name,quantity:0,maxQuantity:1})))||[],quality:0,scale:0},d={gang:l,expert:c,vehicle:u},h=j({...n.cohort||d[n.propertyName]});function f(O){if(!n.onCreateNew)return;let v=(n.idPrefix||"")+"-"+O;v=v.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,""),h.value.id=v}const m=j(null);function y(){var b,E,L;if(h.value.cohortType==="gang"&&((b=h.value.gangType)==null?void 0:b.reduce((B,w)=>B+(w.quantity||0),0))===0)return"You must choose a Gang Type.";if(h.value.cohortType==="expert"){if(!h.value.name)return"You must give your Expert a name.";if(!h.value.expertise1)return"You must choose an Expertise."}const O=(E=h.value.edges)==null?void 0:E.reduce((B,w)=>B+(w.quantity||0),0);if(O===0)return"You must choose at least one Edge.";const v=(L=h.value.flaws)==null?void 0:L.reduce((B,w)=>B+(w.quantity||0),0);return console.log(h.value.flaws.map(B=>B.quantity)),O>0&&v<O?`You must choose at least the same number of Flaws (${v}) as Edges (${O}).`:null}function S(){n.onCreateNew&&(m.value=y(),!m.value&&(n.onCreateNew(h.value),K.close()))}function A(){n.onEdit&&(m.value=y(),!m.value&&(n.onEdit(h.value),K.close()))}function N(){n.onDelete&&(n.onDelete(h.value.id),K.close())}return(O,v)=>{const b=Fi("Divider");return _(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,U(n.onCreateNew?"Create a new":"Edit")+" "+U(n.propertyName),1)]),_:1})]),content:W(()=>[a("div",iS,[n.propertyName==="gang"?(_(),C("div",sS,[rS,a("div",oS,[(_(!0),C(te,null,he(h.value.gangType,E=>(_(),ce(Nt,{effectable:E,key:E.id,idPrefix:n.idPrefix+"-gangType",propertyName:E.name,change:L=>{E.quantity=L}},null,8,["effectable","idPrefix","propertyName","change"]))),128))])])):Y("",!0),n.propertyName==="expert"?(_(),C("div",aS,[lS,Ne(a("input",{class:"ignore-initial-focus",type:"text",id:"name","onUpdate:modelValue":v[0]||(v[0]=E=>h.value.name=E),placeholder:"A name for your Expert",onFocus:v[1]||(v[1]=E=>i.value="name"),onBlur:v[2]||(v[2]=E=>f(h.value.name))},null,544),[[De,h.value.name]]),$(tt,{show:i.value==="name"},{default:W(()=>[cS,a("button",{class:"btn btn--icon",onMousedown:r},hS,32)]),_:1},8,["show"])])):Y("",!0),n.propertyName==="expert"?(_(),C("div",fS,[pS,Ne(a("input",{class:"ignore-initial-focus",type:"text",id:"expertise1","onUpdate:modelValue":v[3]||(v[3]=E=>h.value.expertise1=E),placeholder:"An area of expertise",onFocus:v[4]||(v[4]=E=>i.value="expertise1")},null,544),[[De,h.value.expertise1]]),$(tt,{show:i.value==="expertise1"},{default:W(()=>{var E,L,B,w;return[mS,a("div",yS,[(_(!0),C(te,null,he((w=(B=(L=(E=H(t))==null?void 0:E.sheets)==null?void 0:L.crew)==null?void 0:B.cohorts)==null?void 0:w.expertise,P=>(_(),C("button",{class:"btn btn--text",onMousedown:re=>h.value.expertise1=P},U(P),41,gS))),256))])]}),_:1},8,["show"])])):Y("",!0),n.propertyName==="expert"?(_(),C("div",_S,[vS,Ne(a("input",{class:"ignore-initial-focus",type:"text",id:"expertise2","onUpdate:modelValue":v[5]||(v[5]=E=>h.value.expertise2=E),placeholder:"An additional area of expertise",onFocus:v[6]||(v[6]=E=>i.value="expertise2")},null,544),[[De,h.value.expertise2]]),$(tt,{show:i.value==="expertise2"},{default:W(()=>{var E,L,B,w;return[bS,a("div",wS,[(_(!0),C(te,null,he((w=(B=(L=(E=H(t))==null?void 0:E.sheets)==null?void 0:L.crew)==null?void 0:B.cohorts)==null?void 0:w.expertise,P=>(_(),C("button",{class:"btn btn--text",onMousedown:re=>h.value.expertise2=P},U(P),41,kS))),256))])]}),_:1},8,["show"])])):Y("",!0),n.propertyName==="vehicle"?(_(),C("div",xS,[CS,Ne(a("input",{class:"ignore-initial-focus",type:"text",id:"name","onUpdate:modelValue":v[7]||(v[7]=E=>h.value.name=E),placeholder:"A name for your Vehicle",onFocus:v[8]||(v[8]=E=>i.value="name"),onBlur:v[9]||(v[9]=E=>f(h.value.name))},null,544),[[De,h.value.name]])])):Y("",!0),$(b),a("label",null,[se("Effectiveness "),a("label",SS,"Quality "+U(h.value.quality)+", "+U(o.value),1)]),a("div",ES,[a("div",AS,[$(ds,{id:"cohort-quality",label:"Quality",class:"mobile-full-width center",value:h.value.quality,min:0,max:10,onChange:v[10]||(v[10]=E=>h.value.quality=E)},null,8,["value"]),n.propertyName==="expert"?(_(),ce(Vt,{key:0},{default:W(()=>[a("p",{innerHTML:H(ot)("An Expert's quality is equal to your current *Tier* +1 and increases with your *Tier*.")},null,8,TS)]),_:1})):Y("",!0),n.propertyName==="gang"?(_(),ce(Vt,{key:1},{default:W(()=>[a("p",{innerHTML:H(ot)("A Gang's quality is equal to your current *Tier* and increases with your *Tier*.")},null,8,$S)]),_:1})):Y("",!0),n.propertyName==="vehicle"?(_(),ce(Vt,{key:2},{default:W(()=>[a("p",{innerHTML:H(ot)("A Vehicle's quality is equal to your current *Tier* +1 and increases with your *Tier*.")},null,8,qS)]),_:1})):Y("",!0)]),n.propertyName==="gang"?(_(),C("div",OS,[a("div",IS,[$(ds,{id:"cohort-scale",class:"mobile-full-width center",value:h.value.scale,min:0,max:10,onChange:v[11]||(v[11]=E=>h.value.scale=E),label:"Scale"},null,8,["value"])]),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)("A Gang's *Scale* is equal to your current *Tier* and increases with your *Tier*.")},null,8,PS)]),_:1})])):Y("",!0)]),$(b),a("div",RS,[NS,a("div",DS,[(_(!0),C(te,null,he(h.value.edges,E=>(_(),ce(Nt,{effectable:E,key:E.id,idPrefix:n.idPrefix+"-edge",propertyName:E.name,change:L=>{E.quantity=L}},null,8,["effectable","idPrefix","propertyName","change"]))),128))])]),a("div",LS,[a("label",US,[se("Flaws "),a("label",MS,"(Choose at least "+U(H(E1)(Math.max(h.value.edges.filter(E=>E.quantity>0).length,1)))+") ",1)]),a("div",BS,[(_(!0),C(te,null,he(h.value.flaws,E=>(_(),ce(Nt,{effectable:E,key:E.id,idPrefix:n.idPrefix+"-flaw",propertyName:E.name,change:L=>{E.quantity=L}},null,8,["effectable","idPrefix","propertyName","change"]))),128))])]),a("div",FS,[QS,a("div",HS,[(_(!0),C(te,null,he(h.value.harm,E=>(_(),ce(Nt,{effectable:E,key:E.id,idPrefix:n.idPrefix+"-harm",propertyName:E.name,change:L=>{h.value.harm.forEach(B=>{B.quantity=0}),E.quantity=L}},null,8,["effectable","idPrefix","propertyName","change"]))),128))])]),a("div",jS,[a("label",VS,[se("Description "),a("label",WS,"("+U(h.value.description.length)+" / 400) ",1)]),Ne(a("textarea",{id:"description","onUpdate:modelValue":v[12]||(v[12]=E=>h.value.description=E),placeholder:"A brief description"},null,512),[[De,h.value.description]])]),m.value?(_(),C("div",GS,[YS,a("span",null,U(m.value),1),a("button",{class:"btn btn--icon close",onClick:v[13]||(v[13]=E=>m.value="")},KS)])):Y("",!0),n.onCreateNew?(_(),C("section",JS,[a("button",{class:"btn btn--alt mobile-full-width",onClick:v[14]||(v[14]=E=>H(K).close())},ZS),a("button",{class:"btn mobile-full-width",onClick:S},tE)])):(_(),C("section",nE,[a("button",{class:"btn btn--alt mobile-full-width",onClick:N},rE),a("button",{class:"btn mobile-full-width",onClick:A},aE)]))])]),_:1})}}}),Zs=de(lE,[["__scopeId","data-v-550bdc37"]]),ol=e=>($e("data-v-c545f8d7"),e=e(),qe(),e),cE={class:"header"},uE={key:0},dE={key:1},hE={key:0,class:"harm"},fE={key:2},pE={key:0,class:"harm"},mE=ol(()=>a("i",{class:"fas fa-edit"},null,-1)),yE=[mE],gE={key:0,class:"harm"},_E={class:"edges-and-flaws"},vE=ol(()=>a("i",{class:"fas fa-angle-up"},null,-1)),bE=ol(()=>a("i",{class:"fas fa-angle-down"},null,-1)),wE=ue({__name:"CohortTile",props:{cohort:{},idPrefix:{},onEdit:{type:Function},onDelete:{type:Function}},setup(e){var h;const t=(h=Me().game)==null?void 0:h.codex,n=e,i=X(()=>{var f;return(f=n.cohort.gangType)==null?void 0:f.filter(m=>m.quantity>0)}),s=X(()=>{const f=[...t.lexicon.gangs];try{return f[n.cohort.scale]}catch{return"0-2 people"}}),r=X(()=>[n.cohort.expertise1].concat(n.cohort.expertise2?[n.cohort.expertise2]:[])),o=X(()=>{var f;return((f=n.cohort.harm.filter(m=>m.quantity>0)[0])==null?void 0:f.name)||""}),l=X(()=>{var f;return((f=n.cohort.edges)==null?void 0:f.filter(m=>m.quantity>0).map(m=>m.name))||[]}),c=X(()=>{var f;return((f=n.cohort.flaws)==null?void 0:f.filter(m=>m.quantity>0).map(m=>m.name))||[]});function u(f){n.onEdit&&n.onEdit(f)}function d(f){n.onDelete&&n.onDelete(f)}return(f,m)=>{var y,S;return _(),C("div",{class:Z(["cohort-tile",{harmed:o.value}])},[a("div",cE,[n.cohort.cohortType==="gang"?(_(),C("div",uE,[a("h3",null,[a("span",null,U(s.value),1)]),a("h1",null,U((y=i.value)==null?void 0:y.map(A=>A.name).join(" & ")),1),a("h2",null,U((S=n.cohort.gangType)==null?void 0:S.filter(A=>A.quantity>0)[0].description),1)])):n.cohort.cohortType==="expert"?(_(),C("div",dE,[a("h3",null,[o.value?(_(),C("span",hE,U(o.value)+"!",1)):Y("",!0),se(" Expert ")]),a("h1",null,U(n.cohort.name),1),a("h2",null,U(r.value.join(" & ")),1)])):n.cohort.cohortType==="vehicle"?(_(),C("div",fE,[a("h3",null,[o.value?(_(),C("span",pE,U(o.value)+"!",1)):Y("",!0),se(" Vehicle ")]),a("h1",null,U(n.cohort.name),1)])):Y("",!0),n.onEdit?(_(),C("button",{key:3,class:"btn btn--icon",onClick:m[0]||(m[0]=A=>H(K).open(Zs,{propertyName:n.cohort.cohortType,cohort:n.cohort,idPrefix:n.idPrefix,onDelete:d,onEdit:u}))},yE)):Y("",!0)]),o.value?(_(),C("span",gE,U(o.value)+"!",1)):Y("",!0),a("div",_E,[a("ul",null,[(_(!0),C(te,null,he(l.value,A=>(_(),C("li",{key:A},[vE,a("span",null,U(A),1)]))),128))]),a("ul",null,[(_(!0),C(te,null,he(c.value,A=>(_(),C("li",{key:A},[bE,a("span",null,U(A),1)]))),128))])]),a("p",null,U(n.cohort.description),1)],2)}}}),kE=de(wE,[["__scopeId","data-v-c545f8d7"]]),al=e=>($e("data-v-810f9f37"),e=e(),qe(),e),xE={class:"edit"},CE={class:"input-group"},SE=al(()=>a("label",{for:"name"},"Name",-1)),EE={class:"input-group disabled"},AE=al(()=>a("label",{for:"id"},[se("ID "),a("label",{class:"muted"},"(permanent)")],-1)),TE={class:"input-group stretch"},$E={for:"description"},qE={class:"muted"},OE=al(()=>a("span",null,"Save",-1)),IE=[OE],PE=ue({__name:"EditClaimModal",props:{propertyName:{},claim:{},onEdit:{type:Function},idPrefix:{}},setup(e){const t=e,n=j({...t.claim});function i(){t.onEdit&&(t.onEdit(n.value),K.close())}return(s,r)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,"Edit "+U(n.value.name),1)]),_:1})]),content:W(()=>[a("div",xE,[a("div",CE,[SE,Ne(a("input",{type:"text",id:"name","onUpdate:modelValue":r[0]||(r[0]=o=>n.value.name=o),placeholder:"Enter a memorable name"},null,512),[[De,n.value.name]])]),a("div",EE,[AE,Ne(a("input",{type:"text",id:"id","onUpdate:modelValue":r[1]||(r[1]=o=>n.value.id=o),placeholder:"A hyphenated identifier"},null,512),[[De,n.value.id]])]),a("div",TE,[a("label",$E,[se("Description "),a("label",qE,"("+U(n.value.description.length)+" / 400) ",1)]),Ne(a("textarea",{id:"description","onUpdate:modelValue":r[2]||(r[2]=o=>n.value.description=o),placeholder:"A brief description"},null,512),[[De,n.value.description]])]),a("div",{class:"row"},[a("button",{class:"btn mobile-full-width",onClick:i},IE)])])]),_:1}))}}),RE=de(PE,[["__scopeId","data-v-810f9f37"]]),Nh=e=>($e("data-v-da34d4d5"),e=e(),qe(),e),NE=Nh(()=>a("h2",null,"Edit Claims",-1)),DE={class:"edit-claims"},LE=Nh(()=>a("p",null,"Select a claim below.",-1)),UE=["onClick"],ME=ue({__name:"EditClaimsModal",props:{sheetId:{},claims:{}},setup(e){const t=e;function n(i){const s=t.claims.findIndex(r=>r.id===i.id);ke([{op:"replace",path:`/data/sheets/${t.sheetId}/claims/${s}`,value:i}])}return(i,s)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{"close-button":""},{default:W(()=>[NE]),_:1})]),content:W(()=>[a("div",DE,[LE,a("ul",null,[(_(!0),C(te,null,he(t.claims,r=>(_(),C("li",{key:r.id},[a("button",{class:"btn btn--text",onClick:o=>H(K).open(RE,{claim:r,onEdit:n})},[a("span",null,U(r.name),1)],8,UE)]))),128))])])]),_:1}))}}),BE=de(ME,[["__scopeId","data-v-da34d4d5"]]),me=e=>($e("data-v-a707a5a8"),e=e(),qe(),e),FE={class:"sheet-layout__nested"},QE=["src"],HE={class:"input-group crew-tier"},jE={class:"input-group name-and-description"},VE=me(()=>a("label",{for:"crew-name"},"Name",-1)),WE=["value","placeholder","disabled"],GE=me(()=>a("p",null,"Choose a name for your crew.",-1)),YE=["value","disabled"],zE=me(()=>a("p",null,"Describe your crew in a few sentences.",-1)),KE={class:"input-group"},JE=me(()=>a("label",{for:"reputation-type"},"Reputation",-1)),XE=["value","disabled"],ZE=me(()=>a("p",null,"Choose how other underworld factions see you.",-1)),eA={class:"text-list"},tA=["onMousedown"],nA={key:1,class:"input-group"},iA={class:"input-group"},sA=me(()=>a("label",{for:"deity-name"},"Deity",-1)),rA={class:"row flat"},oA=["value","disabled"],aA=me(()=>a("i",{class:"fas fa-random"},null,-1)),lA=[aA],cA={class:"input-group"},uA=["value","disabled"],dA=me(()=>a("p",null,"Choose two features from the list to describe your deity.",-1)),hA={class:"text-list"},fA=["onMousedown"],pA={class:"input-group"},mA=me(()=>a("label",{for:"crew-lair"},"Lair",-1)),yA={class:"row flat"},gA=["value","disabled"],_A=me(()=>a("i",{class:"fas fa-random"},null,-1)),vA=[_A],bA={class:"input-group"},wA=["value","disabled"],kA=me(()=>a("p",null,"Where is your lair located?",-1)),xA={class:"text-list"},CA=["onMousedown"],SA={class:"row"},EA={key:2,class:"tile-list tile-list--mini"},AA={key:3,class:"no-tiles"},TA={class:"input-block"},$A={class:"input-group crew-rep"},qA=me(()=>a("label",{for:"crew-rep"},"Rep",-1)),OA={class:"input-block turf-and-hold"},IA={class:"input-group"},PA=me(()=>a("label",{for:"crew-hold"},"Hold",-1)),RA={class:"row flat"},NA=["innerHTML"],DA=["innerHTML"],LA=["innerHTML"],UA=["innerHTML"],MA={class:"input-block heat-and-wanted-level"},BA={class:"input-group"},FA=me(()=>a("label",{for:"crew-heat"},"Heat & Wanted Level",-1)),QA=["innerHTML"],HA={class:"input-group coin-group"},jA={for:"crew-coin"},VA={class:"muted"},WA=["innerHTML"],GA=me(()=>a("label",{for:"claims"},"Claims",-1)),YA={class:"row"},zA=me(()=>a("span",null,"Edit Claims",-1)),KA=[zA],JA={class:"claims-list"},XA={class:"crew-xp-section"},ZA={class:"input-group crew-xp"},eT=me(()=>a("label",{for:"crew-xp"},"Crew XP",-1)),tT=["innerHTML"],nT=["innerHTML"],iT=["innerHTML"],sT=me(()=>a("label",{for:"crew-abilities"},"Special Abilities",-1)),rT={class:"row"},oT=me(()=>a("span",null,"New",-1)),aT=[oT],lT={key:0,class:"tile-list"},cT={key:1,class:"no-tiles"},uT=me(()=>a("em",null,"❖ No Special Abilities selected",-1)),dT=[uT],hT=me(()=>a("label",{for:"crew-upgrades"},"Crew Upgrades",-1)),fT={class:"row"},pT=me(()=>a("span",null,"New",-1)),mT=[pT],yT={key:0,class:"tile-list"},gT={key:1,class:"no-tiles"},_T=me(()=>a("em",null,"❖ No crew upgrades selected",-1)),vT=[_T],bT=me(()=>a("label",{for:"crew-lair-upgrades"},"Lair Upgrades",-1)),wT={class:"row"},kT=me(()=>a("span",null,"New",-1)),xT=[kT],CT={key:0,class:"tile-list"},ST={key:1,class:"no-tiles"},ET=me(()=>a("em",null,"❖ No lair upgrades selected",-1)),AT=[ET],TT=me(()=>a("label",{for:"crew-training-upgrades"},"Training Upgrades",-1)),$T={class:"row"},qT=me(()=>a("span",null,"New",-1)),OT=[qT],IT={key:0,class:"tile-list"},PT={key:1,class:"no-tiles"},RT=me(()=>a("em",null,"❖ No training upgrades selected",-1)),NT=[RT],DT=me(()=>a("label",{for:"crew-quality-upgrades"},"Quality Upgrades",-1)),LT={class:"row"},UT=me(()=>a("span",null,"New",-1)),MT=[UT],BT={key:0,class:"tile-list"},FT={key:1,class:"no-tiles"},QT=me(()=>a("em",null,"❖ No quality upgrades selected",-1)),HT=[QT],jT=me(()=>a("label",{for:"contacts"},"Crew Contacts",-1)),VT={class:"row"},WT=me(()=>a("span",null,"New",-1)),GT=[WT],YT={key:0,class:"tile-list tile-list--mini"},zT={key:1,class:"no-tiles"},KT=me(()=>a("em",null,"❖ No Crew Contacts selected",-1)),JT=[KT],XT=me(()=>a("label",{for:"cohorts"},"Cohorts",-1)),ZT={class:"row"},e$=me(()=>a("i",{class:"fas fa-plus-circle"},null,-1)),t$=me(()=>a("span",null,"Gang",-1)),n$=[e$,t$],i$=me(()=>a("i",{class:"fas fa-plus-circle"},null,-1)),s$=me(()=>a("span",null,"Expert",-1)),r$=[i$,s$],o$=me(()=>a("i",{class:"fas fa-plus-circle"},null,-1)),a$=me(()=>a("span",null,"Vehicle",-1)),l$=[o$,a$],c$={key:0,class:"tile-list"},u$={key:1,class:"no-tiles"},d$=me(()=>a("em",null,"❖ Your crew hasn't recruited any cohorts",-1)),h$=[d$],f$={class:"row center mobile-nav"},p$=me(()=>a("i",{class:"fas fa-file-alt"},null,-1)),m$=me(()=>a("i",{class:"fas fa-file-alt"},null,-1)),y$=me(()=>a("i",{class:"fas fa-file-alt"},null,-1)),rt=99,g$=ue({__name:"TheCrewSheet",props:{sheet:{}},setup(e){var O;const t=(O=Me().game)==null?void 0:O.codex;pn(()=>{document.addEventListener("blur",o,!0)}),mi(()=>{document.removeEventListener("blur",o,!0)});const n=e,i=j(0),s=j(null),r=j();function o(v){var b;(b=v.relatedTarget)!=null&&b.closest(".shelf")||(r.value=null)}function l(v,b){console.log("onChangeValue",v,b);const E=`/data/sheets/${n.sheet.id}/${b}`;ke([{op:"replace",path:E,value:v}])}const c=X(()=>{const v=I("vault");return console.log("vault:",v),v===1?8:v===2?16:4}),u=X(()=>{const v=I("vault");return v===1?"& one Vault":v===2?"& two Vaults":""});function d(v){const b=Math.round(v.scrollLeft/v.clientWidth);i.value=b}function h(v){s.value&&(s.value.scrollTo({top:0}),s.value.scrollTo({left:s.value.clientWidth*v,behavior:"smooth"}))}function f(){const v=t.sheets.crew.lairs,{name:b,districts:E}=un(v),L=un(E);l(b,"lair"),l(L,"lairDistrict")}function m(){const v=t.names.deityNames,b=un(v);l(b,"deityName")}const y=j(localStorage.getItem("showOnlySelectedCrewUpgrades")==="true"),S=X(()=>y.value?n.sheet.crewUpgrades.filter(v=>v.quantity>0):n.sheet.crewUpgrades),A=j(localStorage.getItem("showOnlySelectedLairUpgrades")==="true"),N=X(()=>A.value?n.sheet.lairUpgrades.filter(v=>v.quantity>0):n.sheet.lairUpgrades),F=j(localStorage.getItem("showOnlySelectedTrainingUpgrades")==="true"),J=X(()=>F.value?n.sheet.trainingUpgrades.filter(v=>v.quantity>0):n.sheet.trainingUpgrades),oe=j(localStorage.getItem("showOnlySelectedQualityUpgrades")==="true"),ee=X(()=>oe.value?n.sheet.qualityUpgrades.filter(v=>v.quantity>0):n.sheet.qualityUpgrades);function ie(v,b){const E=n.sheet.crewUpgrades.findIndex(L=>L.id===v.id);ke([{op:"replace",path:`/data/sheets/${n.sheet.id}/${b}Upgrades/${E}`,value:v}])}function be(v,b){const E=n.sheet.crewUpgrades.findIndex(L=>L.id===v);ke([{op:"remove",path:`/data/sheets/${n.sheet.id}/${b}Upgrades/${E}`}])}function ae(v,b,E){const L=n.sheet[`${E}Upgrades`].findIndex(w=>w.id===v.id);if(L===-1)return console.error("Upgrade not found",v);const B=`/data/sheets/${n.sheet.id}/${E}Upgrades/${L}/quantity`;ke([{op:"replace",path:B,value:b}])}function ne(v,b){ke([{op:"add",path:`/data/sheets/${n.sheet.id}/${b}Upgrades/-`,value:v}])}const Re=j(localStorage.getItem("showOnlySelectedContacts")==="true"),He=X(()=>Re.value?n.sheet.contacts.filter(v=>v.attitude!==0):n.sheet.contacts);function Ze(v){const b=n.sheet.contacts.findIndex(E=>E.id===v.id);ke([{op:"replace",path:`/data/sheets/${n.sheet.id}/contacts/${b}`,value:v}])}function st(v){const b=n.sheet.contacts.findIndex(E=>E.id===v);ke([{op:"remove",path:`/data/sheets/${n.sheet.id}/contacts/${b}`}])}function Et(v,b){const E=n.sheet.contacts.findIndex(B=>B.id===v.id),L=`/data/sheets/${n.sheet.id}/contacts/${E}/attitude`;ke([{op:"replace",path:L,value:b}])}function Ye(v){ke([{op:"add",path:`/data/sheets/${n.sheet.id}/contacts/-`,value:v}])}const _e=j(localStorage.getItem("showOnlySelectedAbilities")==="true"),Ce=X(()=>_e.value?n.sheet.specialAbilities.filter(v=>v.quantity>0):n.sheet.specialAbilities);function Se(v,b){const E=n.sheet.specialAbilities.findIndex(B=>B.id===v.id),L=`/data/sheets/${n.sheet.id}/specialAbilities/${E}/quantity`;ke([{op:"replace",path:L,value:b}])}function bt(v){const b=n.sheet.specialAbilities.findIndex(E=>E.id===v.id);ke([{op:"replace",path:`/data/sheets/${n.sheet.id}/specialAbilities/${b}`,value:v}])}function dt(v){const b=n.sheet.specialAbilities.findIndex(E=>E.id===v);ke([{op:"remove",path:`/data/sheets/${n.sheet.id}/specialAbilities/${b}`}])}function Ke(v){ke([{op:"add",path:`/data/sheets/${n.sheet.id}/specialAbilities/-`,value:v}])}function Je(v,b){return v.position.x!==b.position.x?v.position.x-b.position.x:b.position.y-v.position.y}const mt=j(!0),At=X(()=>n.sheet.claims.sort(Je));function R(v){const b={},E={[bn.NORTH]:{x:0,y:-1},[bn.EAST]:{x:1,y:0},[bn.SOUTH]:{x:0,y:1},[bn.WEST]:{x:-1,y:0}};return v.adjacent.forEach(L=>{const B=E[L],w={x:v.position.x+B.x,y:v.position.y+B.y},P=n.sheet.claims.find(re=>re.position.x===w.x&&re.position.y===w.y);P&&(b[L]=P)}),b}function q(v,b){const E=n.sheet.claims.findIndex(B=>B.id===v.id),L=`/data/sheets/${n.sheet.id}/claims/${E}/quantity`;ke([{op:"replace",path:L,value:b}])}const T=j(localStorage.getItem("showOnlySelectedHuntingGrounds")==="true"),G=X(()=>T.value?n.sheet.huntingGrounds.filter(v=>v.quantity>0):n.sheet.huntingGrounds);function V(v,b){const E=n.sheet.huntingGrounds.findIndex(B=>B.id===v.id),L=`/data/sheets/${n.sheet.id}/huntingGrounds/${E}/quantity`;ke([{op:"replace",path:L,value:b}])}function x(v){const b=n.sheet.huntingGrounds.findIndex(E=>E.id===v.id);ke([{op:"replace",path:`/data/sheets/${n.sheet.id}/huntingGrounds/${b}`,value:v}])}const z=X(()=>n.sheet.cohorts);function fe(v){const b=n.sheet.cohorts.findIndex(E=>E.id===v);ke([{op:"remove",path:`/data/sheets/${n.sheet.id}/cohorts/${b}`}])}function g(v){ke([{op:"add",path:`/data/sheets/${n.sheet.id}/cohorts/-`,value:v}])}function k(v){const b=n.sheet.cohorts.findIndex(E=>E.id===v.id);ke([{op:"replace",path:`/data/sheets/${n.sheet.id}/cohorts/${b}`,value:v}])}function I(v){const{sheet:b}=n,L=[...b.crewUpgrades,...b.lairUpgrades,...b.trainingUpgrades,...b.qualityUpgrades,...b.specialAbilities,...b.claims,...b.huntingGrounds].find(B=>B.id===v);return L?L.quantity:-1}return Ut([T,_e,Re,y,A,F,oe],()=>{localStorage.setItem("showOnlySelectedHuntingGrounds",T.value.toString()),localStorage.setItem("showOnlySelectedAbilities",_e.value.toString()),localStorage.setItem("showOnlySelectedContacts",Re.value.toString()),localStorage.setItem("showOnlySelectedCrewUpgrades",y.value.toString()),localStorage.setItem("showOnlySelectedLairUpgrades",A.value.toString()),localStorage.setItem("showOnlySelectedTrainingUpgrades",F.value.toString()),localStorage.setItem("showOnlySelectedQualityUpgrades",oe.value.toString())}),(v,b)=>{var L,B;const E=Fi("Divider");return _(),C("div",FE,[a("div",{class:"crew-layout",ref_key:"carouselRef",ref:s,onScroll:b[41]||(b[41]=w=>d(w.target))},[a("div",{class:Z(["main-and-claims",{active:i.value==0}])},[a("section",null,[a("div",{class:"crew-type-card",style:Jt({backgroundColor:(L=H(Li)(v.sheet.image))==null?void 0:L.commonColor})},[a("img",{src:(B=H(Li)(v.sheet.image))==null?void 0:B.url},null,8,QE),a("h1",{class:Z({"extra-long":v.sheet.name.length>20})},U(v.sheet.name),3),a("h2",null,U(v.sheet.crewTypeDescription),1),a("div",HE,[$(ds,{id:"crew-tier",label:"Tier",value:n.sheet.tier,min:0,max:5,onChange:b[0]||(b[0]=w=>l(w,"tier"))},null,8,["value"])])],4),a("div",jE,[VE,a("input",{id:"crew-name",type:"text",value:n.sheet.name,onFocus:b[1]||(b[1]=w=>r.value="name"),placeholder:"Untitled "+v.sheet.crewType,onChange:b[2]||(b[2]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"name")}),class:Z({locked:rt<1}),disabled:rt<1},null,42,WE),$(tt,{show:r.value=="name"},{default:W(()=>[GE]),_:1},8,["show"]),a("textarea",{id:"crew-description",value:n.sheet.description,onFocus:b[3]||(b[3]=w=>r.value="description"),placeholder:"A group of scoundrels scraping by in the underworld",onChange:b[4]||(b[4]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"description")}),class:Z({locked:rt<1}),disabled:rt<1},`\r
            `,42,YE),$(tt,{show:r.value=="description"},{default:W(()=>[zE]),_:1},8,["show"])]),a("div",KE,[JE,a("input",{id:"reputation-type",type:"text",value:n.sheet.reputationType,onFocus:b[5]||(b[5]=w=>r.value="reputation-type"),placeholder:"Ambitious",onChange:b[6]||(b[6]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"reputationType")}),class:Z({locked:rt<1}),disabled:rt<1},null,42,XE),$(tt,{show:r.value=="reputation-type"},{default:W(()=>[ZE,a("div",eA,[(_(!0),C(te,null,he(H(t).sheets.crew.reputations,w=>(_(),C("button",{class:"btn btn--text",onMousedown:P=>l(w,"reputationType")},U(w),41,tA))),256))])]),_:1},8,["show"])]),n.sheet.crewType==="Cult"?(_(),ce(E,{key:0})):Y("",!0),n.sheet.crewType==="Cult"?(_(),C("div",nA,[a("div",iA,[sA,a("div",rA,[a("input",{id:"deity-name",type:"text",value:n.sheet.deityName,placeholder:"By what name do you know your deity?",onFocus:b[7]||(b[7]=w=>r.value="deity-name"),onChange:b[8]||(b[8]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"deityName")}),class:Z({locked:rt<1}),disabled:rt<1},null,42,oA),a("button",{class:Z(["btn btn--icon",{removed:rt<1}]),onClick:m},lA,2)])]),a("div",cA,[a("input",{id:"deity-features",type:"text",onFocus:b[9]||(b[9]=w=>r.value="deity-features"),onChange:b[10]||(b[10]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"deityFeatures")}),placeholder:"Describe your deity in a few words",value:n.sheet.deityFeatures,class:Z({locked:rt<1}),disabled:rt<1},null,42,uA),$(tt,{show:r.value=="deity-features"},{default:W(()=>[dA,a("div",hA,[(_(),C(te,null,he(["Alluring","Cruel","Ferocious","Monstrous","Radiant","Sinister","Serene","Transcendent"],w=>a("button",{class:"btn btn--text",key:w,onMousedown:P=>l(v.sheet.deityFeatures.length?v.sheet.deityFeatures+", "+w.toLowerCase():w,"deityFeatures")},U(w),41,fA)),64))])]),_:1},8,["show"])])])):Y("",!0),$(E),a("div",pA,[mA,a("div",yA,[a("input",{id:"crew-lair",type:"text",value:n.sheet.lair,placeholder:"Where your crew hatches its schemes",onFocus:b[11]||(b[11]=w=>r.value="lair"),onChange:b[12]||(b[12]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"lair")}),class:Z({locked:rt<1}),disabled:rt<1},null,42,gA),a("button",{class:Z(["btn btn--icon",{removed:rt<1}]),onClick:f},vA,2)]),a("div",bA,[a("input",{id:"crew-lair-district",type:"text",value:n.sheet.lairDistrict,placeholder:"Where do you call home?",onFocus:b[13]||(b[13]=w=>r.value="lair-district"),onChange:b[14]||(b[14]=w=>{var P;return l((P=w.target)==null?void 0:P.value,"lairDistrict")}),class:Z({locked:rt<1}),disabled:rt<1},null,42,wA),$(tt,{show:r.value=="lair-district"},{default:W(()=>[kA,a("div",xA,[(_(!0),C(te,null,he(H(t).lexicon.districts.map(w=>w.name),w=>(_(),C("button",{class:"btn btn--text",key:w,onMousedown:P=>l(w,"lairDistrict")},U(w),41,CA))),128))])]),_:1},8,["show"])])]),$(E),a("label",null,U(v.sheet.huntingGroundsLabel),1),a("div",SA,[$(at,{icon:"fa-low-vision",modelValue:T.value,"onUpdate:modelValue":b[15]||(b[15]=w=>T.value=w),label:"Show only selected"},null,8,["modelValue"])]),G.value.length>0?(_(),C("div",EA,[(_(!0),C(te,null,he(G.value,w=>(_(),ce(Nt,{effectable:w,key:w.id,idPrefix:n.sheet.crewType,propertyName:v.sheet.huntingGroundsLabel,change:P=>V(w,P),onEdit:x,onDelete:()=>{}},null,8,["effectable","idPrefix","propertyName","change"]))),128))])):Y("",!0),G.value.length==0?(_(),C("p",AA,[a("em",null,"❖ No "+U(v.sheet.huntingGroundsLabel)+" selected",1)])):Y("",!0)]),$(E),a("section",null,[a("div",TA,[a("div",$A,[qA,$(vn,{id:"crew-rep",value:n.sheet.reputation,locked:n.sheet.turf,max:12,onChange:b[16]||(b[16]=w=>l(w,"reputation"))},null,8,["value","locked"])])]),a("div",OA,[a("div",IA,[$(ds,{id:"crew-turf",value:n.sheet.turf,min:0,max:5,label:"Turf",onChange:b[17]||(b[17]=w=>l(w,"turf"))},null,8,["value"])]),a("div",{class:Z(["input-group",{locked:rt<1}])},[PA,a("div",RA,[a("button",{class:Z(["btn btn--tab",{active:n.sheet.hold=="weak"}]),onClick:b[18]||(b[18]=w=>l("weak","hold"))}," Weak ",2),a("button",{class:Z(["btn btn--tab",{active:n.sheet.hold=="strong"}]),onClick:b[19]||(b[19]=w=>l("strong","hold"))}," Strong ",2)])],2)]),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)(`Completing a score earns your Crew [/rep +2 Rep]

Take [/rep +1 Rep] per *Tier* higher than your target, or [/rep -1 Rep] per *Tier* lower`)},null,8,NA)]),_:1}),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)("With a full tracker, the Crew can't earn more *Rep* until you do one of the following, then reset the tracker")},null,8,DA),a("ul",null,[a("li",{innerHTML:H(ot)(`If your *Hold* is Strong, increase your *Tier* by paying [/coin Coin] equal to 8x your new *Tier*
Reduce your *Hold* to Weak`)},null,8,LA),a("li",{innerHTML:H(ot)("If your *Hold* is Weak, increase it to Strong")},null,8,UA)])]),_:1})]),$(E),a("section",null,[a("div",MA,[a("div",BA,[FA,$(vn,{id:"crew-heat",value:n.sheet.heat,max:9,onChange:b[20]||(b[20]=w=>l(w,"heat"))},null,8,["value"])]),$(ds,{id:"crew-wanted-level",value:n.sheet.wantedLevel,min:0,max:5,onChange:b[21]||(b[21]=w=>l(w,"wantedLevel"))},null,8,["value"])]),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)(`When the tracker is full, increase the *Wanted Level* and clear all your *Heat*

The only way to reduce your *Wanted Level* is through *Incarceration*. When one of the PCs, friends, contacts—or a framed enemy—is convicted and incarcerated for crimes associated with your Crew, clear your *Heat* and reduce your *Wanted Level* by 1`)},null,8,QA)]),_:1}),$(E),a("div",HA,[a("label",jA,[se("Treasury "),a("label",VA,U(u.value),1)]),$(vn,{id:"crew-coin",value:n.sheet.coin,max:16,locked:16-c.value,coinMode:!0,onChange:b[22]||(b[22]=w=>l(w,"coin"))},null,8,["value","locked"]),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)(`Most *Districts* have crime bosses that expect smaller crews to pay a tithe from their scores

Is there a boss that you should be paying? Subtract [/coin Coin] equal to your *Tier* +1 when you pay a tithe`)},null,8,WA)]),_:1})])]),$(E),a("section",null,[GA,a("div",YA,[a("button",{class:Z(["btn",{removed:rt<1}]),onClick:b[23]||(b[23]=w=>H(K).open(BE,{sheetId:n.sheet.id,claims:n.sheet.claims}))},KA,2),$(at,{icon:"fa-low-vision",modelValue:mt.value,"onUpdate:modelValue":b[24]||(b[24]=w=>mt.value=w),label:"Show details"},null,8,["modelValue"])]),a("div",JA,[(_(!0),C(te,null,he(At.value,w=>(_(),ce(jC,{key:w.id,claim:w,showDetails:mt.value,idPrefix:n.sheet.crewType,propertyName:"Claim",neighborClaims:R(w),change:P=>q(w,P),class:Z({locked:rt<1})},null,8,["claim","showDetails","idPrefix","neighborClaims","change","class"]))),128))])])],2),a("div",{class:Z(["abilities-xp-and-contacts",{active:i.value==1}])},[a("section",XA,[a("div",ZA,[eT,$(vn,{id:"crew-xp",value:n.sheet.crewExperience,max:9,onChange:b[25]||(b[25]=w=>l(w,"crewExperience"))},null,8,["value"])]),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)(`For each item below, mark [/xp 1 XP]
If it occurred more than once, mark [/xp 2 XP]`)},null,8,tT),a("ul",null,[(_(!0),C(te,null,he([...v.sheet.crewExperienceLabels,...v.sheet.crewDefaultExperienceLabels||[]],w=>(_(),C("li",{innerHTML:H(ot)(w)},null,8,nT))),256))])]),_:1}),$(Vt,null,{default:W(()=>[a("p",{innerHTML:H(ot)(`When the tracker is full, choose one *Special Ability* or two *Upgrades* and clear the *XP*

Every time the crew advances, each PC gets [/coin +1 Stash] and an additional [/coin +2 Stash] for each *Tier*`)},null,8,iT)]),_:1})]),$(E),a("section",null,[sT,a("div",rT,[a("button",{class:"btn",onClick:b[26]||(b[26]=w=>H(K).open(ii,{propertyName:"Special Ability",idPrefix:v.sheet.crewType,onCreateNew:Ke}))},aT),$(at,{icon:"fa-low-vision",modelValue:_e.value,"onUpdate:modelValue":b[27]||(b[27]=w=>_e.value=w),label:"Show only selected"},null,8,["modelValue"])]),Ce.value.length>0?(_(),C("div",lT,[(_(!0),C(te,null,he(Ce.value,w=>(_(),ce(Nt,{key:w.id,effectable:w,idPrefix:n.sheet.crewType,propertyName:"Special Ability",change:P=>Se(w,P),onEdit:bt,onDelete:dt},null,8,["effectable","idPrefix","change"]))),128))])):Y("",!0),Ce.value.length==0?(_(),C("p",cT,dT)):Y("",!0)]),$(E),a("section",null,[hT,a("div",fT,[a("button",{class:"btn",onClick:b[28]||(b[28]=w=>H(K).open(ii,{propertyName:"Upgrade",idPrefix:v.sheet.crewType+"-upgrade",onCreateNew:P=>ne(P,"crew")}))},mT),$(at,{icon:"fa-low-vision",modelValue:y.value,"onUpdate:modelValue":b[29]||(b[29]=w=>y.value=w),label:"Show only selected"},null,8,["modelValue"])]),S.value.length>0?(_(),C("div",yT,[(_(!0),C(te,null,he(S.value,w=>(_(),ce(Nt,{key:w.id,effectable:w,idPrefix:n.sheet.crewType+"-upgrade",propertyName:"Upgrade",change:P=>{ae(w,P,"crew")},onEdit:P=>{ie(P,"crew")},onDelete:P=>be(P,"crew")},null,8,["effectable","idPrefix","change","onEdit","onDelete"]))),128))])):Y("",!0),S.value.length==0?(_(),C("p",gT,vT)):Y("",!0)]),$(E),a("section",null,[bT,a("div",wT,[a("button",{class:"btn",onClick:b[30]||(b[30]=w=>H(K).open(ii,{propertyName:"Upgrade",idPrefix:v.sheet.crewType+"-lair-upgrade",onCreateNew:P=>ne(P,"lair")}))},xT),$(at,{icon:"fa-low-vision",modelValue:A.value,"onUpdate:modelValue":b[31]||(b[31]=w=>A.value=w),label:"Show only selected"},null,8,["modelValue"])]),N.value.length>0?(_(),C("div",CT,[(_(!0),C(te,null,he(N.value,w=>(_(),ce(Nt,{key:w.id,effectable:w,idPrefix:n.sheet.crewType+"-lair-upgrade",propertyName:"Upgrade",change:P=>{ae(w,P,"lair")},onEdit:P=>{ie(P,"lair")},onDelete:P=>be(P,"lair")},null,8,["effectable","idPrefix","change","onEdit","onDelete"]))),128))])):Y("",!0),N.value.length==0?(_(),C("p",ST,AT)):Y("",!0)]),$(E),a("section",null,[TT,a("div",$T,[a("button",{class:"btn",onClick:b[32]||(b[32]=w=>H(K).open(ii,{propertyName:"Upgrade",idPrefix:v.sheet.crewType+"-training-upgrade",onCreateNew:P=>ne(P,"training")}))},OT),$(at,{icon:"fa-low-vision",modelValue:F.value,"onUpdate:modelValue":b[33]||(b[33]=w=>F.value=w),label:"Show only selected"},null,8,["modelValue"])]),J.value.length>0?(_(),C("div",IT,[(_(!0),C(te,null,he(J.value,w=>(_(),ce(Nt,{key:w.id,effectable:w,idPrefix:n.sheet.crewType+"-training-upgrade",propertyName:"Upgrade",change:P=>{ae(w,P,"training")},onEdit:P=>{ie(P,"training")},onDelete:P=>be(P,"training")},null,8,["effectable","idPrefix","change","onEdit","onDelete"]))),128))])):Y("",!0),J.value.length==0?(_(),C("p",PT,NT)):Y("",!0)]),$(E),a("section",null,[DT,a("div",LT,[a("button",{class:"btn",onClick:b[34]||(b[34]=w=>H(K).open(ii,{propertyName:"Upgrade",idPrefix:v.sheet.crewType+"-quality-upgrade",onCreateNew:P=>ne(P,"quality")}))},MT),$(at,{icon:"fa-low-vision",modelValue:oe.value,"onUpdate:modelValue":b[35]||(b[35]=w=>oe.value=w),label:"Show only selected"},null,8,["modelValue"])]),ee.value.length>0?(_(),C("div",BT,[(_(!0),C(te,null,he(ee.value,w=>(_(),ce(Nt,{key:w.id,effectable:w,idPrefix:n.sheet.crewType+"-quality-upgrade",propertyName:"Upgrade",change:P=>{ae(w,P,"quality")},onEdit:P=>{ie(P,"quality")},onDelete:P=>be(P,"quality")},null,8,["effectable","idPrefix","change","onEdit","onDelete"]))),128))])):Y("",!0),ee.value.length==0?(_(),C("p",FT,HT)):Y("",!0)])],2),a("div",{class:Z(["upgrades",{active:i.value==2}])},[a("section",null,[jT,a("div",VT,[a("button",{class:"btn",onClick:b[36]||(b[36]=w=>H(K).open(rl,{propertyName:"Crew Contact",idPrefix:v.sheet.crewType+"-contact",onCreateNew:Ye}))},GT),$(at,{icon:"fa-low-vision",modelValue:Re.value,"onUpdate:modelValue":b[37]||(b[37]=w=>Re.value=w),label:"Show only selected"},null,8,["modelValue"])]),He.value.length>0?(_(),C("div",YT,[(_(!0),C(te,null,he(He.value,w=>(_(),ce(Ph,{key:w.id,idPrefix:n.sheet.crewType+"-contact",propertyName:"Crew Contact",person:w,change:Et,onEdit:Ze,onDelete:st,options:[{value:1,text:"❖"}]},null,8,["idPrefix","person"]))),128))])):Y("",!0),He.value.length==0?(_(),C("p",zT,JT)):Y("",!0)]),$(E),a("section",null,[XT,a("div",ZT,[a("button",{class:"btn",onClick:b[38]||(b[38]=w=>H(K).open(Zs,{propertyName:"gang",idPrefix:v.sheet.crewType+"-gang",onCreateNew:g}))},n$),a("button",{class:"btn",onClick:b[39]||(b[39]=w=>H(K).open(Zs,{propertyName:"expert",idPrefix:v.sheet.crewType+"-expert",onCreateNew:g}))},r$),n.sheet.crewType==="Smugglers"?(_(),C("button",{key:0,class:Z(["btn",{disabled:!I("like-part-of-the-family")}]),onClick:b[40]||(b[40]=w=>H(K).open(Zs,{propertyName:"vehicle",idPrefix:v.sheet.crewType+"-vehicle",onCreateNew:g}))},l$,2)):Y("",!0)]),z.value.length>0?(_(),C("div",c$,[(_(!0),C(te,null,he(z.value,w=>(_(),ce(kE,{key:w.id,cohort:w,idPrefix:n.sheet.crewType,onEdit:k,onDelete:fe},null,8,["cohort","idPrefix"]))),128))])):Y("",!0),z.value.length==0?(_(),C("p",u$,h$)):Y("",!0)])],2)],544),a("div",f$,[a("button",{class:Z(["btn btn--tab",{active:i.value==0}]),onClick:b[42]||(b[42]=w=>h(0))},[se(" 1 "),p$],2),a("button",{class:Z(["btn btn--tab",{active:i.value==1}]),onClick:b[43]||(b[43]=w=>h(1))},[se(" 2 "),m$],2),a("button",{class:Z(["btn btn--tab",{active:i.value==2}]),onClick:b[44]||(b[44]=w=>h(2))},[se(" 3 "),y$],2)])])}}}),_$=de(g$,[["__scopeId","data-v-a707a5a8"]]),Xt=e=>($e("data-v-3fb772dd"),e=e(),qe(),e),v$={class:"page"},b$={class:"controls"},w$={key:0,class:"row center"},k$=["onClick"],x$={key:1,class:"row sheet-controls"},C$=Xt(()=>a("i",{class:"fas fa-arrow-left"},null,-1)),S$=Xt(()=>a("span",{class:"mobile-hidden"},"Back",-1)),E$=[C$,S$],A$={class:"breadcrumbs"},T$=Xt(()=>a("span",{class:"mobile-hidden"},"Sheets",-1)),$$=Xt(()=>a("i",{class:"fas fa-angle-right"},null,-1)),q$=Xt(()=>a("i",{class:"fas fa-sticky-note"},null,-1)),O$=Xt(()=>a("span",{class:"mobile-hidden"},"Notes",-1)),I$=[q$,O$],P$=Xt(()=>a("i",{class:"fas fa-trash"},null,-1)),R$=Xt(()=>a("span",{class:"mobile-hidden"},"Delete",-1)),N$=[P$,R$],D$=["value"],L$={key:0,class:"loading"},U$=Xt(()=>a("i",{class:"fas fa-circle-notch fa-spin"},null,-1)),M$=[U$],B$={key:1,class:"sheet-layout"},F$={key:2,class:"sheet-select-layout"},Q$={key:0,class:"sheet-list"},H$=Xt(()=>a("i",{class:"fas fa-folder-plus"},null,-1)),j$={key:1,class:"sheet-list"},V$=Xt(()=>a("i",{class:"fas fa-folder-plus"},null,-1)),W$={key:0,class:"model-overlay"},G$=ue({__name:"TheGamePage",setup(e){const t=Eh(),n=X(()=>{var A;return!((A=Me().game)!=null&&A.codex)}),i=j("character"),s=X(()=>{var A,N;return Object.values(((N=(A=Me().game)==null?void 0:A.data)==null?void 0:N.sheets)||[])}),r=X(()=>({crew:"Your crew type determines the scores that you'll focus on, as well as a selection of special abilities that support that kind of action.",character:"What kind of scoundrel are you? Each playbook has a unique set of special abilities and XP triggers to change how you play."})[i.value]||"Choose a sheet type to get started."),o=X(()=>s.value.filter(A=>A.sheetType==="crew")),l=X(()=>s.value.filter(A=>A.sheetType==="character")),c=j(null),u=j(!1);pn(()=>{const A=t.params.id;K_(A)});const d=j(!1);function h(){d.value=!d.value}function f(A,N){if(!c.value)return console.error("No current sheet");console.log("onChangeValue",A,N);const F=`/data/sheets/${c.value.id}/${N}`;ke([{op:"replace",path:F,value:A}])}function m(){K.open(I1,{sheetType:i.value,description:r.value,templateTypeKey:i.value+"Type",templates:C1(i.value),onConfirm:y})}function y(A,N){var F,J;if(!N)return console.error("Sheet not found");Mi.track("Create Sheet",{sheetType:A,sheetId:N.id}),(J=(F=Me().game)==null?void 0:F.data)!=null&&J.sheets?ke([{op:"add",path:`/data/sheets/${N.id}`,value:N}]):ke([{op:"replace",path:"/data",value:{sheets:{[N.id]:N}}}])}function S(){c.value&&K.open(sl,{title:"Delete Sheet",message:`Are you sure you want to delete <em>${c.value.name}</em> ${c.value.sheetType} sheet?`,confirmText:"Yes, delete it",onConfirm:()=>{var A;ke([{op:"remove",path:`/data/sheets/${(A=c.value)==null?void 0:A.id}`}]),c.value=null,K.close()}})}return(A,N)=>{var F,J,oe;return _(),C(te,null,[a("div",v$,[a("div",b$,[c.value?(_(),C("div",x$,[a("button",{class:"btn btn--icon",onClick:N[0]||(N[0]=ee=>c.value=null)},E$),a("h2",A$,[a("span",null,[a("span",null,U(c.value.sheetType),1),T$]),$$,a("span",null,U(c.value.name),1)]),a("div",{class:"row flat no-gap"},[a("button",{class:"btn btn--icon",onClick:h},I$),a("button",{class:"btn btn--icon",onClick:S},N$)])])):(_(),C("div",w$,[(_(),C(te,null,he([{name:"crew",text:"Crews"},{name:"character",text:"Characters"},{name:"world",text:"World",disabled:!0}],ee=>a("button",{class:Z(["btn btn--tab",{active:i.value===ee.name,disabled:ee.disabled}]),onClick:ie=>i.value=ee.name},[a("span",null,U(ee.text),1)],10,k$)),64))])),c.value?(_(),C("div",{key:2,class:Z(["sheet-notes",{"show-notes":d.value}])},[a("textarea",{value:(F=c.value)==null?void 0:F.notes,onChange:N[1]||(N[1]=ee=>{var ie;return f((ie=ee.target)==null?void 0:ie.value,"notes")}),spellcheck:"false"},null,40,D$),a("button",{class:"btn btn--text",onClick:N[2]||(N[2]=ee=>d.value=!1)},"Close")],2)):Y("",!0)]),n.value?(_(),C("div",L$,M$)):c.value?(_(),C("div",B$,[((J=c.value)==null?void 0:J.sheetType)==="crew"?(_(),ce(_$,{key:0,sheet:c.value},null,8,["sheet"])):Y("",!0),((oe=c.value)==null?void 0:oe.sheetType)==="character"?(_(),ce(MC,{key:1,sheet:c.value},null,8,["sheet"])):Y("",!0)])):(_(),C("div",F$,[i.value==="crew"?(_(),C("ul",Q$,[(_(!0),C(te,null,he(o.value,ee=>(_(),C("li",{key:ee.id},[$(Wc,{sheet:ee,onClick:ie=>c.value=ee},null,8,["sheet","onClick"])]))),128)),a("li",null,[a("div",{class:"new-sheet-card",onClick:m},[H$,a("span",null,"New "+U(i.value),1)])])])):i.value==="character"?(_(),C("ul",j$,[(_(!0),C(te,null,he(l.value,ee=>(_(),C("li",{key:ee.id},[$(Wc,{sheet:ee,onClick:ie=>c.value=ee},null,8,["sheet","onClick"])]))),128)),a("li",null,[a("div",{class:"new-sheet-card",onClick:m},[V$,a("span",null,"New "+U(i.value),1)])])])):Y("",!0),$(Jw,{class:"mobile-hidden"})]))]),u.value?(_(),C("div",W$,[a("pre",null,U(JSON.stringify(H(Me)().game,null,2)),1),a("button",{class:"btn debug btn",onClick:N[3]||(N[3]=ee=>u.value=!1)}," Close ")])):Y("",!0)],64)}}}),Y$=de(G$,[["__scopeId","data-v-3fb772dd"]]),z$=j();var aa=(e=>(e.HOME="home",e.GAMES="games",e.GAME="game",e.INVITE="invite",e.SETTINGS="settings",e.LOST="lost",e))(aa||{});const K$=[{path:"/",components:{page:Cb},name:"home"},{path:"/game/:id",components:{page:Y$},name:"game"},{path:"/invite/:code",components:{page:Rw},name:"invite"},{path:"/:pathMatch(.*)*",components:{page:Mw},name:"lost"}],J$={history:rw(),routes:K$},Kt=qw(J$);Kt.afterEach(async(e,t)=>{});Kt.beforeEach(async(e,t,n)=>{J_(),K.open(Qi,{backgroundClass:"opaque"}),xt().refreshToken&&!xt().accessToken&&await zd(),Ue().id||(console.log("@index.ts: fetchMyAccount() because no user id"),await Wi()),(!xt().refreshToken||!Ue().id)&&await Dh(),K.close(),z$.value=e.name,n()});async function Dh(){try{const e=await _t.post("/account/create-guest");return e.data.refreshToken&&(xt().storeRefreshToken(e.data.refreshToken),xt().accessToken=e.data.accessToken,console.log("@account.ts: fetchMyAccount() because of createGuest"),await Wi()),e.data}catch{return null}}async function X$(e,t){var n;try{const s=!e||!t?{}:{username:e,password:t};console.log("registerAccount payload:",s);const r=await _t.post("/account/create",s);return console.log("response:",r),r.status!==An.Ok?r.data:(console.log("@account.ts: fetchMyAccount() because of registerAccount"),Mi.track("Register Account",{username:e}),await Wi(),null)}catch(i){return(n=i==null?void 0:i.response)==null?void 0:n.data}}async function Z$(e,t){var n;try{const i=await _t.post("/account/login",{username:e,password:t});return i.data.refreshToken&&(xt().storeRefreshToken(i.data.refreshToken),xt().accessToken=i.data.accessToken,console.log("@account.ts: fetchMyAccount() because of login"),Mi.track("Login",{username:e}),await Wi()),i.data}catch(i){return(n=i==null?void 0:i.response)==null?void 0:n.data}}async function Wi(){try{const e=await _t.get("/account/me");return e.data?(Ue().id=e.data.id,Ue().username=e.data.username,Ue().isGuest=e.data.isGuest,Ue().portrait=e.data.portrait,Ue().games=e.data.games,e.data):null}catch{return null}}async function ll(){xt().clear(),Ue().clear(),Me().clear(),Kt.push("/"),K.open(Qi),await Dh(),K.close()}async function e2(e){var t;try{const n=await _t.delete("/account/me",{data:{password:e}});return n.status!==An.Ok?n.data:null}catch(n){return(t=n==null?void 0:n.response)==null?void 0:t.data}}async function t2(e){var t;try{const n=await _t.put("/account/username",{newUsername:e});return n.status!==An.Ok?n.data:(Ue().username=e,null)}catch(n){return(t=n==null?void 0:n.response)==null?void 0:t.data}}async function n2(e,t){var n;try{const i=await _t.put("/account/password",{password:e,newPassword:t});return i.status!==An.Ok?i.data:null}catch(i){return(n=i==null?void 0:i.response)==null?void 0:n.data}}async function i2(e){var t;try{const n=await _t.put("/account/portrait",{portraitId:e});return n.status!==An.Ok?n.data:(Ue().portrait=e,null)}catch(n){return(t=n==null?void 0:n.response)==null?void 0:t.data}}let yo;async function s2(){return yo||(yo=(await _t.get("/version")).data),yo}const $n=e=>($e("data-v-fd8ada18"),e=e(),qe(),e),r2=$n(()=>a("h2",null,"Change Password",-1)),o2={class:"change-password"},a2=$n(()=>a("p",null,[se("Choose a new "),a("em",null,"password"),se(" for your account.")],-1)),l2=$n(()=>a("p",{class:"muted"}," Your new password should be at least 8 characters long. ",-1)),c2={class:"inputs"},u2={class:"input-group"},d2=$n(()=>a("label",{for:"password"},"Current Password",-1)),h2={key:0,class:"reminder shake-once"},f2={class:"input-group"},p2=$n(()=>a("label",{for:"password"},"New Password",-1)),m2={key:0,class:"reminder shake-once"},y2={class:"input-group"},g2=$n(()=>a("label",{for:"confirm-password"},"Confirm New Password",-1)),_2={key:0,class:"reminder shake-once"},v2={key:0,class:"alert"},b2=$n(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),w2=$n(()=>a("i",{class:"fas fa-times"},null,-1)),k2=[w2],x2={class:"row center"},C2={key:0,class:"fas fa-circle-notch fa-spin"},S2=$n(()=>a("span",null,"Change Password",-1)),E2=ue({__name:"ChangePasswordModal",setup(e){const t=j(""),n=j(!1),i=j(""),s=j(!1),r=X(()=>l.value&&o.value.length===0?"Enter your current password":null),o=j(""),l=j(!1),c=X(()=>l.value?o.value.length===0?"Come up with something clever":o.value.length<8?"Must be at least 8 characters":o.value.length>64?"Can't be more than 64 characters":null:null),u=j(""),d=j(!1),h=X(()=>d.value?u.value.length===0?"Your new password again":o.value!==u.value?"Passwords don't match":null:null);async function f(){if(!s.value||!l.value||!d.value||r.value||c.value||h.value){s.value=!0,l.value=!0,d.value=!0,document.querySelectorAll(".reminder").forEach(S=>{S.classList.remove("shake-once"),S.offsetWidth,S.classList.add("shake-once")});return}n.value=!0,t.value="";const m=await n2(i.value,o.value);n.value=!1,m?t.value=m:K.open(Hr,{title:"Success",message:"Your password has been changed successfully."})}return(m,y)=>(_(),ce(ft,{class:Z({disabled:n.value})},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[r2]),_:1})]),content:W(()=>[a("div",o2,[a2,l2,a("div",c2,[a("div",u2,[d2,Ne(a("input",{type:"password",onInput:y[0]||(y[0]=S=>s.value=!0),placeholder:"Your current password","onUpdate:modelValue":y[1]||(y[1]=S=>i.value=S)},null,544),[[De,i.value]]),r.value?(_(),C("span",h2,U(r.value),1)):Y("",!0)]),a("div",f2,[p2,Ne(a("input",{type:"password",onInput:y[2]||(y[2]=S=>l.value=!0),placeholder:"Create a new password","onUpdate:modelValue":y[3]||(y[3]=S=>o.value=S)},null,544),[[De,o.value]]),c.value?(_(),C("span",m2,U(c.value),1)):Y("",!0)]),a("div",y2,[g2,Ne(a("input",{type:"password",onInput:y[4]||(y[4]=S=>d.value=!0),onKeyup:Ss(f,["enter"]),placeholder:"Confirm your new password","onUpdate:modelValue":y[5]||(y[5]=S=>u.value=S)},null,544),[[De,u.value]]),h.value?(_(),C("span",_2,U(h.value),1)):Y("",!0)])]),t.value?(_(),C("div",v2,[b2,a("span",null,U(t.value),1),a("button",{class:"btn btn--icon close",onClick:y[6]||(y[6]=S=>t.value="")},k2)])):Y("",!0),a("div",x2,[a("button",{class:"btn mobile-full-width",onClick:f},[n.value?(_(),C("i",C2)):Y("",!0),S2])])])]),_:1},8,["class"]))}}),A2=de(E2,[["__scopeId","data-v-fd8ada18"]]),Gi=e=>($e("data-v-af22bc65"),e=e(),qe(),e),T2=Gi(()=>a("h2",null,"Change Username",-1)),$2={class:"change-username"},q2=Gi(()=>a("p",null,[se("Choose a new "),a("em",null,"username"),se(" for your account.")],-1)),O2={class:"muted"},I2={class:"inputs"},P2={class:"input-group"},R2=Gi(()=>a("label",{for:"username"},"New Username",-1)),N2={key:0,class:"reminder shake-once"},D2={key:0,class:"alert"},L2=Gi(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),U2=Gi(()=>a("i",{class:"fas fa-times"},null,-1)),M2=[U2],B2={class:"row center"},F2={key:0,class:"fas fa-circle-notch fa-spin"},Q2=Gi(()=>a("span",null,"Change Username",-1)),H2=ue({__name:"ChangeUsernameModal",setup(e){const t=j(""),n=j(!1),i=j(""),s=j(!1),r=X(()=>s.value?i.value.length===0?"What should we call you?":i.value.length<3?"Must be at least 3 characters":i.value.length>24?"Must have no more than 16 characters":/^[a-zA-Z0-9]+$/.test(i.value)?null:"Letters and numbers only":null);async function o(){if(!s.value||r.value){s.value=!0,document.querySelectorAll(".reminder").forEach(u=>{u.classList.remove("shake-once"),u.offsetWidth,u.classList.add("shake-once")});return}n.value=!0,t.value="";const l=await t2(i.value);n.value=!1,l?t.value=l:K.open(Hr,{title:"Success",message:`Username has been changed successfully. Your username is now <em>${i.value}</em>.`})}return(l,c)=>(_(),ce(ft,{class:Z({disabled:n.value})},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[T2]),_:1})]),content:W(()=>[a("div",$2,[q2,a("p",O2,[se(" Your current username is "),a("em",null,U(H(Ue)().username),1),se(". ")]),a("div",I2,[a("div",P2,[R2,Ne(a("input",{type:"text",onInput:c[0]||(c[0]=u=>s.value=!0),onKeydown:Ss(o,["enter"]),placeholder:"Enter a new username","onUpdate:modelValue":c[1]||(c[1]=u=>i.value=u)},null,544),[[De,i.value]]),r.value?(_(),C("span",N2,U(r.value),1)):Y("",!0)])]),t.value?(_(),C("div",D2,[L2,a("span",null,U(t.value),1),a("button",{class:"btn btn--icon close",onClick:c[2]||(c[2]=u=>t.value="")},M2)])):Y("",!0),a("div",B2,[a("button",{class:"btn mobile-full-width",onClick:o},[n.value?(_(),C("i",F2)):Y("",!0),Q2])])])]),_:1},8,["class"]))}}),j2=de(H2,[["__scopeId","data-v-af22bc65"]]),Jn=e=>($e("data-v-0286b377"),e=e(),qe(),e),V2=Jn(()=>a("h2",null,"Delete Account",-1)),W2={class:"confirm"},G2=Jn(()=>a("p",null,[se(" This action is "),a("em",null,"irreversible"),se(". All data related to your account will be "),a("em",null,"lost"),se(". Are you sure you want to continue and delete your account? ")],-1)),Y2={class:"input-group"},z2=Jn(()=>a("label",{for:"password"},"Password",-1)),K2={key:0,class:"alert"},J2=Jn(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),X2=Jn(()=>a("i",{class:"fas fa-times"},null,-1)),Z2=[X2],eq={class:"column center"},tq=Jn(()=>a("span",null,"No, I want to keep my account",-1)),nq=[tq],iq=Jn(()=>a("span",{class:"muted"},"or",-1)),sq=Jn(()=>a("span",null,"Yes, I want to delete my account",-1)),rq=[sq],oq=ue({__name:"ConfirmDeleteAccountModal",setup(e){const t=j(""),n=j(""),i=j(!1);async function s(){i.value=!0,n.value="",n.value=await e2(t.value),n.value||(K.close(),ll()),i.value=!1}return(r,o)=>(_(),ce(ft,{disabled:i.value},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[V2]),_:1})]),content:W(()=>[a("div",W2,[G2,a("div",Y2,[z2,Ne(a("input",{id:"password",type:"password",placeholder:"Enter your password","onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l)},null,512),[[De,t.value]])]),n.value?(_(),C("div",K2,[J2,a("span",null,U(n.value),1),a("button",{class:"btn btn--icon close",onClick:o[1]||(o[1]=l=>n.value="")},Z2)])):Y("",!0),$(on),a("div",eq,[a("button",{class:"btn",onClick:o[2]||(o[2]=l=>H(K).close())},nq),iq,a("button",{class:Z(["btn btn--text",{disabled:!t.value}]),onClick:s},rq,2)])])]),_:1},8,["disabled"]))}}),aq=de(oq,[["__scopeId","data-v-0286b377"]]),Xn=e=>($e("data-v-497ae5b4"),e=e(),qe(),e),lq=Xn(()=>a("h2",null,"Login",-1)),cq={class:"login"},uq=Xn(()=>a("p",null,[se("Enter your "),a("em",null,"username"),se(" and "),a("em",null,"password"),se(".")],-1)),dq={class:"inputs"},hq={class:"input-group"},fq=Xn(()=>a("label",{for:"username"},"Username",-1)),pq={key:0,class:"reminder shake-once"},mq={class:"input-group"},yq=Xn(()=>a("label",{for:"password"},"Password",-1)),gq={key:0,class:"reminder shake-once"},_q={key:0,class:"alert"},vq=Xn(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),bq=Xn(()=>a("i",{class:"fas fa-times"},null,-1)),wq=[bq],kq={class:"row center"},xq={key:0,class:"fas fa-circle-notch fa-spin"},Cq=Xn(()=>a("span",null,"Login",-1)),Sq=Xn(()=>a("p",null,"Don't have an account?",-1)),Eq=ue({__name:"LoginModal",setup(e){const t=j(""),n=j(!1),i=j(""),s=j(!1),r=X(()=>s.value&&i.value.length===0?"Your username, please":null),o=j(""),l=j(!1),c=X(()=>l.value&&o.value.length===0?"Did you forget something?":null),u=X(()=>i.value.length>0&&o.value.length>0);async function d(){if(!u.value&&(!s.value||!l||r.value||c.value)){s.value=!0,l.value=!0,document.querySelectorAll(".reminder").forEach(y=>{y.classList.remove("shake-once"),y.offsetWidth,y.classList.add("shake-once")});return}n.value=!0,t.value="";const f=await Z$(i.value,o.value);n.value=!1,f.refreshToken?K.close():t.value=f}function h(){K.open(Uh)}return(f,m)=>(_(),ce(ft,{class:Z({disabled:n.value})},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[lq]),_:1})]),content:W(()=>[a("div",cq,[uq,a("div",dq,[a("div",hq,[fq,Ne(a("input",{type:"text",onInput:m[0]||(m[0]=y=>s.value=!0),placeholder:"Enter a username","onUpdate:modelValue":m[1]||(m[1]=y=>i.value=y)},null,544),[[De,i.value]]),r.value?(_(),C("span",pq,U(r.value),1)):Y("",!0)]),a("div",mq,[yq,Ne(a("input",{type:"password",onInput:m[2]||(m[2]=y=>l.value=!0),onKeyup:Ss(d,["enter"]),placeholder:"Create a password","onUpdate:modelValue":m[3]||(m[3]=y=>o.value=y)},null,544),[[De,o.value]]),c.value?(_(),C("span",gq,U(c.value),1)):Y("",!0)])]),t.value?(_(),C("div",_q,[vq,a("span",null,U(t.value),1),a("button",{class:"btn btn--icon close",onClick:m[4]||(m[4]=y=>t.value="")},wq)])):Y("",!0),a("div",kq,[a("button",{class:"btn mobile-full-width",onClick:d},[n.value?(_(),C("i",xq)):Y("",!0),Cq])]),a("div",{class:"row center"},[Sq,a("button",{class:"btn btn--text",onClick:h}," Register ")])])]),_:1},8,["class"]))}}),Lh=de(Eq,[["__scopeId","data-v-497ae5b4"]]),qn=e=>($e("data-v-bb068875"),e=e(),qe(),e),Aq=qn(()=>a("h2",null,"Register your Account",-1)),Tq={class:"create-account"},$q=qn(()=>a("p",null,[se(" Choose a "),a("em",null,"username"),se(" and "),a("em",null,"password"),se(" to register your account. ")],-1)),qq={class:"inputs"},Oq={class:"input-group"},Iq=qn(()=>a("label",{for:"username"},"Username",-1)),Pq={key:0,class:"reminder shake-once"},Rq={class:"input-group"},Nq=qn(()=>a("label",{for:"password"},"Password",-1)),Dq={key:0,class:"reminder shake-once"},Lq={class:"input-group"},Uq=qn(()=>a("label",{for:"confirm-password"},"Confirm Password",-1)),Mq={key:0,class:"reminder shake-once"},Bq={key:0,class:"alert"},Fq=qn(()=>a("i",{class:"fas fa-exclamation-circle"},null,-1)),Qq=qn(()=>a("i",{class:"fas fa-times"},null,-1)),Hq=[Qq],jq={class:"row center"},Vq={key:0,class:"fas fa-circle-notch fa-spin"},Wq=qn(()=>a("span",null,"Register Account",-1)),Gq=qn(()=>a("p",null,"Already have an account?",-1)),Yq=ue({__name:"CreateAccountModal",setup(e){const t=j(""),n=j(!1),i=j(""),s=j(!1),r=X(()=>s.value?i.value.length===0?"What should we call you?":i.value.length<3?"Must be at least 3 characters":i.value.length>24?"Must have no more than 16 characters":/^[a-zA-Z0-9]+$/.test(i.value)?null:"Letters and numbers only":null),o=j(""),l=j(!1),c=X(()=>l.value?o.value.length===0?"Come up with something clever":o.value.length<8?"Must be at least 8 characters":o.value.length>64?"Can't be more than 64 characters":null:null),u=j(""),d=j(!1),h=X(()=>d.value?u.value.length===0?"Your password again":o.value!==u.value?"Passwords don't match":null:null);async function f(){if(!s.value||!l.value||!d.value||r.value||c.value||h.value){s.value=!0,l.value=!0,d.value=!0,document.querySelectorAll(".reminder").forEach(A=>{A.classList.remove("shake-once"),A.offsetWidth,A.classList.add("shake-once")});return}n.value=!0,t.value="";const y=await X$(i.value,o.value);n.value=!1,y?t.value=y:K.close()}function m(){K.open(Lh)}return(y,S)=>(_(),ce(ft,{class:Z({disabled:n.value})},{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[Aq]),_:1})]),content:W(()=>[a("div",Tq,[$q,a("div",qq,[a("div",Oq,[Iq,Ne(a("input",{type:"text",onInput:S[0]||(S[0]=A=>s.value=!0),placeholder:"Enter a username","onUpdate:modelValue":S[1]||(S[1]=A=>i.value=A)},null,544),[[De,i.value]]),r.value?(_(),C("span",Pq,U(r.value),1)):Y("",!0)]),a("div",Rq,[Nq,Ne(a("input",{type:"password",onInput:S[2]||(S[2]=A=>l.value=!0),placeholder:"Create a password","onUpdate:modelValue":S[3]||(S[3]=A=>o.value=A)},null,544),[[De,o.value]]),c.value?(_(),C("span",Dq,U(c.value),1)):Y("",!0)]),a("div",Lq,[Uq,Ne(a("input",{type:"password",onInput:S[4]||(S[4]=A=>d.value=!0),onKeyup:Ss(f,["enter"]),placeholder:"Confirm your password","onUpdate:modelValue":S[5]||(S[5]=A=>u.value=A)},null,544),[[De,u.value]]),h.value?(_(),C("span",Mq,U(h.value),1)):Y("",!0)])]),t.value?(_(),C("div",Bq,[Fq,a("span",null,U(t.value),1),a("button",{class:"btn btn--icon close",onClick:S[6]||(S[6]=A=>t.value="")},Hq)])):Y("",!0),a("div",jq,[a("button",{class:"btn mobile-full-width",onClick:f},[n.value?(_(),C("i",Vq)):Y("",!0),Wq])]),a("div",{class:"row center"},[Gq,a("button",{class:"btn btn--text",onClick:m},"Log in")])])]),_:1},8,["class"]))}}),Uh=de(Yq,[["__scopeId","data-v-bb068875"]]),Ct=e=>($e("data-v-3bf9eaea"),e=e(),qe(),e),zq={class:"account"},Kq=Ct(()=>a("p",null,"Choose a portrait from the list below.",-1)),Jq={class:"portrait-select"},Xq=["onClick"],Zq={key:0,class:"overlay"},eO={key:1,class:"fas fa-check-circle"},tO={key:0},nO=Ct(()=>a("p",null,"You are currently logged in as a guest.",-1)),iO={key:0,class:"row"},sO=Ct(()=>a("span",null,"Register Account",-1)),rO=[sO],oO=Ct(()=>a("i",{class:"fas fa-sign-out-alt"},null,-1)),aO=Ct(()=>a("span",null,"Login",-1)),lO=[oO,aO],cO={key:1,class:"account-management"},uO=Ct(()=>a("p",null," Change your username. This will also change your display name in all games. ",-1)),dO=Ct(()=>a("i",{class:"fas fa-user-edit"},null,-1)),hO=Ct(()=>a("span",null,"Change Username",-1)),fO=[dO,hO],pO=Ct(()=>a("p",null,"Change your password.",-1)),mO=Ct(()=>a("i",{class:"fas fa-key"},null,-1)),yO=Ct(()=>a("span",null,"Change Password",-1)),gO=[mO,yO],_O={class:"attribution"},vO={class:"muted"},bO=Ct(()=>a("p",null,[se(" This work is based on "),a("a",{class:"anchor-link",href:"http://www.bladesinthedark.com/",target:"_blank"}," Blades in the Dark "),se(" , product of One Seven Design, developed and authored by John Harper, and licensed for our use under the "),a("a",{class:"anchor-link",href:"http://creativecommons.org/licenses/by/3.0/",target:"_blank"}," Creative Commons Attribution 3.0 Unported license ")],-1)),wO=Ct(()=>a("span",null,"View Full Attribution",-1)),kO=[wO],xO={class:"center"},CO=Ct(()=>a("span",null,"Sign Out",-1)),SO=[CO],EO=Ct(()=>a("span",null,"Delete Account",-1)),AO=[EO],TO={class:"row center id-block"},$O={class:"muted text-center"},qO=Ct(()=>a("i",{class:"fas fa-copy"},null,-1)),OO=[qO],IO={class:"muted text-center"},PO=ue({__name:"AccountModal",setup(e){const t=j("");pn(()=>{s2().then(h=>t.value=`${Ym.version} • ${h}`)});const n=new Date().getFullYear();function i(){K.open(sl,{title:"Sign Out",message:"Are you sure you want to sign out?",onConfirm:()=>ll(),onCancel:()=>K.open(Mh),onConfirmText:"Yes, I want to sign out",onCancelText:"No, keep me signed in"})}function s(){K.open(aq)}function r(){K.open(Lh)}function o(){navigator.clipboard.writeText(Ue().id)}function l(){K.open(Uh)}function c(h){i2(h)}function u(){K.open(j2)}function d(){K.open(A2)}return(h,f)=>{const m=Fi("Divider");return _(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[a("h2",null,U(H(Ue)().username)+"'s Account",1)]),_:1})]),content:W(()=>[a("div",zq,[a("section",null,[Kq,a("ul",Jq,[(_(!0),C(te,null,he(H(Ue)().portraits,y=>(_(),C("li",{key:y.id,onClick:S=>c(y.id),class:Z({selected:y.id===H(Ue)().portrait})},[$(il,{portraitId:y.id},null,8,["portraitId"]),y.id===H(Ue)().portrait?(_(),C("div",Zq)):Y("",!0),y.id===H(Ue)().portrait?(_(),C("i",eO)):Y("",!0)],10,Xq))),128))])]),$(m),H(Ue)().isGuest?(_(),C("section",tO,[nO,H(Ue)().isGuest?(_(),C("div",iO,[a("button",{class:"btn",onClick:l},rO),a("button",{class:"btn btn--alt",onClick:r},lO)])):Y("",!0)])):(_(),C("section",cO,[a("div",{class:"input-group"},[uO,a("button",{class:"btn mobile-full-width",onClick:u},fO)]),a("div",{class:"input-group"},[pO,a("button",{class:"btn mobile-full-width",onClick:d},gO)])])),$(m),a("section",_O,[a("p",null,[a("span",vO,"© "+U(H(n))+" Olin Kirkland",1)]),bO,a("button",{class:"btn btn--alt mobile-full-width",onClick:f[0]||(f[0]=()=>H(K).open(fh))},kO)]),$(m),a("section",xO,[H(Ue)().isGuest?Y("",!0):(_(),C("button",{key:0,class:"btn btn--text",onClick:i},SO)),H(Ue)().isGuest?Y("",!0):(_(),C("button",{key:1,class:"btn btn--text",onClick:s},AO)),a("div",TO,[a("p",$O,"ID: "+U(H(Ue)().id),1),a("button",{class:"btn btn--icon muted",onClick:o},OO)]),a("p",IO,U(t.value),1)])])]),_:1})}}}),Mh=de(PO,[["__scopeId","data-v-3bf9eaea"]]);var er=(e=>(e.PLAYER="player",e.GM="gm",e.ADMIN="admin",e))(er||{});const Kc=["tiny","big","happy","sad","smart","funny","serious","crazy","silly","brave","shy","loud","quiet","fast","slow","strong","weak","bright","dark","hot","cold","hard","soft","sharp","dull","clean","dirty","smooth","rough","old","new","sweet","sour","bitter","spicy","tasty","gross","fresh","stale","thick","thin","straight","curved","simple","complex","friendly","fierce","gentle","wild","calm"],Jc=["dog","cat","bird","fish","rabbit","lion","tiger","elephant","monkey","snake","turtle","spider","horse","cow","sheep","goat","pig","chicken","duck","mouse","bear","fox","wolf","deer","whale","shark","dolphin","octopus","frog","crocodile","dragon","unicorn","phoenix","eagle","hawk","owl","penguin","koala","panda","squirrel","bat","bee","ant","butterfly","mosquito","snail","slug","lizard","crab","lobster","starfish","tree","flower","mountain","river","ocean","lake","island","desert","forest","cave","rock","cloud","sun","moon","star","planet","galaxy","comet","asteroid","meteor","rain","snow","wind","storm","rainbow","thunder","lightning","fire","ice","earth","sky","sea","sand","dust","grass","leaf","root","branch","twig","stone","pebble","sand","soil","mud","clay","metal","gold","silver","copper","iron","bronze","steel","aluminum","platinum","diamond","ruby","sapphire","emerald","crystal","gem","pearl","amber","ivory","bone","horn","feather","fur","hair","wool","silk","cotton","leather","cloth","fabric","thread","needle","scissors","knife","sword","shield","bow","arrow","spear","axe","hammer","nail","screw","bolt","nut","washer","glue","tape","rope","chain","wire","cable","net","mesh","web","hook","latch","lock","key","door","window","wall","floor","ceiling","roof","stairs","bridge","path","road","street","alley","lane","highway","avenue","boulevard","square","park","garden","yard","field","meadow","pasture","orchard","vineyard","farm","barn","shed","house","home","cottage","cabin","villa","palace","castle","tower","fort","church","temple","mosque","synagogue","shrine","monastery","cathedral","chapel","grave","tomb","crypt","pyramid","sphinx","statue","monument","obelisk","arch","gate","fence","wall","hedge","barrier","barricade","fountain","pool","pond","lake","river","stream","waterfall","spring","well","oasis","beach","coast","cliff","canyon","valley","plateau","mountain","hill","peak","summit","volcano","crater","glacier","iceberg","cave","tunnel","mine","cemetery","graveyard","mausoleum","sanctuary","altar","shrine","mosque","temple","church","synagogue","cathedral","monastery","abbey","cloister","nunnery","chapel","crypt","tomb","grave","ossuary","sarcophagus","catacomb","columbarium","graveyard","cemetary","burialground","necropolis","pyramid","museum","gallery","exhibition","exhibit","art","sculpture","painting","portrait","landscape","stilllife","history","ancient","medieval","renaissance","modern","contemporary","abstract","realism","impressionism","expressionism","surrealism","cubism","dadaism","futurism","constructivism","minimalism","popart","opart","kineticart","environmentalart","performanceart","installationart","conceptualart","videoart","digitalart","netart","virtualart","interactivart","landart","streetart","graffiti","photography","photojournalism","documentary","landscape","portrait","wildlife","nature","macro","micro","aerial","underwater","night","longexposure","blackandwhite","color","fineart","commercial","editorial","fashion","beauty","portrait","product","food","interior","architecture","cityscape","event","wedding","sports","action","adventure","travel","street","documentary","candid","photojournalism","landscape","wildlife","nature","macro","aerial","underwater","night","longexposure","blackandwhite","color","fineart","commercial","editorial","fashion","beauty","portrait","product","food","interior","architecture","cityscape","event","wedding","sports","action","adventure","travel","street","documentary","candid"];function RO(){const e=Kc[Math.floor(Math.random()*Kc.length)],t=Jc[Math.floor(Math.random()*Jc.length)],n=Math.floor(Math.random()*900)+100;return`${e}-${t}-${n}`}function NO(e){for(var t=5381,n=e.length;n;)t=t*33^e.charCodeAt(--n);return t>>>0}var DO=NO;const Xc=Zc(DO),Zt=e=>($e("data-v-50ac7fd6"),e=e(),qe(),e),LO=Zt(()=>a("h2",null,"Game Options",-1)),UO={class:"options"},MO={class:"game-name"},BO={class:"input-group"},FO=Zt(()=>a("label",{for:"name"},"Game Name",-1)),QO={key:0,class:"reminder shake-once"},HO={class:"invite"},jO=Zt(()=>a("label",null,"Invite a Player",-1)),VO={class:"row invite-block"},WO={class:"row"},GO={class:"muted text-center"},YO=Zt(()=>a("i",{class:"fas fa-copy"},null,-1)),zO=[YO],KO=Zt(()=>a("i",{class:"fas fa-sync"},null,-1)),JO=[KO],XO={class:"codex"},ZO=Zt(()=>a("label",{for:"manage-codex"},"Manage Codex",-1)),eI=Zt(()=>a("p",{class:"muted"}," The Codex contains descriptions and definitions that are made available on the platform. ",-1)),tI=Zt(()=>a("i",{class:"fas fa-sync"},null,-1)),nI=Zt(()=>a("span",null,"Reset Codex",-1)),iI=[tI,nI],sI={class:"input-group"},rI=Zt(()=>a("label",null,"Sheets Options",-1)),oI=Zt(()=>a("span",null,"Abandon Game",-1)),aI=[oI],lI=ue({__name:"GameOptionsModal",setup(e){var h;const t=j(null),n=j((h=Me().game)==null?void 0:h.name);X(()=>{var f;return((f=Me().userPlayer)==null?void 0:f.role)===er.GM});const i=X(()=>{var f;return`${window.location.origin}/invite/${(f=Me().game)==null?void 0:f.inviteCode}`}),s=X(()=>{var f;return Xc(JSON.stringify((f=Me().game)==null?void 0:f.codex)??"")}),r=X(()=>Xc(JSON.stringify(na)));function o(){if(!n.value){t.value="Name cannot be empty";return}t.value=null,ke([{op:"replace",path:"/name",value:n.value}])}function l(){navigator.clipboard.writeText(i.value)}function c(){ke([{op:"replace",path:"/inviteCode",value:RO()}])}function u(){K.open(sl,{title:"Leave Game",message:"Are you sure you want to leave the game?",confirmText:"Leave Game",onConfirm:async()=>{K.open(Qi),await Gv(),Kt.push("/"),K.close()}})}function d(){ke([{op:"replace",path:"/codex",value:na}])}return(f,m)=>(_(),ce(ft,null,{header:W(()=>[$(pt,{closeButton:""},{default:W(()=>[LO]),_:1})]),content:W(()=>{var y,S;return[a("div",UO,[a("section",MO,[a("div",BO,[FO,Ne(a("input",{type:"text",class:Z({disabled:((y=H(Me)().userPlayer)==null?void 0:y.role)!==H(er).GM}),onChange:o,placeholder:"Enter a descriptive name","onUpdate:modelValue":m[0]||(m[0]=A=>n.value=A)},null,34),[[De,n.value]]),t.value?(_(),C("span",QO,U(t.value),1)):Y("",!0)])]),a("section",HO,[jO,a("div",VO,[a("div",WO,[a("p",GO,U(i.value),1),a("button",{class:"btn btn--icon muted",onClick:l},zO)]),((S=H(Me)().userPlayer)==null?void 0:S.role)===H(er).GM?(_(),C("button",{key:0,class:"btn btn--icon muted",onClick:c},JO)):Y("",!0)])]),$(on),a("section",XO,[ZO,$(Vt,{ignoreOptions:""},{default:W(()=>[eI]),_:1}),a("p",null,U(s.value===r.value?"The Codex matches the latest version.":"A newer version of the Codex is available."),1),a("button",{class:Z(["btn mobile-full-width",{disabled:s.value===r.value}]),onClick:d},iI,2)]),$(on),a("section",null,[a("div",sI,[rI,$(at,{modelValue:H(oa)().options.showHints,"onUpdate:modelValue":m[1]||(m[1]=A=>H(oa)().options.showHints=A),icon:"fa-check",emptyWhenUnchecked:!0,label:"Show rules hints on the Sheets"},null,8,["modelValue"])])]),$(on),a("section",null,[a("div",{class:"row"},[a("button",{class:"btn btn--alt mobile-full-width",onClick:u},aI)])])])]}),_:1}))}}),cI=de(lI,[["__scopeId","data-v-50ac7fd6"]]),uI=e=>($e("data-v-246365aa"),e=e(),qe(),e),dI={class:"logo"},hI={class:"account"},fI=uI(()=>a("i",{class:"fas fa-cog"},null,-1)),pI=[fI],mI=ue({__name:"TheNavigation",setup(e){function t(){K.open(Mh)}function n(){K.open(cI)}return(i,s)=>{var o;const r=Fi("router-link");return _(),C("nav",null,[a("div",dI,[$(r,{to:"/"},{default:W(()=>[$(vd)]),_:1})]),a("div",hI,[(o=H(Me)().game)!=null&&o._id?(_(),C("button",{key:0,class:"btn btn--icon game-options",onClick:n},pI)):Y("",!0),a("button",{class:"btn btn--account",onClick:t},[$(il,{portraitId:H(Ue)().portrait},null,8,["portraitId"]),a("span",null,U(H(Ue)().username||"Account"),1)])])])}}}),yI=de(mI,[["__scopeId","data-v-246365aa"]]),gI=ue({__name:"TheModalContainer",setup(e){const t=j(),n=xo(null),i=xo(null),s=j();function r(){var o;(o=i.value)!=null&&o.closeOnClick&&K.close()}return K.getInstance().addEventListener(({modal:o,modalConfig:l})=>{var c;if((c=document.activeElement)==null||c.blur(),!o)return n.value=null;n.value={...o},i.value={...l},requestAnimationFrame(()=>{var y,S;s.value&&clearInterval(s.value);const u=(y=t.value)==null?void 0:y.$el;if(!u)return;const d=u.querySelector(".modal__header")?[u.querySelector(".modal__header")]:[],h=Array.from(((S=u.querySelector(".modal__content > div"))==null?void 0:S.children)||[]),f=[...d,...h];window.modalChildren=f;const m=u.querySelector("input:not(.disabled):not(.ignore-initial-focus)");m&&m.focus(),f.forEach(A=>A.classList.add("hidden")),s.value=setInterval(()=>{if(!f.length)console.log("clearing interval"),clearInterval(s.value);else{const A=f.shift();A==null||A.classList.remove("hidden")}},50)})}),(o,l)=>{var c;return n.value?(_(),C("div",{key:0,class:Z(["modal-container",(c=i.value)==null?void 0:c.backgroundClass])},[a("div",{class:"modal-container__background",onClick:l[0]||(l[0]=u=>r())}),(_(),ce(hp(n.value),ud(i.value,{ref_key:"modalRef",ref:t}),null,16))],2)):Y("",!0)}}}),_I=de(gI,[["__scopeId","data-v-673461c4"]]),vI={class:"page-layout"},bI={class:"page-layout__content"},wI=ue({__name:"App",setup(e){return(t,n)=>{const i=Fi("router-view");return _(),C(te,null,[a("div",vI,[$(yI),a("div",bI,[$(i,{name:"page"})])]),$(_I)],64)}}});$g();const Vr=Im(wI);Vr.component("Divider",on);const kI=Dm();Vr.use(kI);Vr.use(Kt);Vr.mount("#app");Mi.init("b370d90f461a2cd3c5d8f4bbd4e8907b");window.location.hostname!=="localhost"?(console.warn("Mixpanel tracked the page load!"),Mi.track("Page Load")):console.warn("Accessing from localhost; Mixpanel is disabled.");
